2017-11-29 16:34:26,685 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:34:26,694 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:34:26,694 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:34:26 +08:00

2017-11-29 16:34:26,696 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:34:26,696 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:34:26,697 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:34:26 +08:00

2017-11-29 16:34:27,754 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:34:27 +08:00

2017-11-29 16:34:27,754 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:34:27,755 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:34:27,755 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:34:27,755 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:34:27 +08:00

2017-11-29 16:34:27,757 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:34:27,757 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:34:27,758 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:34:27 +08:00

2017-11-29 16:34:27,758 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:34:27 +08:00

2017-11-29 16:34:27,758 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:34:27,758 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:34:27,758 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:34:27,758 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:34:27 +08:00

2017-11-29 16:34:27,759 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:34:27,759 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:34:27,759 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:34:27 +08:00

2017-11-29 16:34:27,760 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:34:27 +08:00

2017-11-29 16:34:27,760 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:34:27,760 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:34:27,760 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:34:27,760 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:34:27 +08:00

2017-11-29 16:34:27,763 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:34:27,763 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:34:27,763 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:34:27 +08:00

2017-11-29 16:34:27,764 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:34:27 +08:00

2017-11-29 16:34:27,764 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:34:27,764 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:34:27,764 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:34:27,764 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:34:27 +08:00

2017-11-29 16:34:27,765 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:34:27,765 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:34:27,766 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:34:27 +08:00

2017-11-29 16:34:27,766 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:34:27 +08:00

2017-11-29 16:34:27,766 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:34:27,766 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:34:27,766 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:34:27,766 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:34:27 +08:00

2017-11-29 16:34:27,769 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:34:27,769 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:34:27,769 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:34:27 +08:00

2017-11-29 16:34:28,621 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:34:28 +08:00

2017-11-29 16:34:28,621 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:34:28,621 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:34:28,621 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:34:28,621 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:34:28 +08:00

2017-11-29 16:34:28,624 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2017-11-29 16:34:28,625 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:34:28,625 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:34:28 +08:00

2017-11-29 16:34:28,625 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:34:28 +08:00

2017-11-29 16:34:28,625 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:34:28,625 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:34:28,625 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:34:28,625 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:34:28 +08:00

2017-11-29 16:34:28,626 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:34:28,626 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:34:28,626 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:34:28 +08:00

2017-11-29 16:34:28,627 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:34:28 +08:00

2017-11-29 16:34:28,627 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:34:28,627 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:34:28,627 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:34:28,627 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:34:28 +08:00

2017-11-29 16:34:28,630 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:34:28,630 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:34:28,630 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:34:28 +08:00

2017-11-29 16:34:28,630 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:34:28 +08:00

2017-11-29 16:34:28,631 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:34:28,631 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:34:28,631 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:34:28,631 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:34:28 +08:00

2017-11-29 16:34:28,632 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:34:28,632 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:34:28,633 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:34:28 +08:00

2017-11-29 16:34:28,633 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:34:28 +08:00

2017-11-29 16:34:28,633 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:34:28,633 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:34:28,633 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:34:28,633 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:34:28 +08:00

2017-11-29 16:34:28,636 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:34:28,636 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:34:28,636 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:34:28 +08:00

2017-11-29 16:36:03,768 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:36:03 +08:00

2017-11-29 16:36:03,778 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.T_Activities','dbo.T_TestPapers','dbo.T_IdNames','dbo.T_Users','dbo.T_ActivityImgs','dbo.T_AdminLogs','dbo.T_AdminUsers','dbo.T_Roles','dbo.T_Permissions','dbo.T_Cities','dbo.T_Exercises','dbo.T_Settings','dbo.T_UserActivities','dbo.T_RolePermissions','dbo.T_AdminUserRoles')
    OR t.TABLE_NAME = 'EdmMetadata'
2017-11-29 16:36:03,778 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:03,778 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:36:03 +08:00

2017-11-29 16:36:03,780 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 15

2017-11-29 16:36:03,780 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:03,781 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:36:03 +08:00

2017-11-29 16:36:03,867 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:36:03 +08:00

2017-11-29 16:36:04,661 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2017-11-29 16:36:04,661 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:04,662 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'Chat.Service.MyDbContext' (Type = String, Size = 4000)

2017-11-29 16:36:04,662 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:36:04 +08:00

2017-11-29 16:36:04,665 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Failed in 2 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2017-11-29 16:36:04,665 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:04,666 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:36:04 +08:00

2017-11-29 16:36:04,668 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:36:04 +08:00

2017-11-29 16:36:04,669 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
    )  AS [GroupBy1]
2017-11-29 16:36:04,669 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:04,669 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:36:04 +08:00

2017-11-29 16:36:04,670 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Failed in 1 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2017-11-29 16:36:04,670 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:04,671 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:36:04 +08:00

2017-11-29 16:36:04,754 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:36:04 +08:00

2017-11-29 16:36:04,900 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[Email] AS [Email], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_AdminUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2017-11-29 16:36:04,900 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:04,900 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'system' (Type = String, Size = 4000)

2017-11-29 16:36:04,900 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:36:04 +08:00

2017-11-29 16:36:04,901 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:36:04,901 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:04,956 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:36:04 +08:00

2017-11-29 16:36:04,961 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:36:04 +08:00

2017-11-29 16:36:04,963 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[T_AdminUsers] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
    )  AS [GroupBy1]
2017-11-29 16:36:04,964 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:04,964 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'system' (Type = String, Size = 4000)

2017-11-29 16:36:04,964 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:36:04 +08:00

2017-11-29 16:36:04,965 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:36:04,965 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:04,968 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:36:04 +08:00

2017-11-29 16:36:04,968 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:36:04 +08:00

2017-11-29 16:36:04,969 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[Email] AS [Email], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_AdminUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2017-11-29 16:36:04,969 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:04,969 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'system' (Type = String, Size = 4000)

2017-11-29 16:36:04,969 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:36:04 +08:00

2017-11-29 16:36:04,971 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:36:04,971 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:04,971 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:36:04 +08:00

2017-11-29 16:36:05,110 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:36:05 +08:00

2017-11-29 16:36:05,294 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:36:05,294 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:05,294 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:36:05,295 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:36:05 +08:00

2017-11-29 16:36:05,297 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:36:05,297 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:05,332 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:36:05 +08:00

2017-11-29 16:36:05,343 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:36:05 +08:00

2017-11-29 16:36:05,397 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:36:05,397 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:05,397 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:36:05,397 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:36:05 +08:00

2017-11-29 16:36:05,398 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:36:05,398 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:05,401 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:36:05 +08:00

2017-11-29 16:36:05,406 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:36:05 +08:00

2017-11-29 16:36:05,423 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[C1] AS [C1], 
    [Project1].[Id] AS [Id], 
    [Project1].[TestTitle] AS [TestTitle], 
    [Project1].[ExercisesCount] AS [ExercisesCount], 
    [Project1].[CreateDateTime] AS [CreateDateTime], 
    [Project1].[Num] AS [Num]
    FROM ( SELECT 
        [Extent1].[Id] AS [Id], 
        [Extent1].[Num] AS [Num], 
        [Extent1].[TestTitle] AS [TestTitle], 
        [Extent1].[ExercisesCount] AS [ExercisesCount], 
        [Extent1].[CreateDateTime] AS [CreateDateTime], 
        1 AS [C1]
        FROM [dbo].[T_TestPapers] AS [Extent1]
        WHERE 0 = [Extent1].[IsDeleted]
    )  AS [Project1]
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:36:05,424 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:05,424 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:36:05 +08:00

2017-11-29 16:36:05,425 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:36:05,425 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:05,426 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:36:05 +08:00

2017-11-29 16:36:09,608 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:36:09 +08:00

2017-11-29 16:36:09,608 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:36:09,608 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:09,608 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:36:09,608 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:36:09 +08:00

2017-11-29 16:36:09,674 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 65 ms with result: SqlDataReader

2017-11-29 16:36:09,674 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:09,674 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:36:09 +08:00

2017-11-29 16:36:09,674 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:36:09 +08:00

2017-11-29 16:36:09,675 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:36:09,675 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:09,675 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:36:09,675 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:36:09 +08:00

2017-11-29 16:36:09,676 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:36:09,676 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:09,676 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:36:09 +08:00

2017-11-29 16:36:09,680 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:36:09 +08:00

2017-11-29 16:36:09,741 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[C1] AS [C1], 
    [Project1].[Id] AS [Id], 
    [Project1].[Num] AS [Num], 
    [Project1].[Name] AS [Name], 
    [Project1].[Description] AS [Description], 
    [Project1].[ImgUrl] AS [ImgUrl], 
    [Project1].[StatusId] AS [StatusId], 
    [Project1].[WeChatUrl] AS [WeChatUrl], 
    [Project1].[PaperId] AS [PaperId], 
    [Project1].[PrizeName] AS [PrizeName], 
    [Project1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Project1].[VisitCount] AS [VisitCount], 
    [Project1].[ForwardCount] AS [ForwardCount], 
    [Project1].[AnswerCount] AS [AnswerCount], 
    [Project1].[HavePrizeCount] AS [HavePrizeCount], 
    [Project1].[PrizeCount] AS [PrizeCount], 
    [Project1].[StartTime] AS [StartTime], 
    [Project1].[ExamEndTime] AS [ExamEndTime], 
    [Project1].[RewardTime] AS [RewardTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime], 
    [Project1].[Id1] AS [Id1], 
    [Project1].[TypeName] AS [TypeName], 
    [Project1].[Name1] AS [Name1], 
    [Project1].[ImgUrl1] AS [ImgUrl1], 
    [Project1].[IsDeleted1] AS [IsDeleted1], 
    [Project1].[CreateDateTime1] AS [CreateDateTime1], 
    [Project1].[Id2] AS [Id2], 
    [Project1].[Num1] AS [Num1], 
    [Project1].[TestTitle] AS [TestTitle], 
    [Project1].[ExercisesCount] AS [ExercisesCount], 
    [Project1].[IsDeleted2] AS [IsDeleted2], 
    [Project1].[CreateDateTime2] AS [CreateDateTime2]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Num] AS [Num], [Project1].[Name] AS [Name], [Project1].[Description] AS [Description], [Project1].[ImgUrl] AS [ImgUrl], [Project1].[StatusId] AS [StatusId], [Project1].[WeChatUrl] AS [WeChatUrl], [Project1].[PaperId] AS [PaperId], [Project1].[PrizeName] AS [PrizeName], [Project1].[PrizeImgUrl] AS [PrizeImgUrl], [Project1].[VisitCount] AS [VisitCount], [Project1].[ForwardCount] AS [ForwardCount], [Project1].[AnswerCount] AS [AnswerCount], [Project1].[HavePrizeCount] AS [HavePrizeCount], [Project1].[PrizeCount] AS [PrizeCount], [Project1].[StartTime] AS [StartTime], [Project1].[ExamEndTime] AS [ExamEndTime], [Project1].[RewardTime] AS [RewardTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], [Project1].[Id1] AS [Id1], [Project1].[TypeName] AS [TypeName], [Project1].[Name1] AS [Name1], [Project1].[ImgUrl1] AS [ImgUrl1], [Project1].[IsDeleted1] AS [IsDeleted1], [Project1].[CreateDateTime1] AS [CreateDateTime1], [Project1].[Id2] AS [Id2], [Project1].[Num1] AS [Num1], [Project1].[TestTitle] AS [TestTitle], [Project1].[ExercisesCount] AS [ExercisesCount], [Project1].[IsDeleted2] AS [IsDeleted2], [Project1].[CreateDateTime2] AS [CreateDateTime2], [Project1].[C1] AS [C1], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Num] AS [Num], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[ImgUrl] AS [ImgUrl], 
            [Extent1].[StatusId] AS [StatusId], 
            [Extent1].[WeChatUrl] AS [WeChatUrl], 
            [Extent1].[PaperId] AS [PaperId], 
            [Extent1].[PrizeName] AS [PrizeName], 
            [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
            [Extent1].[VisitCount] AS [VisitCount], 
            [Extent1].[ForwardCount] AS [ForwardCount], 
            [Extent1].[AnswerCount] AS [AnswerCount], 
            [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
            [Extent1].[PrizeCount] AS [PrizeCount], 
            [Extent1].[StartTime] AS [StartTime], 
            [Extent1].[ExamEndTime] AS [ExamEndTime], 
            [Extent1].[RewardTime] AS [RewardTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime], 
            [Extent2].[Id] AS [Id1], 
            [Extent2].[TypeName] AS [TypeName], 
            [Extent2].[Name] AS [Name1], 
            [Extent2].[ImgUrl] AS [ImgUrl1], 
            [Extent2].[IsDeleted] AS [IsDeleted1], 
            [Extent2].[CreateDateTime] AS [CreateDateTime1], 
            [Extent3].[Id] AS [Id2], 
            [Extent3].[Num] AS [Num1], 
            [Extent3].[TestTitle] AS [TestTitle], 
            [Extent3].[ExercisesCount] AS [ExercisesCount], 
            [Extent3].[IsDeleted] AS [IsDeleted2], 
            [Extent3].[CreateDateTime] AS [CreateDateTime2], 
            1 AS [C1]
            FROM   [dbo].[T_Activities] AS [Extent1]
            INNER JOIN [dbo].[T_IdNames] AS [Extent2] ON [Extent1].[StatusId] = [Extent2].[Id]
            INNER JOIN [dbo].[T_TestPapers] AS [Extent3] ON [Extent1].[PaperId] = [Extent3].[Id]
            WHERE 0 = [Extent1].[IsDeleted]
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:36:09,741 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:09,741 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:36:09 +08:00

2017-11-29 16:36:09,745 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2017-11-29 16:36:09,745 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:09,775 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:36:09 +08:00

2017-11-29 16:36:09,784 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:36:09 +08:00

2017-11-29 16:36:09,792 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Activities] AS [Extent1]
        WHERE 0 = [Extent1].[IsDeleted]
    )  AS [GroupBy1]
2017-11-29 16:36:09,792 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:09,792 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:36:09 +08:00

2017-11-29 16:36:09,793 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 16:36:09,793 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:09,796 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:36:09 +08:00

2017-11-29 16:36:15,439 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:36:15 +08:00

2017-11-29 16:36:15,440 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:36:15,440 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:15,440 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:36:15,440 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:36:15 +08:00

2017-11-29 16:36:15,442 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:36:15,442 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:15,443 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:36:15 +08:00

2017-11-29 16:36:15,443 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:36:15 +08:00

2017-11-29 16:36:15,443 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:36:15,443 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:15,443 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:36:15,443 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:36:15 +08:00

2017-11-29 16:36:15,444 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:36:15,444 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:15,444 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:36:15 +08:00

2017-11-29 16:36:15,450 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:36:15 +08:00

2017-11-29 16:36:15,466 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:36:15,466 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:15,466 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:36:15,466 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:36:15 +08:00

2017-11-29 16:36:15,468 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:36:15,468 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:15,469 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:36:15 +08:00

2017-11-29 16:36:15,470 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:36:15 +08:00

2017-11-29 16:36:15,488 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:36:15,488 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:15,488 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:36:15,488 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:36:15 +08:00

2017-11-29 16:36:15,489 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:36:15,489 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:15,489 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:36:15 +08:00

2017-11-29 16:36:15,490 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:36:15 +08:00

2017-11-29 16:36:15,513 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:36:15,513 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:15,513 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:36:15,513 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:36:15 +08:00

2017-11-29 16:36:15,515 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:36:15,515 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:36:15,519 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:36:15 +08:00

2017-11-29 16:37:14,389 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:37:14 +08:00

2017-11-29 16:37:14,389 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:37:14,390 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:14,390 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:37:14,390 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:37:14 +08:00

2017-11-29 16:37:14,392 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:37:14,392 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:14,392 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:37:14 +08:00

2017-11-29 16:37:14,393 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:37:14 +08:00

2017-11-29 16:37:14,393 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:37:14,393 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:14,393 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:37:14,393 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:37:14 +08:00

2017-11-29 16:37:14,394 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:37:14,394 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:14,394 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:37:14 +08:00

2017-11-29 16:37:14,395 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:37:14 +08:00

2017-11-29 16:37:14,396 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:37:14,396 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:14,396 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:37:14,396 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:37:14 +08:00

2017-11-29 16:37:14,398 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:37:14,398 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:14,399 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:37:14 +08:00

2017-11-29 16:37:14,399 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:37:14 +08:00

2017-11-29 16:37:14,399 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:37:14,399 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:14,400 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:37:14,400 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:37:14 +08:00

2017-11-29 16:37:14,401 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:37:14,401 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:14,401 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:37:14 +08:00

2017-11-29 16:37:14,401 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:37:14 +08:00

2017-11-29 16:37:14,402 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:37:14,402 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:14,402 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:37:14,402 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:37:14 +08:00

2017-11-29 16:37:14,404 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:37:14,404 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:14,404 [33] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:37:14 +08:00

2017-11-29 16:37:32,989 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:37:32 +08:00

2017-11-29 16:37:32,998 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.T_Activities','dbo.T_TestPapers','dbo.T_IdNames','dbo.T_Users','dbo.T_ActivityImgs','dbo.T_AdminLogs','dbo.T_AdminUsers','dbo.T_Roles','dbo.T_Permissions','dbo.T_Cities','dbo.T_Exercises','dbo.T_Settings','dbo.T_UserActivities','dbo.T_RolePermissions','dbo.T_AdminUserRoles')
    OR t.TABLE_NAME = 'EdmMetadata'
2017-11-29 16:37:32,998 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:32,998 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:37:32 +08:00

2017-11-29 16:37:32,999 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 15

2017-11-29 16:37:32,999 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:33,000 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:37:32 +08:00

2017-11-29 16:37:33,024 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:33,088 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2017-11-29 16:37:33,088 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:33,088 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'Chat.Service.MyDbContext' (Type = String, Size = 4000)

2017-11-29 16:37:33,088 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:33,090 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Failed in 1 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2017-11-29 16:37:33,090 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:33,090 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:33,091 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:33,092 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
    )  AS [GroupBy1]
2017-11-29 16:37:33,092 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:33,092 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:33,093 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Failed in 1 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2017-11-29 16:37:33,093 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:33,093 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:33,112 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:33,153 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[Email] AS [Email], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_AdminUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2017-11-29 16:37:33,153 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:33,153 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'system' (Type = String, Size = 4000)

2017-11-29 16:37:33,153 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:33,155 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:37:33,155 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:33,159 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:33,162 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:33,164 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[T_AdminUsers] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
    )  AS [GroupBy1]
2017-11-29 16:37:33,164 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:33,164 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'system' (Type = String, Size = 4000)

2017-11-29 16:37:33,164 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:33,165 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 16:37:33,165 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:33,169 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:33,169 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:33,169 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[Email] AS [Email], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_AdminUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2017-11-29 16:37:33,169 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:33,169 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'system' (Type = String, Size = 4000)

2017-11-29 16:37:33,169 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:33,171 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:37:33,171 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:33,171 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:33,304 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:33,340 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:37:33,340 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:33,340 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:37:33,340 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:33,342 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:37:33,343 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:33,346 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:33,348 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:33,362 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:37:33,362 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:33,362 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:37:33,362 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:33,363 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:37:33,363 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:33,364 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:33,368 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:33,373 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[C1] AS [C1], 
    [Project1].[Id] AS [Id], 
    [Project1].[TestTitle] AS [TestTitle], 
    [Project1].[ExercisesCount] AS [ExercisesCount], 
    [Project1].[CreateDateTime] AS [CreateDateTime], 
    [Project1].[Num] AS [Num]
    FROM ( SELECT 
        [Extent1].[Id] AS [Id], 
        [Extent1].[Num] AS [Num], 
        [Extent1].[TestTitle] AS [TestTitle], 
        [Extent1].[ExercisesCount] AS [ExercisesCount], 
        [Extent1].[CreateDateTime] AS [CreateDateTime], 
        1 AS [C1]
        FROM [dbo].[T_TestPapers] AS [Extent1]
        WHERE 0 = [Extent1].[IsDeleted]
    )  AS [Project1]
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:37:33,373 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:33,373 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:33,375 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:37:33,375 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:33,375 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:37:33 +08:00

2017-11-29 16:37:36,581 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:37:36 +08:00

2017-11-29 16:37:36,581 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:37:36,582 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:36,582 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:37:36,582 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:37:36 +08:00

2017-11-29 16:37:36,664 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 82 ms with result: SqlDataReader

2017-11-29 16:37:36,664 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:36,665 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:37:36 +08:00

2017-11-29 16:37:36,665 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:37:36 +08:00

2017-11-29 16:37:36,665 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:37:36,665 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:36,665 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:37:36,665 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:37:36 +08:00

2017-11-29 16:37:36,666 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:37:36,666 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:36,666 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:37:36 +08:00

2017-11-29 16:37:36,671 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:37:36 +08:00

2017-11-29 16:37:36,709 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[C1] AS [C1], 
    [Project1].[Id] AS [Id], 
    [Project1].[Num] AS [Num], 
    [Project1].[Name] AS [Name], 
    [Project1].[Description] AS [Description], 
    [Project1].[ImgUrl] AS [ImgUrl], 
    [Project1].[StatusId] AS [StatusId], 
    [Project1].[WeChatUrl] AS [WeChatUrl], 
    [Project1].[PaperId] AS [PaperId], 
    [Project1].[PrizeName] AS [PrizeName], 
    [Project1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Project1].[VisitCount] AS [VisitCount], 
    [Project1].[ForwardCount] AS [ForwardCount], 
    [Project1].[AnswerCount] AS [AnswerCount], 
    [Project1].[HavePrizeCount] AS [HavePrizeCount], 
    [Project1].[PrizeCount] AS [PrizeCount], 
    [Project1].[StartTime] AS [StartTime], 
    [Project1].[ExamEndTime] AS [ExamEndTime], 
    [Project1].[RewardTime] AS [RewardTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime], 
    [Project1].[Id1] AS [Id1], 
    [Project1].[TypeName] AS [TypeName], 
    [Project1].[Name1] AS [Name1], 
    [Project1].[ImgUrl1] AS [ImgUrl1], 
    [Project1].[IsDeleted1] AS [IsDeleted1], 
    [Project1].[CreateDateTime1] AS [CreateDateTime1], 
    [Project1].[Id2] AS [Id2], 
    [Project1].[Num1] AS [Num1], 
    [Project1].[TestTitle] AS [TestTitle], 
    [Project1].[ExercisesCount] AS [ExercisesCount], 
    [Project1].[IsDeleted2] AS [IsDeleted2], 
    [Project1].[CreateDateTime2] AS [CreateDateTime2]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Num] AS [Num], [Project1].[Name] AS [Name], [Project1].[Description] AS [Description], [Project1].[ImgUrl] AS [ImgUrl], [Project1].[StatusId] AS [StatusId], [Project1].[WeChatUrl] AS [WeChatUrl], [Project1].[PaperId] AS [PaperId], [Project1].[PrizeName] AS [PrizeName], [Project1].[PrizeImgUrl] AS [PrizeImgUrl], [Project1].[VisitCount] AS [VisitCount], [Project1].[ForwardCount] AS [ForwardCount], [Project1].[AnswerCount] AS [AnswerCount], [Project1].[HavePrizeCount] AS [HavePrizeCount], [Project1].[PrizeCount] AS [PrizeCount], [Project1].[StartTime] AS [StartTime], [Project1].[ExamEndTime] AS [ExamEndTime], [Project1].[RewardTime] AS [RewardTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], [Project1].[Id1] AS [Id1], [Project1].[TypeName] AS [TypeName], [Project1].[Name1] AS [Name1], [Project1].[ImgUrl1] AS [ImgUrl1], [Project1].[IsDeleted1] AS [IsDeleted1], [Project1].[CreateDateTime1] AS [CreateDateTime1], [Project1].[Id2] AS [Id2], [Project1].[Num1] AS [Num1], [Project1].[TestTitle] AS [TestTitle], [Project1].[ExercisesCount] AS [ExercisesCount], [Project1].[IsDeleted2] AS [IsDeleted2], [Project1].[CreateDateTime2] AS [CreateDateTime2], [Project1].[C1] AS [C1], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Num] AS [Num], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[ImgUrl] AS [ImgUrl], 
            [Extent1].[StatusId] AS [StatusId], 
            [Extent1].[WeChatUrl] AS [WeChatUrl], 
            [Extent1].[PaperId] AS [PaperId], 
            [Extent1].[PrizeName] AS [PrizeName], 
            [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
            [Extent1].[VisitCount] AS [VisitCount], 
            [Extent1].[ForwardCount] AS [ForwardCount], 
            [Extent1].[AnswerCount] AS [AnswerCount], 
            [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
            [Extent1].[PrizeCount] AS [PrizeCount], 
            [Extent1].[StartTime] AS [StartTime], 
            [Extent1].[ExamEndTime] AS [ExamEndTime], 
            [Extent1].[RewardTime] AS [RewardTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime], 
            [Extent2].[Id] AS [Id1], 
            [Extent2].[TypeName] AS [TypeName], 
            [Extent2].[Name] AS [Name1], 
            [Extent2].[ImgUrl] AS [ImgUrl1], 
            [Extent2].[IsDeleted] AS [IsDeleted1], 
            [Extent2].[CreateDateTime] AS [CreateDateTime1], 
            [Extent3].[Id] AS [Id2], 
            [Extent3].[Num] AS [Num1], 
            [Extent3].[TestTitle] AS [TestTitle], 
            [Extent3].[ExercisesCount] AS [ExercisesCount], 
            [Extent3].[IsDeleted] AS [IsDeleted2], 
            [Extent3].[CreateDateTime] AS [CreateDateTime2], 
            1 AS [C1]
            FROM   [dbo].[T_Activities] AS [Extent1]
            INNER JOIN [dbo].[T_IdNames] AS [Extent2] ON [Extent1].[StatusId] = [Extent2].[Id]
            INNER JOIN [dbo].[T_TestPapers] AS [Extent3] ON [Extent1].[PaperId] = [Extent3].[Id]
            WHERE 0 = [Extent1].[IsDeleted]
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:37:36,709 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:36,709 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:37:36 +08:00

2017-11-29 16:37:36,713 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2017-11-29 16:37:36,713 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:36,724 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:37:36 +08:00

2017-11-29 16:37:36,732 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:37:36 +08:00

2017-11-29 16:37:36,740 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Activities] AS [Extent1]
        WHERE 0 = [Extent1].[IsDeleted]
    )  AS [GroupBy1]
2017-11-29 16:37:36,740 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:36,740 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:37:36 +08:00

2017-11-29 16:37:36,741 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 16:37:36,741 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:36,745 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:37:36 +08:00

2017-11-29 16:37:40,103 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:37:40 +08:00

2017-11-29 16:37:40,103 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:37:40,103 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:40,103 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:37:40,103 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:37:40 +08:00

2017-11-29 16:37:40,106 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:37:40,106 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:40,106 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:37:40 +08:00

2017-11-29 16:37:40,107 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:37:40 +08:00

2017-11-29 16:37:40,107 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:37:40,107 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:40,107 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:37:40,107 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:37:40 +08:00

2017-11-29 16:37:40,108 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:37:40,108 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:40,108 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:37:40 +08:00

2017-11-29 16:37:40,114 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:37:40 +08:00

2017-11-29 16:37:40,130 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:37:40,131 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:40,131 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:37:40,131 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:37:40 +08:00

2017-11-29 16:37:40,133 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:37:40,133 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:40,133 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:37:40 +08:00

2017-11-29 16:37:40,135 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:37:40 +08:00

2017-11-29 16:37:40,139 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:37:40,139 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:40,139 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:37:40,139 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:37:40 +08:00

2017-11-29 16:37:40,142 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2017-11-29 16:37:40,142 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:40,142 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:37:40 +08:00

2017-11-29 16:37:40,143 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:37:40 +08:00

2017-11-29 16:37:40,166 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:37:40,166 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:40,166 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:37:40,166 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:37:40 +08:00

2017-11-29 16:37:40,169 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:37:40,169 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:37:40,172 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:37:40 +08:00

2017-11-29 16:39:24,427 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:24 +08:00

2017-11-29 16:39:24,437 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.T_Activities','dbo.T_TestPapers','dbo.T_IdNames','dbo.T_Users','dbo.T_ActivityImgs','dbo.T_AdminLogs','dbo.T_AdminUsers','dbo.T_Roles','dbo.T_Permissions','dbo.T_Cities','dbo.T_Exercises','dbo.T_Settings','dbo.T_UserActivities','dbo.T_RolePermissions','dbo.T_AdminUserRoles')
    OR t.TABLE_NAME = 'EdmMetadata'
2017-11-29 16:39:24,437 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:24,437 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:24 +08:00

2017-11-29 16:39:24,440 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 15

2017-11-29 16:39:24,440 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:24,440 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:24 +08:00

2017-11-29 16:39:24,526 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:24 +08:00

2017-11-29 16:39:25,310 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2017-11-29 16:39:25,310 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:25,311 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'Chat.Service.MyDbContext' (Type = String, Size = 4000)

2017-11-29 16:39:25,311 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:25 +08:00

2017-11-29 16:39:25,314 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Failed in 2 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2017-11-29 16:39:25,314 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:25,315 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:25 +08:00

2017-11-29 16:39:25,316 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:25 +08:00

2017-11-29 16:39:25,317 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
    )  AS [GroupBy1]
2017-11-29 16:39:25,317 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:25,317 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:25 +08:00

2017-11-29 16:39:25,319 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Failed in 1 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2017-11-29 16:39:25,319 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:25,319 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:25 +08:00

2017-11-29 16:39:25,401 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:25 +08:00

2017-11-29 16:39:25,514 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[Email] AS [Email], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_AdminUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2017-11-29 16:39:25,514 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:25,514 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'system' (Type = String, Size = 4000)

2017-11-29 16:39:25,514 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:25 +08:00

2017-11-29 16:39:25,515 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:39:25,515 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:25,571 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:25 +08:00

2017-11-29 16:39:25,575 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:25 +08:00

2017-11-29 16:39:25,577 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[T_AdminUsers] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
    )  AS [GroupBy1]
2017-11-29 16:39:25,577 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:25,577 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'system' (Type = String, Size = 4000)

2017-11-29 16:39:25,577 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:25 +08:00

2017-11-29 16:39:25,578 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 16:39:25,578 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:25,582 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:25 +08:00

2017-11-29 16:39:25,582 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:25 +08:00

2017-11-29 16:39:25,583 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[Email] AS [Email], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_AdminUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2017-11-29 16:39:25,583 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:25,583 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'system' (Type = String, Size = 4000)

2017-11-29 16:39:25,583 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:25 +08:00

2017-11-29 16:39:25,584 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:39:25,584 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:25,585 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:25 +08:00

2017-11-29 16:39:25,721 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:25 +08:00

2017-11-29 16:39:25,892 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:39:25,892 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:25,892 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:39:25,892 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:25 +08:00

2017-11-29 16:39:25,895 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:25,895 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:25,929 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:25 +08:00

2017-11-29 16:39:25,939 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:25 +08:00

2017-11-29 16:39:25,992 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:39:25,993 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:25,993 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:39:25,993 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:25 +08:00

2017-11-29 16:39:25,994 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:39:25,994 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:25,996 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:25 +08:00

2017-11-29 16:39:26,002 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:26 +08:00

2017-11-29 16:39:26,019 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[C1] AS [C1], 
    [Project1].[Id] AS [Id], 
    [Project1].[TestTitle] AS [TestTitle], 
    [Project1].[ExercisesCount] AS [ExercisesCount], 
    [Project1].[CreateDateTime] AS [CreateDateTime], 
    [Project1].[Num] AS [Num]
    FROM ( SELECT 
        [Extent1].[Id] AS [Id], 
        [Extent1].[Num] AS [Num], 
        [Extent1].[TestTitle] AS [TestTitle], 
        [Extent1].[ExercisesCount] AS [ExercisesCount], 
        [Extent1].[CreateDateTime] AS [CreateDateTime], 
        1 AS [C1]
        FROM [dbo].[T_TestPapers] AS [Extent1]
        WHERE 0 = [Extent1].[IsDeleted]
    )  AS [Project1]
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:39:26,019 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:26,019 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:26 +08:00

2017-11-29 16:39:26,021 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:39:26,021 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:26,021 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:26 +08:00

2017-11-29 16:39:33,947 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:33 +08:00

2017-11-29 16:39:33,947 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:39:33,948 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:33,948 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:39:33,948 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:33 +08:00

2017-11-29 16:39:33,950 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:33,950 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:33,951 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:33 +08:00

2017-11-29 16:39:33,951 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:33 +08:00

2017-11-29 16:39:33,951 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:39:33,951 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:33,951 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:39:33,951 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:33 +08:00

2017-11-29 16:39:33,952 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:39:33,952 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:33,953 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:33 +08:00

2017-11-29 16:39:33,957 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:33 +08:00

2017-11-29 16:39:34,014 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[C1] AS [C1], 
    [Project1].[Id] AS [Id], 
    [Project1].[Num] AS [Num], 
    [Project1].[Name] AS [Name], 
    [Project1].[Description] AS [Description], 
    [Project1].[ImgUrl] AS [ImgUrl], 
    [Project1].[StatusId] AS [StatusId], 
    [Project1].[WeChatUrl] AS [WeChatUrl], 
    [Project1].[PaperId] AS [PaperId], 
    [Project1].[PrizeName] AS [PrizeName], 
    [Project1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Project1].[VisitCount] AS [VisitCount], 
    [Project1].[ForwardCount] AS [ForwardCount], 
    [Project1].[AnswerCount] AS [AnswerCount], 
    [Project1].[HavePrizeCount] AS [HavePrizeCount], 
    [Project1].[PrizeCount] AS [PrizeCount], 
    [Project1].[StartTime] AS [StartTime], 
    [Project1].[ExamEndTime] AS [ExamEndTime], 
    [Project1].[RewardTime] AS [RewardTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime], 
    [Project1].[Id1] AS [Id1], 
    [Project1].[TypeName] AS [TypeName], 
    [Project1].[Name1] AS [Name1], 
    [Project1].[ImgUrl1] AS [ImgUrl1], 
    [Project1].[IsDeleted1] AS [IsDeleted1], 
    [Project1].[CreateDateTime1] AS [CreateDateTime1], 
    [Project1].[Id2] AS [Id2], 
    [Project1].[Num1] AS [Num1], 
    [Project1].[TestTitle] AS [TestTitle], 
    [Project1].[ExercisesCount] AS [ExercisesCount], 
    [Project1].[IsDeleted2] AS [IsDeleted2], 
    [Project1].[CreateDateTime2] AS [CreateDateTime2]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Num] AS [Num], [Project1].[Name] AS [Name], [Project1].[Description] AS [Description], [Project1].[ImgUrl] AS [ImgUrl], [Project1].[StatusId] AS [StatusId], [Project1].[WeChatUrl] AS [WeChatUrl], [Project1].[PaperId] AS [PaperId], [Project1].[PrizeName] AS [PrizeName], [Project1].[PrizeImgUrl] AS [PrizeImgUrl], [Project1].[VisitCount] AS [VisitCount], [Project1].[ForwardCount] AS [ForwardCount], [Project1].[AnswerCount] AS [AnswerCount], [Project1].[HavePrizeCount] AS [HavePrizeCount], [Project1].[PrizeCount] AS [PrizeCount], [Project1].[StartTime] AS [StartTime], [Project1].[ExamEndTime] AS [ExamEndTime], [Project1].[RewardTime] AS [RewardTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], [Project1].[Id1] AS [Id1], [Project1].[TypeName] AS [TypeName], [Project1].[Name1] AS [Name1], [Project1].[ImgUrl1] AS [ImgUrl1], [Project1].[IsDeleted1] AS [IsDeleted1], [Project1].[CreateDateTime1] AS [CreateDateTime1], [Project1].[Id2] AS [Id2], [Project1].[Num1] AS [Num1], [Project1].[TestTitle] AS [TestTitle], [Project1].[ExercisesCount] AS [ExercisesCount], [Project1].[IsDeleted2] AS [IsDeleted2], [Project1].[CreateDateTime2] AS [CreateDateTime2], [Project1].[C1] AS [C1], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Num] AS [Num], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[ImgUrl] AS [ImgUrl], 
            [Extent1].[StatusId] AS [StatusId], 
            [Extent1].[WeChatUrl] AS [WeChatUrl], 
            [Extent1].[PaperId] AS [PaperId], 
            [Extent1].[PrizeName] AS [PrizeName], 
            [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
            [Extent1].[VisitCount] AS [VisitCount], 
            [Extent1].[ForwardCount] AS [ForwardCount], 
            [Extent1].[AnswerCount] AS [AnswerCount], 
            [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
            [Extent1].[PrizeCount] AS [PrizeCount], 
            [Extent1].[StartTime] AS [StartTime], 
            [Extent1].[ExamEndTime] AS [ExamEndTime], 
            [Extent1].[RewardTime] AS [RewardTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime], 
            [Extent2].[Id] AS [Id1], 
            [Extent2].[TypeName] AS [TypeName], 
            [Extent2].[Name] AS [Name1], 
            [Extent2].[ImgUrl] AS [ImgUrl1], 
            [Extent2].[IsDeleted] AS [IsDeleted1], 
            [Extent2].[CreateDateTime] AS [CreateDateTime1], 
            [Extent3].[Id] AS [Id2], 
            [Extent3].[Num] AS [Num1], 
            [Extent3].[TestTitle] AS [TestTitle], 
            [Extent3].[ExercisesCount] AS [ExercisesCount], 
            [Extent3].[IsDeleted] AS [IsDeleted2], 
            [Extent3].[CreateDateTime] AS [CreateDateTime2], 
            1 AS [C1]
            FROM   [dbo].[T_Activities] AS [Extent1]
            INNER JOIN [dbo].[T_IdNames] AS [Extent2] ON [Extent1].[StatusId] = [Extent2].[Id]
            INNER JOIN [dbo].[T_TestPapers] AS [Extent3] ON [Extent1].[PaperId] = [Extent3].[Id]
            WHERE 0 = [Extent1].[IsDeleted]
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:39:34,014 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:34,014 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:34 +08:00

2017-11-29 16:39:34,018 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2017-11-29 16:39:34,018 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:34,048 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:34 +08:00

2017-11-29 16:39:34,055 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:34 +08:00

2017-11-29 16:39:34,064 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Activities] AS [Extent1]
        WHERE 0 = [Extent1].[IsDeleted]
    )  AS [GroupBy1]
2017-11-29 16:39:34,064 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:34,064 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:34 +08:00

2017-11-29 16:39:34,065 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 16:39:34,065 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:34,068 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:34 +08:00

2017-11-29 16:39:39,140 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:39 +08:00

2017-11-29 16:39:39,141 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:39:39,141 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:39,141 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:39:39,141 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:39 +08:00

2017-11-29 16:39:39,143 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:39,143 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:39,144 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:39 +08:00

2017-11-29 16:39:39,144 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:39 +08:00

2017-11-29 16:39:39,145 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:39:39,145 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:39,145 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:39:39,145 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:39 +08:00

2017-11-29 16:39:39,146 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:39:39,146 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:39,146 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:39 +08:00

2017-11-29 16:39:39,152 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:39 +08:00

2017-11-29 16:39:39,168 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:39:39,169 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:39,169 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:39,169 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:39 +08:00

2017-11-29 16:39:39,171 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:39,171 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:39,172 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:39 +08:00

2017-11-29 16:39:39,173 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:39 +08:00

2017-11-29 16:39:39,191 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:39:39,191 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:39,191 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:39,191 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:39 +08:00

2017-11-29 16:39:39,193 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:39:39,193 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:39,193 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:39 +08:00

2017-11-29 16:39:39,193 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:39 +08:00

2017-11-29 16:39:39,228 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:39:39,228 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:39,228 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:39,228 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:39 +08:00

2017-11-29 16:39:39,231 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:39,231 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:39,235 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:39 +08:00

2017-11-29 16:39:48,298 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:48 +08:00

2017-11-29 16:39:48,298 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:39:48,298 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:48,298 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:39:48,298 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:48 +08:00

2017-11-29 16:39:48,301 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:48,301 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:48,301 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:48 +08:00

2017-11-29 16:39:48,301 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:48 +08:00

2017-11-29 16:39:48,301 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:39:48,302 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:48,302 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:39:48,302 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:48 +08:00

2017-11-29 16:39:48,303 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:39:48,303 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:48,303 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:48 +08:00

2017-11-29 16:39:48,307 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:48 +08:00

2017-11-29 16:39:48,308 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:39:48,308 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:48,308 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:48,308 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:48 +08:00

2017-11-29 16:39:48,310 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:48,310 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:48,311 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:48 +08:00

2017-11-29 16:39:48,311 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:48 +08:00

2017-11-29 16:39:48,311 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:39:48,311 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:48,311 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:48,311 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:48 +08:00

2017-11-29 16:39:48,312 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 16:39:48,312 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:48,312 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:48 +08:00

2017-11-29 16:39:48,313 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:48 +08:00

2017-11-29 16:39:48,339 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:39:48,339 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:48,339 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:48,339 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:48 +08:00

2017-11-29 16:39:48,342 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:48,342 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:48,342 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:48 +08:00

2017-11-29 16:39:49,451 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:49 +08:00

2017-11-29 16:39:49,451 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:39:49,451 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:49,451 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:39:49,451 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:49 +08:00

2017-11-29 16:39:49,454 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:49,454 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:49,454 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:49 +08:00

2017-11-29 16:39:49,454 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:49 +08:00

2017-11-29 16:39:49,455 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:39:49,455 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:49,455 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:39:49,455 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:49 +08:00

2017-11-29 16:39:49,456 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:39:49,456 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:49,456 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:49 +08:00

2017-11-29 16:39:49,456 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:49 +08:00

2017-11-29 16:39:49,457 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:39:49,457 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:49,457 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:49,457 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:49 +08:00

2017-11-29 16:39:49,459 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:49,459 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:49,460 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:49 +08:00

2017-11-29 16:39:49,460 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:49 +08:00

2017-11-29 16:39:49,460 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:39:49,460 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:49,460 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:49,460 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:49 +08:00

2017-11-29 16:39:49,461 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:39:49,461 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:49,462 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:49 +08:00

2017-11-29 16:39:49,462 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:49 +08:00

2017-11-29 16:39:49,466 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:39:49,466 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:49,466 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:49,466 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:49 +08:00

2017-11-29 16:39:49,469 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:49,469 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:49,469 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:49 +08:00

2017-11-29 16:39:50,521 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:50 +08:00

2017-11-29 16:39:50,522 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:39:50,522 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:50,522 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:39:50,522 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:50 +08:00

2017-11-29 16:39:50,526 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2017-11-29 16:39:50,526 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:50,526 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:50 +08:00

2017-11-29 16:39:50,526 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:50 +08:00

2017-11-29 16:39:50,526 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:39:50,526 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:50,526 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:39:50,526 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:50 +08:00

2017-11-29 16:39:50,528 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:39:50,528 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:50,528 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:50 +08:00

2017-11-29 16:39:50,529 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:50 +08:00

2017-11-29 16:39:50,529 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:39:50,529 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:50,529 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:50,529 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:50 +08:00

2017-11-29 16:39:50,532 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:50,532 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:50,532 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:50 +08:00

2017-11-29 16:39:50,532 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:50 +08:00

2017-11-29 16:39:50,533 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:39:50,533 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:50,533 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:50,533 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:50 +08:00

2017-11-29 16:39:50,534 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:39:50,534 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:50,535 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:50 +08:00

2017-11-29 16:39:50,535 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:50 +08:00

2017-11-29 16:39:50,535 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:39:50,535 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:50,535 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:50,535 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:50 +08:00

2017-11-29 16:39:50,538 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:50,538 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:50,538 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:50 +08:00

2017-11-29 16:39:51,245 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:51 +08:00

2017-11-29 16:39:51,246 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:39:51,246 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:51,246 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:39:51,246 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:51 +08:00

2017-11-29 16:39:51,249 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:51,249 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:51,249 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:51 +08:00

2017-11-29 16:39:51,249 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:51 +08:00

2017-11-29 16:39:51,249 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:39:51,249 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:51,249 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:39:51,249 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:51 +08:00

2017-11-29 16:39:51,250 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:39:51,250 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:51,250 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:51 +08:00

2017-11-29 16:39:51,251 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:51 +08:00

2017-11-29 16:39:51,251 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:39:51,251 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:51,251 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:51,251 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:51 +08:00

2017-11-29 16:39:51,254 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:51,254 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:51,254 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:51 +08:00

2017-11-29 16:39:51,254 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:51 +08:00

2017-11-29 16:39:51,255 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:39:51,255 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:51,255 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:51,255 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:51 +08:00

2017-11-29 16:39:51,256 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:39:51,256 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:51,256 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:51 +08:00

2017-11-29 16:39:51,256 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:51 +08:00

2017-11-29 16:39:51,256 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:39:51,256 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:51,257 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:51,257 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:51 +08:00

2017-11-29 16:39:51,259 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:51,259 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:51,260 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:51 +08:00

2017-11-29 16:39:52,361 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:52 +08:00

2017-11-29 16:39:52,362 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:39:52,362 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:52,362 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:39:52,362 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:52 +08:00

2017-11-29 16:39:52,365 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:52,365 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:52,365 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:52 +08:00

2017-11-29 16:39:52,365 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:52 +08:00

2017-11-29 16:39:52,365 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:39:52,365 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:52,365 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:39:52,365 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:52 +08:00

2017-11-29 16:39:52,366 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:39:52,366 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:52,366 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:52 +08:00

2017-11-29 16:39:52,367 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:52 +08:00

2017-11-29 16:39:52,367 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:39:52,367 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:52,367 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:52,367 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:52 +08:00

2017-11-29 16:39:52,370 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:52,370 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:52,370 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:52 +08:00

2017-11-29 16:39:52,370 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:52 +08:00

2017-11-29 16:39:52,371 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:39:52,371 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:52,371 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:52,371 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:52 +08:00

2017-11-29 16:39:52,372 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:39:52,372 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:52,372 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:52 +08:00

2017-11-29 16:39:52,372 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:52 +08:00

2017-11-29 16:39:52,373 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:39:52,373 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:52,373 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:52,373 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:52 +08:00

2017-11-29 16:39:52,376 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:52,376 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:52,376 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:52 +08:00

2017-11-29 16:39:53,473 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:53 +08:00

2017-11-29 16:39:53,474 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:39:53,474 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:53,474 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:39:53,474 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:53 +08:00

2017-11-29 16:39:53,476 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:53,476 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:53,477 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:53 +08:00

2017-11-29 16:39:53,477 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:53 +08:00

2017-11-29 16:39:53,477 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:39:53,477 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:53,477 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:39:53,477 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:53 +08:00

2017-11-29 16:39:53,478 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:39:53,478 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:53,478 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:53 +08:00

2017-11-29 16:39:53,479 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:53 +08:00

2017-11-29 16:39:53,479 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:39:53,479 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:53,479 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:53,479 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:53 +08:00

2017-11-29 16:39:53,482 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:53,482 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:53,482 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:53 +08:00

2017-11-29 16:39:53,482 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:53 +08:00

2017-11-29 16:39:53,482 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:39:53,483 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:53,483 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:53,483 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:53 +08:00

2017-11-29 16:39:53,484 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:39:53,484 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:53,484 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:53 +08:00

2017-11-29 16:39:53,484 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:53 +08:00

2017-11-29 16:39:53,484 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:39:53,484 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:53,484 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:53,484 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:53 +08:00

2017-11-29 16:39:53,487 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:53,487 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:53,487 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:53 +08:00

2017-11-29 16:39:57,801 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:57 +08:00

2017-11-29 16:39:57,801 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:39:57,801 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:57,801 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:39:57,801 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:57 +08:00

2017-11-29 16:39:57,804 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:57,804 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:57,804 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:57 +08:00

2017-11-29 16:39:57,804 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:57 +08:00

2017-11-29 16:39:57,804 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:39:57,804 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:57,804 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:39:57,804 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:57 +08:00

2017-11-29 16:39:57,805 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:39:57,805 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:57,805 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:57 +08:00

2017-11-29 16:39:57,806 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:57 +08:00

2017-11-29 16:39:57,806 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:39:57,806 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:57,806 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:57,806 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:57 +08:00

2017-11-29 16:39:57,809 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:57,809 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:57,809 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:57 +08:00

2017-11-29 16:39:57,809 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:57 +08:00

2017-11-29 16:39:57,810 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:39:57,810 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:57,810 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:57,810 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:57 +08:00

2017-11-29 16:39:57,811 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:39:57,811 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:57,811 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:57 +08:00

2017-11-29 16:39:57,811 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:57 +08:00

2017-11-29 16:39:57,812 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:39:57,812 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:57,812 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:57,812 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:57 +08:00

2017-11-29 16:39:57,814 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:57,814 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:57,815 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:57 +08:00

2017-11-29 16:39:58,966 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:58 +08:00

2017-11-29 16:39:58,966 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:39:58,966 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:58,966 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:39:58,966 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:58 +08:00

2017-11-29 16:39:58,969 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:58,969 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:58,969 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:58 +08:00

2017-11-29 16:39:58,969 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:58 +08:00

2017-11-29 16:39:58,969 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:39:58,969 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:58,969 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:39:58,970 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:58 +08:00

2017-11-29 16:39:58,971 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:39:58,971 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:58,971 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:58 +08:00

2017-11-29 16:39:58,971 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:58 +08:00

2017-11-29 16:39:58,972 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:39:58,972 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:58,972 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:58,972 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:58 +08:00

2017-11-29 16:39:58,974 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:58,974 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:58,975 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:58 +08:00

2017-11-29 16:39:58,975 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:58 +08:00

2017-11-29 16:39:58,975 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:39:58,975 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:58,975 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:58,975 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:58 +08:00

2017-11-29 16:39:58,977 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:39:58,977 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:58,977 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:58 +08:00

2017-11-29 16:39:58,977 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:39:58 +08:00

2017-11-29 16:39:58,977 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:39:58,977 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:58,977 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:39:58,977 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:39:58 +08:00

2017-11-29 16:39:58,980 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:39:58,980 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:39:58,980 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:39:58 +08:00

2017-11-29 16:40:13,730 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:13 +08:00

2017-11-29 16:40:13,730 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:40:13,730 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:13,730 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:13,730 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:13 +08:00

2017-11-29 16:40:13,733 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:13,733 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:13,733 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:13 +08:00

2017-11-29 16:40:13,734 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:13 +08:00

2017-11-29 16:40:13,734 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:40:13,734 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:13,734 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:13,734 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:13 +08:00

2017-11-29 16:40:13,736 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:13,736 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:13,736 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:13 +08:00

2017-11-29 16:40:13,737 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:13 +08:00

2017-11-29 16:40:13,737 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:40:13,737 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:13,737 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:13,737 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:13 +08:00

2017-11-29 16:40:13,740 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:13,740 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:13,740 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:13 +08:00

2017-11-29 16:40:13,740 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:13 +08:00

2017-11-29 16:40:13,741 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:40:13,741 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:13,741 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:13,741 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:13 +08:00

2017-11-29 16:40:13,742 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:13,742 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:13,742 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:13 +08:00

2017-11-29 16:40:13,742 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:13 +08:00

2017-11-29 16:40:13,742 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:40:13,742 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:13,742 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:13,742 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:13 +08:00

2017-11-29 16:40:13,745 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:13,745 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:13,745 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:13 +08:00

2017-11-29 16:40:14,471 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:14 +08:00

2017-11-29 16:40:14,471 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:40:14,471 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:14,471 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:14,471 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:14 +08:00

2017-11-29 16:40:14,474 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:14,474 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:14,474 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:14 +08:00

2017-11-29 16:40:14,474 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:14 +08:00

2017-11-29 16:40:14,474 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:40:14,474 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:14,474 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:14,474 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:14 +08:00

2017-11-29 16:40:14,475 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:14,475 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:14,476 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:14 +08:00

2017-11-29 16:40:14,476 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:14 +08:00

2017-11-29 16:40:14,476 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:40:14,476 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:14,476 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:14,476 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:14 +08:00

2017-11-29 16:40:14,479 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:14,479 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:14,479 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:14 +08:00

2017-11-29 16:40:14,480 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:14 +08:00

2017-11-29 16:40:14,480 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:40:14,480 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:14,480 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:14,480 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:14 +08:00

2017-11-29 16:40:14,481 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:14,481 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:14,481 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:14 +08:00

2017-11-29 16:40:14,481 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:14 +08:00

2017-11-29 16:40:14,482 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:40:14,482 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:14,482 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:14,482 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:14 +08:00

2017-11-29 16:40:14,485 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:14,485 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:14,485 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:14 +08:00

2017-11-29 16:40:20,724 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:20 +08:00

2017-11-29 16:40:20,724 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:40:20,724 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:20,724 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:20,724 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:20 +08:00

2017-11-29 16:40:20,727 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:20,727 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:20,727 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:20 +08:00

2017-11-29 16:40:20,727 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:20 +08:00

2017-11-29 16:40:20,727 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:40:20,727 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:20,727 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:20,727 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:20 +08:00

2017-11-29 16:40:20,728 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:20,729 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:20,729 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:20 +08:00

2017-11-29 16:40:20,729 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:20 +08:00

2017-11-29 16:40:20,730 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:40:20,730 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:20,730 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:20,730 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:20 +08:00

2017-11-29 16:40:20,732 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:20,732 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:20,733 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:20 +08:00

2017-11-29 16:40:20,733 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:20 +08:00

2017-11-29 16:40:20,733 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:40:20,733 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:20,733 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:20,733 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:20 +08:00

2017-11-29 16:40:20,735 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:20,735 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:20,735 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:20 +08:00

2017-11-29 16:40:20,735 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:20 +08:00

2017-11-29 16:40:20,735 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:40:20,735 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:20,736 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:20,736 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:20 +08:00

2017-11-29 16:40:20,738 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:20,739 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:20,739 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:20 +08:00

2017-11-29 16:40:22,662 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:22 +08:00

2017-11-29 16:40:22,662 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:40:22,662 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:22,662 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:22,662 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:22 +08:00

2017-11-29 16:40:22,665 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:22,665 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:22,665 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:22 +08:00

2017-11-29 16:40:22,665 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:22 +08:00

2017-11-29 16:40:22,665 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:40:22,665 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:22,665 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:22,665 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:22 +08:00

2017-11-29 16:40:22,667 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:22,667 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:22,667 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:22 +08:00

2017-11-29 16:40:22,667 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:22 +08:00

2017-11-29 16:40:22,668 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:40:22,668 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:22,668 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:22,668 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:22 +08:00

2017-11-29 16:40:22,670 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:22,670 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:22,670 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:22 +08:00

2017-11-29 16:40:22,671 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:22 +08:00

2017-11-29 16:40:22,671 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:40:22,671 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:22,671 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:22,671 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:22 +08:00

2017-11-29 16:40:22,672 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:22,672 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:22,672 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:22 +08:00

2017-11-29 16:40:22,672 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:22 +08:00

2017-11-29 16:40:22,673 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:40:22,673 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:22,673 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:22,673 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:22 +08:00

2017-11-29 16:40:22,676 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:22,676 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:22,676 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:22 +08:00

2017-11-29 16:40:24,306 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:24 +08:00

2017-11-29 16:40:24,306 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:40:24,306 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:24,306 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:24,306 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:24 +08:00

2017-11-29 16:40:24,309 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:24,309 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:24,309 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:24 +08:00

2017-11-29 16:40:24,309 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:24 +08:00

2017-11-29 16:40:24,309 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:40:24,310 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:24,310 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:24,310 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:24 +08:00

2017-11-29 16:40:24,311 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:24,311 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:24,311 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:24 +08:00

2017-11-29 16:40:24,312 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:24 +08:00

2017-11-29 16:40:24,312 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:40:24,312 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:24,312 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:24,312 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:24 +08:00

2017-11-29 16:40:24,315 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:24,315 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:24,315 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:24 +08:00

2017-11-29 16:40:24,315 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:24 +08:00

2017-11-29 16:40:24,315 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:40:24,315 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:24,315 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:24,315 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:24 +08:00

2017-11-29 16:40:24,317 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:24,317 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:24,317 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:24 +08:00

2017-11-29 16:40:24,317 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:24 +08:00

2017-11-29 16:40:24,318 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:40:24,318 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:24,318 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:24,318 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:24 +08:00

2017-11-29 16:40:24,320 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:24,320 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:24,321 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:24 +08:00

2017-11-29 16:40:32,359 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:32 +08:00

2017-11-29 16:40:32,360 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:40:32,360 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:32,360 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:32,360 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:32 +08:00

2017-11-29 16:40:32,363 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:32,363 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:32,363 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:32 +08:00

2017-11-29 16:40:32,363 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:32 +08:00

2017-11-29 16:40:32,363 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:40:32,363 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:32,363 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:32,363 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:32 +08:00

2017-11-29 16:40:32,364 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:32,364 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:32,364 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:32 +08:00

2017-11-29 16:40:32,365 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:32 +08:00

2017-11-29 16:40:32,365 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:40:32,365 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:32,365 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:32,365 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:32 +08:00

2017-11-29 16:40:32,368 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:32,368 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:32,368 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:32 +08:00

2017-11-29 16:40:32,368 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:32 +08:00

2017-11-29 16:40:32,369 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:40:32,369 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:32,369 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:32,369 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:32 +08:00

2017-11-29 16:40:32,370 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:32,370 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:32,370 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:32 +08:00

2017-11-29 16:40:32,370 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:32 +08:00

2017-11-29 16:40:32,371 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:40:32,371 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:32,371 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:32,371 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:32 +08:00

2017-11-29 16:40:32,374 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:32,374 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:32,374 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:32 +08:00

2017-11-29 16:40:33,549 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:33 +08:00

2017-11-29 16:40:33,549 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:40:33,549 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:33,549 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:33,549 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:33 +08:00

2017-11-29 16:40:33,552 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:33,552 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:33,552 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:33 +08:00

2017-11-29 16:40:33,552 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:33 +08:00

2017-11-29 16:40:33,552 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:40:33,552 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:33,552 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:33,552 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:33 +08:00

2017-11-29 16:40:33,553 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:33,553 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:33,554 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:33 +08:00

2017-11-29 16:40:33,554 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:33 +08:00

2017-11-29 16:40:33,554 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:40:33,554 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:33,554 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:33,554 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:33 +08:00

2017-11-29 16:40:33,557 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:33,557 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:33,557 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:33 +08:00

2017-11-29 16:40:33,558 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:33 +08:00

2017-11-29 16:40:33,558 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:40:33,558 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:33,558 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:33,558 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:33 +08:00

2017-11-29 16:40:33,559 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 16:40:33,559 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:33,559 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:33 +08:00

2017-11-29 16:40:33,559 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:33 +08:00

2017-11-29 16:40:33,560 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:40:33,560 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:33,560 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:33,560 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:33 +08:00

2017-11-29 16:40:33,562 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:33,562 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:33,563 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:33 +08:00

2017-11-29 16:40:35,209 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:35 +08:00

2017-11-29 16:40:35,210 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:40:35,210 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:35,210 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:35,210 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:35 +08:00

2017-11-29 16:40:35,213 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2017-11-29 16:40:35,213 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:35,214 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:35 +08:00

2017-11-29 16:40:35,214 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:35 +08:00

2017-11-29 16:40:35,214 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:40:35,214 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:35,214 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:35,214 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:35 +08:00

2017-11-29 16:40:35,215 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:35,215 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:35,215 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:35 +08:00

2017-11-29 16:40:35,216 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:35 +08:00

2017-11-29 16:40:35,216 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:40:35,216 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:35,216 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:35,216 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:35 +08:00

2017-11-29 16:40:35,218 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:35,218 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:35,219 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:35 +08:00

2017-11-29 16:40:35,219 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:35 +08:00

2017-11-29 16:40:35,219 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:40:35,219 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:35,219 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:35,219 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:35 +08:00

2017-11-29 16:40:35,220 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 16:40:35,220 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:35,220 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:35 +08:00

2017-11-29 16:40:35,221 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:35 +08:00

2017-11-29 16:40:35,221 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:40:35,221 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:35,221 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:35,221 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:35 +08:00

2017-11-29 16:40:35,224 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:35,224 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:35,224 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:35 +08:00

2017-11-29 16:40:36,188 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:36 +08:00

2017-11-29 16:40:36,188 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:40:36,189 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:36,189 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:36,189 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:36 +08:00

2017-11-29 16:40:36,191 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:36,191 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:36,192 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:36 +08:00

2017-11-29 16:40:36,192 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:36 +08:00

2017-11-29 16:40:36,192 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:40:36,192 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:36,192 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:36,192 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:36 +08:00

2017-11-29 16:40:36,193 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:36,193 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:36,193 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:36 +08:00

2017-11-29 16:40:36,194 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:36 +08:00

2017-11-29 16:40:36,194 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:40:36,194 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:36,194 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:36,194 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:36 +08:00

2017-11-29 16:40:36,197 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:36,197 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:36,197 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:36 +08:00

2017-11-29 16:40:36,197 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:36 +08:00

2017-11-29 16:40:36,198 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:40:36,198 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:36,198 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:36,198 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:36 +08:00

2017-11-29 16:40:36,199 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:36,199 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:36,199 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:36 +08:00

2017-11-29 16:40:36,199 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:36 +08:00

2017-11-29 16:40:36,199 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:40:36,200 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:36,200 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:36,200 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:36 +08:00

2017-11-29 16:40:36,202 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:36,202 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:36,202 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:36 +08:00

2017-11-29 16:40:37,162 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:37 +08:00

2017-11-29 16:40:37,163 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:40:37,163 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:37,163 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:37,163 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:37 +08:00

2017-11-29 16:40:37,165 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:37,166 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:37,166 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:37 +08:00

2017-11-29 16:40:37,166 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:37 +08:00

2017-11-29 16:40:37,166 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:40:37,166 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:37,166 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:37,166 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:37 +08:00

2017-11-29 16:40:37,167 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:37,167 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:37,167 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:37 +08:00

2017-11-29 16:40:37,168 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:37 +08:00

2017-11-29 16:40:37,168 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:40:37,168 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:37,168 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:37,168 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:37 +08:00

2017-11-29 16:40:37,171 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:37,171 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:37,171 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:37 +08:00

2017-11-29 16:40:37,171 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:37 +08:00

2017-11-29 16:40:37,172 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:40:37,172 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:37,172 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:37,172 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:37 +08:00

2017-11-29 16:40:37,173 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:37,173 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:37,173 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:37 +08:00

2017-11-29 16:40:37,173 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:37 +08:00

2017-11-29 16:40:37,173 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:40:37,174 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:37,174 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:37,174 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:37 +08:00

2017-11-29 16:40:37,176 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:37,176 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:37,176 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:37 +08:00

2017-11-29 16:40:38,129 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:38 +08:00

2017-11-29 16:40:38,129 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:40:38,130 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:38,130 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:38,130 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:38 +08:00

2017-11-29 16:40:38,132 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:38,132 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:38,132 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:38 +08:00

2017-11-29 16:40:38,133 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:38 +08:00

2017-11-29 16:40:38,133 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:40:38,133 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:38,133 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:38,133 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:38 +08:00

2017-11-29 16:40:38,134 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 16:40:38,134 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:38,134 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:38 +08:00

2017-11-29 16:40:38,134 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:38 +08:00

2017-11-29 16:40:38,135 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:40:38,135 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:38,135 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:38,135 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:38 +08:00

2017-11-29 16:40:38,137 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:38,137 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:38,137 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:38 +08:00

2017-11-29 16:40:38,138 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:38 +08:00

2017-11-29 16:40:38,138 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:40:38,138 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:38,138 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:38,138 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:38 +08:00

2017-11-29 16:40:38,139 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 16:40:38,139 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:38,139 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:38 +08:00

2017-11-29 16:40:38,139 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:38 +08:00

2017-11-29 16:40:38,140 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:40:38,140 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:38,140 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:38,140 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:38 +08:00

2017-11-29 16:40:38,142 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:38,142 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:38,143 [12] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:38 +08:00

2017-11-29 16:40:41,754 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:41 +08:00

2017-11-29 16:40:41,754 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:40:41,754 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:41,754 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:41,754 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:41 +08:00

2017-11-29 16:40:41,757 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:41,757 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:41,757 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:41 +08:00

2017-11-29 16:40:41,757 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:41 +08:00

2017-11-29 16:40:41,757 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:40:41,757 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:41,757 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:41,757 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:41 +08:00

2017-11-29 16:40:41,759 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:41,759 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:41,759 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:41 +08:00

2017-11-29 16:40:41,759 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:41 +08:00

2017-11-29 16:40:41,760 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:40:41,760 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:41,760 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:41,760 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:41 +08:00

2017-11-29 16:40:41,763 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:41,763 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:41,763 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:41 +08:00

2017-11-29 16:40:41,763 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:41 +08:00

2017-11-29 16:40:41,763 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:40:41,763 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:41,763 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:41,763 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:41 +08:00

2017-11-29 16:40:41,765 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:41,765 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:41,765 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:41 +08:00

2017-11-29 16:40:41,765 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:41 +08:00

2017-11-29 16:40:41,765 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:40:41,765 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:41,765 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:41,765 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:41 +08:00

2017-11-29 16:40:41,768 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:41,768 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:41,768 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:41 +08:00

2017-11-29 16:40:45,255 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:45 +08:00

2017-11-29 16:40:45,255 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:40:45,255 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:45,255 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:45,255 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:45 +08:00

2017-11-29 16:40:45,258 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:45,258 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:45,258 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:45 +08:00

2017-11-29 16:40:45,258 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:45 +08:00

2017-11-29 16:40:45,258 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:40:45,258 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:45,258 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:45,258 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:45 +08:00

2017-11-29 16:40:45,259 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:45,259 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:45,259 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:45 +08:00

2017-11-29 16:40:45,260 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:45 +08:00

2017-11-29 16:40:45,261 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:40:45,261 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:45,261 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:45,261 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:45 +08:00

2017-11-29 16:40:45,263 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:45,263 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:45,264 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:45 +08:00

2017-11-29 16:40:45,264 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:45 +08:00

2017-11-29 16:40:45,283 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes]) AND (([Extent1].[Name] LIKE @p__linq__1 ESCAPE N'~') OR ([Extent1].[Mobile] LIKE @p__linq__2 ESCAPE '~'))
    )  AS [GroupBy1]
2017-11-29 16:40:45,283 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:45,283 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:45,283 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '%w%' (Type = String, Size = 4000)

2017-11-29 16:40:45,283 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__2: '%w%' (Type = AnsiString, Size = 8000)

2017-11-29 16:40:45,283 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:45 +08:00

2017-11-29 16:40:45,285 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:45,285 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:45,285 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:45 +08:00

2017-11-29 16:40:45,285 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:45 +08:00

2017-11-29 16:40:45,290 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes]) AND (([Extent1].[Name] LIKE @p__linq__1 ESCAPE N'~') OR ([Extent1].[Mobile] LIKE @p__linq__2 ESCAPE '~'))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:40:45,290 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:45,290 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:45,290 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '%w%' (Type = String, Size = 4000)

2017-11-29 16:40:45,290 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__2: '%w%' (Type = AnsiString, Size = 8000)

2017-11-29 16:40:45,290 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:45 +08:00

2017-11-29 16:40:45,293 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:45,293 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:45,293 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:45 +08:00

2017-11-29 16:40:48,235 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:48 +08:00

2017-11-29 16:40:48,235 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:40:48,236 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:48,236 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:48,236 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:48 +08:00

2017-11-29 16:40:48,238 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:48,238 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:48,238 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:48 +08:00

2017-11-29 16:40:48,238 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:48 +08:00

2017-11-29 16:40:48,238 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:40:48,238 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:48,238 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:48,238 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:48 +08:00

2017-11-29 16:40:48,240 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:48,240 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:48,240 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:48 +08:00

2017-11-29 16:40:48,241 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:48 +08:00

2017-11-29 16:40:48,241 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:40:48,241 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:48,241 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:48,241 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:48 +08:00

2017-11-29 16:40:48,243 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:48,243 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:48,244 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:48 +08:00

2017-11-29 16:40:48,244 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:48 +08:00

2017-11-29 16:40:48,245 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes]) AND (([Extent1].[Name] LIKE @p__linq__1 ESCAPE N'~') OR ([Extent1].[Mobile] LIKE @p__linq__2 ESCAPE '~'))
    )  AS [GroupBy1]
2017-11-29 16:40:48,245 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:48,245 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:48,245 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '%w%' (Type = String, Size = 4000)

2017-11-29 16:40:48,245 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__2: '%w%' (Type = AnsiString, Size = 8000)

2017-11-29 16:40:48,245 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:48 +08:00

2017-11-29 16:40:48,247 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:48,247 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:48,247 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:48 +08:00

2017-11-29 16:40:48,247 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:48 +08:00

2017-11-29 16:40:48,252 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes]) AND (([Extent1].[Name] LIKE @p__linq__1 ESCAPE N'~') OR ([Extent1].[Mobile] LIKE @p__linq__2 ESCAPE '~'))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:40:48,252 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:48,252 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:48,252 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '%w%' (Type = String, Size = 4000)

2017-11-29 16:40:48,252 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__2: '%w%' (Type = AnsiString, Size = 8000)

2017-11-29 16:40:48,252 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:48 +08:00

2017-11-29 16:40:48,305 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 52 ms with result: SqlDataReader

2017-11-29 16:40:48,305 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:48,305 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:48 +08:00

2017-11-29 16:40:49,793 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:49 +08:00

2017-11-29 16:40:49,793 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:40:49,793 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:49,793 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:49,793 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:49 +08:00

2017-11-29 16:40:49,800 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2017-11-29 16:40:49,800 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:49,800 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:49 +08:00

2017-11-29 16:40:49,800 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:49 +08:00

2017-11-29 16:40:49,800 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:40:49,800 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:49,800 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:49,800 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:49 +08:00

2017-11-29 16:40:49,802 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:49,802 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:49,802 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:49 +08:00

2017-11-29 16:40:49,803 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:49 +08:00

2017-11-29 16:40:49,803 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:40:49,803 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:49,803 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:49,803 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:49 +08:00

2017-11-29 16:40:49,806 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:49,806 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:49,806 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:49 +08:00

2017-11-29 16:40:49,806 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:49 +08:00

2017-11-29 16:40:49,807 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes]) AND (([Extent1].[Name] LIKE @p__linq__1 ESCAPE N'~') OR ([Extent1].[Mobile] LIKE @p__linq__2 ESCAPE '~'))
    )  AS [GroupBy1]
2017-11-29 16:40:49,807 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:49,807 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:49,808 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '%w%' (Type = String, Size = 4000)

2017-11-29 16:40:49,808 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__2: '%w%' (Type = AnsiString, Size = 8000)

2017-11-29 16:40:49,808 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:49 +08:00

2017-11-29 16:40:49,809 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:49,809 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:49,809 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:49 +08:00

2017-11-29 16:40:49,809 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:49 +08:00

2017-11-29 16:40:49,810 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes]) AND (([Extent1].[Name] LIKE @p__linq__1 ESCAPE N'~') OR ([Extent1].[Mobile] LIKE @p__linq__2 ESCAPE '~'))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:40:49,810 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:49,810 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:49,810 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '%w%' (Type = String, Size = 4000)

2017-11-29 16:40:49,810 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__2: '%w%' (Type = AnsiString, Size = 8000)

2017-11-29 16:40:49,810 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:49 +08:00

2017-11-29 16:40:49,813 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2017-11-29 16:40:49,813 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:49,814 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:49 +08:00

2017-11-29 16:40:51,011 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:51 +08:00

2017-11-29 16:40:51,012 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:40:51,012 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:51,012 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:51,012 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:51 +08:00

2017-11-29 16:40:51,015 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:51,015 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:51,015 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:51 +08:00

2017-11-29 16:40:51,015 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:51 +08:00

2017-11-29 16:40:51,015 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:40:51,015 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:51,015 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:51,015 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:51 +08:00

2017-11-29 16:40:51,016 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:51,016 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:51,016 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:51 +08:00

2017-11-29 16:40:51,017 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:51 +08:00

2017-11-29 16:40:51,017 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:40:51,017 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:51,017 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:51,017 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:51 +08:00

2017-11-29 16:40:51,020 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:51,020 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:51,020 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:51 +08:00

2017-11-29 16:40:51,020 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:51 +08:00

2017-11-29 16:40:51,021 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes]) AND (([Extent1].[Name] LIKE @p__linq__1 ESCAPE N'~') OR ([Extent1].[Mobile] LIKE @p__linq__2 ESCAPE '~'))
    )  AS [GroupBy1]
2017-11-29 16:40:51,021 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:51,021 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:51,021 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '%w%' (Type = String, Size = 4000)

2017-11-29 16:40:51,021 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__2: '%w%' (Type = AnsiString, Size = 8000)

2017-11-29 16:40:51,021 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:51 +08:00

2017-11-29 16:40:51,022 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:51,022 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:51,022 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:51 +08:00

2017-11-29 16:40:51,023 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:51 +08:00

2017-11-29 16:40:51,024 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes]) AND (([Extent1].[Name] LIKE @p__linq__1 ESCAPE N'~') OR ([Extent1].[Mobile] LIKE @p__linq__2 ESCAPE '~'))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:40:51,024 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:51,024 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:51,024 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '%w%' (Type = String, Size = 4000)

2017-11-29 16:40:51,024 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__2: '%w%' (Type = AnsiString, Size = 8000)

2017-11-29 16:40:51,024 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:51 +08:00

2017-11-29 16:40:51,026 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:51,026 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:51,027 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:51 +08:00

2017-11-29 16:40:52,538 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:52 +08:00

2017-11-29 16:40:52,539 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:40:52,539 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:52,539 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:52,539 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:52 +08:00

2017-11-29 16:40:52,543 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2017-11-29 16:40:52,543 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:52,543 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:52 +08:00

2017-11-29 16:40:52,543 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:52 +08:00

2017-11-29 16:40:52,543 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:40:52,543 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:52,543 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:52,543 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:52 +08:00

2017-11-29 16:40:52,544 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:52,544 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:52,545 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:52 +08:00

2017-11-29 16:40:52,545 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:52 +08:00

2017-11-29 16:40:52,545 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:40:52,545 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:52,545 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:52,545 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:52 +08:00

2017-11-29 16:40:52,548 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:52,548 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:52,548 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:52 +08:00

2017-11-29 16:40:52,549 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:52 +08:00

2017-11-29 16:40:52,550 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes]) AND (([Extent1].[Name] LIKE @p__linq__1 ESCAPE N'~') OR ([Extent1].[Mobile] LIKE @p__linq__2 ESCAPE '~'))
    )  AS [GroupBy1]
2017-11-29 16:40:52,550 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:52,550 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:52,550 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '%w%' (Type = String, Size = 4000)

2017-11-29 16:40:52,550 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__2: '%w%' (Type = AnsiString, Size = 8000)

2017-11-29 16:40:52,550 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:52 +08:00

2017-11-29 16:40:52,551 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:52,551 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:52,551 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:52 +08:00

2017-11-29 16:40:52,551 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:52 +08:00

2017-11-29 16:40:52,552 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes]) AND (([Extent1].[Name] LIKE @p__linq__1 ESCAPE N'~') OR ([Extent1].[Mobile] LIKE @p__linq__2 ESCAPE '~'))
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:40:52,552 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:52,552 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:52,552 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '%w%' (Type = String, Size = 4000)

2017-11-29 16:40:52,552 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__2: '%w%' (Type = AnsiString, Size = 8000)

2017-11-29 16:40:52,553 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:52 +08:00

2017-11-29 16:40:52,555 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:52,556 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:52,556 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:52 +08:00

2017-11-29 16:40:58,091 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,091 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:40:58,091 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:58,091 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:58,091 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,094 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:58,094 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:58,094 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,094 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,094 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:40:58,095 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:58,095 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:58,095 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,096 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:58,096 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:58,096 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,100 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,102 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:40:58,102 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:58,102 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '22' (Type = Int64, IsNullable = false)

2017-11-29 16:40:58,102 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,103 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:58,104 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:58,104 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,105 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,109 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Limit1].[Id] AS [Id], 
    [Limit1].[Num] AS [Num], 
    [Limit1].[Name] AS [Name], 
    [Limit1].[Description] AS [Description], 
    [Limit1].[ImgUrl] AS [ImgUrl], 
    [Limit1].[StatusId] AS [StatusId], 
    [Limit1].[WeChatUrl] AS [WeChatUrl], 
    [Limit1].[PaperId] AS [PaperId], 
    [Limit1].[PrizeName] AS [PrizeName], 
    [Limit1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Limit1].[VisitCount] AS [VisitCount], 
    [Limit1].[ForwardCount] AS [ForwardCount], 
    [Limit1].[AnswerCount] AS [AnswerCount], 
    [Limit1].[HavePrizeCount] AS [HavePrizeCount], 
    [Limit1].[PrizeCount] AS [PrizeCount], 
    [Limit1].[StartTime] AS [StartTime], 
    [Limit1].[ExamEndTime] AS [ExamEndTime], 
    [Limit1].[RewardTime] AS [RewardTime], 
    [Limit1].[IsDeleted] AS [IsDeleted], 
    [Limit1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT TOP (2) 
        [Extent1].[Id] AS [Id], 
        [Extent1].[Num] AS [Num], 
        [Extent1].[Name] AS [Name], 
        [Extent1].[Description] AS [Description], 
        [Extent1].[ImgUrl] AS [ImgUrl], 
        [Extent1].[StatusId] AS [StatusId], 
        [Extent1].[WeChatUrl] AS [WeChatUrl], 
        [Extent1].[PaperId] AS [PaperId], 
        [Extent1].[PrizeName] AS [PrizeName], 
        [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
        [Extent1].[VisitCount] AS [VisitCount], 
        [Extent1].[ForwardCount] AS [ForwardCount], 
        [Extent1].[AnswerCount] AS [AnswerCount], 
        [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
        [Extent1].[PrizeCount] AS [PrizeCount], 
        [Extent1].[StartTime] AS [StartTime], 
        [Extent1].[ExamEndTime] AS [ExamEndTime], 
        [Extent1].[RewardTime] AS [RewardTime], 
        [Extent1].[IsDeleted] AS [IsDeleted], 
        [Extent1].[CreateDateTime] AS [CreateDateTime]
        FROM  [dbo].[T_Activities] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[ActivityId]
        WHERE ([Extent2].[UserId] = @p__linq__0) AND ([Extent1].[Id] = @p__linq__1)
    )  AS [Limit1]
2017-11-29 16:40:58,109 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:58,109 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '22' (Type = Int64, IsNullable = false)

2017-11-29 16:40:58,109 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:58,109 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,112 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:58,112 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:58,112 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,161 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,165 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,266 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Activities]
SET [PrizeCount] = @0
WHERE ([Id] = @1)

2017-11-29 16:40:58,267 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '4' (Type = Int64)

2017-11-29 16:40:58,267 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '16' (Type = Int64)

2017-11-29 16:40:58,267 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,269 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2017-11-29 16:40:58,269 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:58,270 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [WinCount] = @0, [IsWon] = @1
WHERE ([Id] = @2)

2017-11-29 16:40:58,270 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '1' (Type = Int64)

2017-11-29 16:40:58,270 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: 'True' (Type = Boolean)

2017-11-29 16:40:58,270 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @2: '22' (Type = Int64)

2017-11-29 16:40:58,270 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,271 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:40:58,271 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:58,275 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,276 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,281 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,282 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:40:58,282 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:58,282 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '22' (Type = Int64, IsNullable = false)

2017-11-29 16:40:58,282 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,284 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:58,284 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:58,284 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,285 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,286 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,286 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [LoginErrorTimes] = @0
WHERE ([Id] = @1)

2017-11-29 16:40:58,286 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '0' (Type = Int32)

2017-11-29 16:40:58,286 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '22' (Type = Int64)

2017-11-29 16:40:58,286 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,287 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:40:58,287 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:58,289 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:58,289 [27] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:58 +08:00

2017-11-29 16:40:59,651 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:59 +08:00

2017-11-29 16:40:59,651 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:40:59,651 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:59,651 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:59,651 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:59 +08:00

2017-11-29 16:40:59,654 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:59,654 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:59,654 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:59 +08:00

2017-11-29 16:40:59,654 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:59 +08:00

2017-11-29 16:40:59,654 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:40:59,655 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:59,655 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:40:59,655 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:59 +08:00

2017-11-29 16:40:59,656 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:59,656 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:59,656 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:59 +08:00

2017-11-29 16:40:59,656 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:59 +08:00

2017-11-29 16:40:59,657 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:40:59,657 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:59,657 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:59,657 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:59 +08:00

2017-11-29 16:40:59,660 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:59,660 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:59,660 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:59 +08:00

2017-11-29 16:40:59,661 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:59 +08:00

2017-11-29 16:40:59,661 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:40:59,661 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:59,661 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:59,661 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:59 +08:00

2017-11-29 16:40:59,662 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:40:59,663 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:59,663 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:59 +08:00

2017-11-29 16:40:59,663 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:40:59 +08:00

2017-11-29 16:40:59,663 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:40:59,663 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:59,663 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:40:59,664 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:40:59 +08:00

2017-11-29 16:40:59,666 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:40:59,666 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:40:59,666 [32] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:40:59 +08:00

2017-11-29 16:51:17,784 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:17 +08:00

2017-11-29 16:51:17,785 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:51:17,785 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:17,785 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:51:17,785 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:17 +08:00

2017-11-29 16:51:17,788 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:51:17,788 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:17,788 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:17 +08:00

2017-11-29 16:51:17,788 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:17 +08:00

2017-11-29 16:51:17,788 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:51:17,788 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:17,788 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:51:17,788 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:17 +08:00

2017-11-29 16:51:17,791 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:51:17,791 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:17,791 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:17 +08:00

2017-11-29 16:51:17,792 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:17 +08:00

2017-11-29 16:51:17,792 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:51:17,792 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:17,792 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:51:17,792 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:17 +08:00

2017-11-29 16:51:17,795 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:51:17,795 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:17,795 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:17 +08:00

2017-11-29 16:51:17,795 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:17 +08:00

2017-11-29 16:51:17,796 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:51:17,796 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:17,796 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:51:17,796 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:17 +08:00

2017-11-29 16:51:17,797 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 16:51:17,797 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:17,797 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:17 +08:00

2017-11-29 16:51:17,797 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:17 +08:00

2017-11-29 16:51:17,798 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:51:17,798 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:17,798 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:51:17,798 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:17 +08:00

2017-11-29 16:51:17,801 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:51:17,801 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:17,801 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:17 +08:00

2017-11-29 16:51:27,953 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,954 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:51:27,954 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:27,954 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:51:27,954 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,956 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:51:27,956 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:27,957 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,957 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,957 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:51:27,957 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:27,957 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:51:27,957 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,958 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:51:27,958 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:27,958 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,959 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,959 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:51:27,959 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:27,959 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '23' (Type = Int64, IsNullable = false)

2017-11-29 16:51:27,959 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,962 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:51:27,962 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:27,962 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,962 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,963 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Limit1].[Id] AS [Id], 
    [Limit1].[Num] AS [Num], 
    [Limit1].[Name] AS [Name], 
    [Limit1].[Description] AS [Description], 
    [Limit1].[ImgUrl] AS [ImgUrl], 
    [Limit1].[StatusId] AS [StatusId], 
    [Limit1].[WeChatUrl] AS [WeChatUrl], 
    [Limit1].[PaperId] AS [PaperId], 
    [Limit1].[PrizeName] AS [PrizeName], 
    [Limit1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Limit1].[VisitCount] AS [VisitCount], 
    [Limit1].[ForwardCount] AS [ForwardCount], 
    [Limit1].[AnswerCount] AS [AnswerCount], 
    [Limit1].[HavePrizeCount] AS [HavePrizeCount], 
    [Limit1].[PrizeCount] AS [PrizeCount], 
    [Limit1].[StartTime] AS [StartTime], 
    [Limit1].[ExamEndTime] AS [ExamEndTime], 
    [Limit1].[RewardTime] AS [RewardTime], 
    [Limit1].[IsDeleted] AS [IsDeleted], 
    [Limit1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT TOP (2) 
        [Extent1].[Id] AS [Id], 
        [Extent1].[Num] AS [Num], 
        [Extent1].[Name] AS [Name], 
        [Extent1].[Description] AS [Description], 
        [Extent1].[ImgUrl] AS [ImgUrl], 
        [Extent1].[StatusId] AS [StatusId], 
        [Extent1].[WeChatUrl] AS [WeChatUrl], 
        [Extent1].[PaperId] AS [PaperId], 
        [Extent1].[PrizeName] AS [PrizeName], 
        [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
        [Extent1].[VisitCount] AS [VisitCount], 
        [Extent1].[ForwardCount] AS [ForwardCount], 
        [Extent1].[AnswerCount] AS [AnswerCount], 
        [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
        [Extent1].[PrizeCount] AS [PrizeCount], 
        [Extent1].[StartTime] AS [StartTime], 
        [Extent1].[ExamEndTime] AS [ExamEndTime], 
        [Extent1].[RewardTime] AS [RewardTime], 
        [Extent1].[IsDeleted] AS [IsDeleted], 
        [Extent1].[CreateDateTime] AS [CreateDateTime]
        FROM  [dbo].[T_Activities] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[ActivityId]
        WHERE ([Extent2].[UserId] = @p__linq__0) AND ([Extent1].[Id] = @p__linq__1)
    )  AS [Limit1]
2017-11-29 16:51:27,963 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:27,963 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '23' (Type = Int64, IsNullable = false)

2017-11-29 16:51:27,963 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:51:27,963 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,966 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:51:27,966 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:27,966 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,966 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,967 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,968 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Activities]
SET [PrizeCount] = @0
WHERE ([Id] = @1)

2017-11-29 16:51:27,968 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '5' (Type = Int64)

2017-11-29 16:51:27,968 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '16' (Type = Int64)

2017-11-29 16:51:27,968 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,969 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:51:27,969 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:27,969 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [WinCount] = @0, [IsWon] = @1
WHERE ([Id] = @2)

2017-11-29 16:51:27,969 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '1' (Type = Int64)

2017-11-29 16:51:27,969 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: 'True' (Type = Boolean)

2017-11-29 16:51:27,969 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @2: '23' (Type = Int64)

2017-11-29 16:51:27,969 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,970 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2017-11-29 16:51:27,970 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:27,971 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,971 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,972 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,972 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:51:27,972 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:27,972 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '23' (Type = Int64, IsNullable = false)

2017-11-29 16:51:27,972 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,974 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:51:27,974 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:27,975 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,975 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,976 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,976 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [LoginErrorTimes] = @0
WHERE ([Id] = @1)

2017-11-29 16:51:27,976 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '0' (Type = Int32)

2017-11-29 16:51:27,976 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '23' (Type = Int64)

2017-11-29 16:51:27,976 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,977 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:51:27,977 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:27,978 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:27,978 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:27 +08:00

2017-11-29 16:51:29,232 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:29 +08:00

2017-11-29 16:51:29,233 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:51:29,239 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:29,239 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:51:29,239 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:29 +08:00

2017-11-29 16:51:29,241 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:51:29,242 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:29,242 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:29 +08:00

2017-11-29 16:51:29,242 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:29 +08:00

2017-11-29 16:51:29,242 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:51:29,242 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:29,242 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:51:29,242 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:29 +08:00

2017-11-29 16:51:29,243 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:51:29,243 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:29,243 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:29 +08:00

2017-11-29 16:51:29,245 [39] ERROR Chat.AdminWeb.App_Start.SYSExceptionFilter - 出现未处理异常：System.FormatException: 输入字符串的格式不正确。
   在 System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
   在 System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info)
   在 System.String.System.IConvertible.ToInt32(IFormatProvider provider)
   在 System.Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider)
   在 System.Convert.ChangeType(Object value, Type conversionType)
   在 Chat.WebCommon.TrimToDBCModelBinder.BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext) 位置 F:\1711\NN17103052\Chat.WebCommon\TrimToDBCModelBinder.cs:行号 36
   在 System.Web.Mvc.ControllerActionInvoker.GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor)
   在 System.Web.Mvc.ControllerActionInvoker.GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<BeginInvokeAction>b__19(AsyncCallback asyncCallback, Object asyncState)
2017-11-29 16:51:38,311 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:38 +08:00

2017-11-29 16:51:38,311 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:51:38,311 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:38,312 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:51:38,312 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:38 +08:00

2017-11-29 16:51:38,314 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:51:38,314 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:38,314 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:38 +08:00

2017-11-29 16:51:38,315 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:38 +08:00

2017-11-29 16:51:38,315 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:51:38,315 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:38,315 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:51:38,315 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:38 +08:00

2017-11-29 16:51:38,316 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:51:38,316 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:38,316 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:38 +08:00

2017-11-29 16:51:38,317 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:38 +08:00

2017-11-29 16:51:38,317 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:51:38,317 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:38,317 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:51:38,317 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:38 +08:00

2017-11-29 16:51:38,320 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:51:38,320 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:38,320 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:38 +08:00

2017-11-29 16:51:38,321 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:38 +08:00

2017-11-29 16:51:38,321 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:51:38,321 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:38,321 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:51:38,321 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:38 +08:00

2017-11-29 16:51:38,322 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 16:51:38,322 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:38,322 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:38 +08:00

2017-11-29 16:51:38,322 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:38 +08:00

2017-11-29 16:51:38,323 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:51:38,323 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:38,323 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:51:38,323 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:38 +08:00

2017-11-29 16:51:38,326 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:51:38,326 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:38,326 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:38 +08:00

2017-11-29 16:51:48,076 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:48 +08:00

2017-11-29 16:51:48,077 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:51:48,077 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:48,077 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:51:48,077 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:48 +08:00

2017-11-29 16:51:48,080 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:51:48,080 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:48,080 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:48 +08:00

2017-11-29 16:51:48,080 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:48 +08:00

2017-11-29 16:51:48,080 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:51:48,080 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:48,080 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:51:48,080 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:48 +08:00

2017-11-29 16:51:48,081 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:51:48,081 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:48,081 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:48 +08:00

2017-11-29 16:51:48,082 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:48 +08:00

2017-11-29 16:51:48,082 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:51:48,082 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:48,082 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:51:48,082 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:48 +08:00

2017-11-29 16:51:48,085 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:51:48,085 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:48,085 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:48 +08:00

2017-11-29 16:51:48,085 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:48 +08:00

2017-11-29 16:51:48,086 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:51:48,086 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:48,086 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:51:48,086 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:48 +08:00

2017-11-29 16:51:48,087 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:51:48,087 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:48,087 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:48 +08:00

2017-11-29 16:51:48,087 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:48 +08:00

2017-11-29 16:51:48,088 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:51:48,088 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:48,088 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:51:48,088 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:48 +08:00

2017-11-29 16:51:48,090 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:51:48,090 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:48,090 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:48 +08:00

2017-11-29 16:51:58,719 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,720 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:51:58,720 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:58,720 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:51:58,720 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,723 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:51:58,723 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:58,723 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,723 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,723 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:51:58,723 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:58,723 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:51:58,723 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,724 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:51:58,724 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:58,725 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,725 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,725 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:51:58,725 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:58,726 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:51:58,726 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,727 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:51:58,727 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:58,727 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,728 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,728 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Limit1].[Id] AS [Id], 
    [Limit1].[Num] AS [Num], 
    [Limit1].[Name] AS [Name], 
    [Limit1].[Description] AS [Description], 
    [Limit1].[ImgUrl] AS [ImgUrl], 
    [Limit1].[StatusId] AS [StatusId], 
    [Limit1].[WeChatUrl] AS [WeChatUrl], 
    [Limit1].[PaperId] AS [PaperId], 
    [Limit1].[PrizeName] AS [PrizeName], 
    [Limit1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Limit1].[VisitCount] AS [VisitCount], 
    [Limit1].[ForwardCount] AS [ForwardCount], 
    [Limit1].[AnswerCount] AS [AnswerCount], 
    [Limit1].[HavePrizeCount] AS [HavePrizeCount], 
    [Limit1].[PrizeCount] AS [PrizeCount], 
    [Limit1].[StartTime] AS [StartTime], 
    [Limit1].[ExamEndTime] AS [ExamEndTime], 
    [Limit1].[RewardTime] AS [RewardTime], 
    [Limit1].[IsDeleted] AS [IsDeleted], 
    [Limit1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT TOP (2) 
        [Extent1].[Id] AS [Id], 
        [Extent1].[Num] AS [Num], 
        [Extent1].[Name] AS [Name], 
        [Extent1].[Description] AS [Description], 
        [Extent1].[ImgUrl] AS [ImgUrl], 
        [Extent1].[StatusId] AS [StatusId], 
        [Extent1].[WeChatUrl] AS [WeChatUrl], 
        [Extent1].[PaperId] AS [PaperId], 
        [Extent1].[PrizeName] AS [PrizeName], 
        [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
        [Extent1].[VisitCount] AS [VisitCount], 
        [Extent1].[ForwardCount] AS [ForwardCount], 
        [Extent1].[AnswerCount] AS [AnswerCount], 
        [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
        [Extent1].[PrizeCount] AS [PrizeCount], 
        [Extent1].[StartTime] AS [StartTime], 
        [Extent1].[ExamEndTime] AS [ExamEndTime], 
        [Extent1].[RewardTime] AS [RewardTime], 
        [Extent1].[IsDeleted] AS [IsDeleted], 
        [Extent1].[CreateDateTime] AS [CreateDateTime]
        FROM  [dbo].[T_Activities] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[ActivityId]
        WHERE ([Extent2].[UserId] = @p__linq__0) AND ([Extent1].[Id] = @p__linq__1)
    )  AS [Limit1]
2017-11-29 16:51:58,728 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:58,728 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:51:58,728 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:51:58,728 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,731 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:51:58,731 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:58,732 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,732 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,733 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,733 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Activities]
SET [PrizeCount] = @0
WHERE ([Id] = @1)

2017-11-29 16:51:58,733 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '6' (Type = Int64)

2017-11-29 16:51:58,734 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '16' (Type = Int64)

2017-11-29 16:51:58,734 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,734 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:51:58,734 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:58,735 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [WinCount] = @0, [IsWon] = @1
WHERE ([Id] = @2)

2017-11-29 16:51:58,735 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2017-11-29 16:51:58,735 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: 'True' (Type = Boolean)

2017-11-29 16:51:58,735 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @2: '16' (Type = Int64)

2017-11-29 16:51:58,735 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,736 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2017-11-29 16:51:58,736 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:58,737 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,737 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,738 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,738 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:51:58,738 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:58,738 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:51:58,738 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,741 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:51:58,741 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:58,741 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,741 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,742 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,743 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [LoginErrorTimes] = @0
WHERE ([Id] = @1)

2017-11-29 16:51:58,743 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '0' (Type = Int32)

2017-11-29 16:51:58,743 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '16' (Type = Int64)

2017-11-29 16:51:58,743 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,744 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:51:58,744 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:51:58,745 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:51:58 +08:00

2017-11-29 16:51:58,745 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:51:58 +08:00

2017-11-29 16:52:00,711 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:00 +08:00

2017-11-29 16:52:00,712 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:52:00,728 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:00,728 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:00,728 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:00 +08:00

2017-11-29 16:52:00,732 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2017-11-29 16:52:00,732 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:00,732 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:00 +08:00

2017-11-29 16:52:00,732 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:00 +08:00

2017-11-29 16:52:00,732 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:52:00,732 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:00,732 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:00,732 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:00 +08:00

2017-11-29 16:52:00,734 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:52:00,734 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:00,734 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:00 +08:00

2017-11-29 16:52:00,735 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:00 +08:00

2017-11-29 16:52:00,735 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:52:00,735 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:00,735 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:00,735 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:00 +08:00

2017-11-29 16:52:00,738 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2017-11-29 16:52:00,738 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:00,738 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:00 +08:00

2017-11-29 16:52:00,739 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:00 +08:00

2017-11-29 16:52:00,739 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:52:00,740 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:00,740 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:00,740 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:00 +08:00

2017-11-29 16:52:00,741 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 16:52:00,741 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:00,741 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:00 +08:00

2017-11-29 16:52:00,741 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:00 +08:00

2017-11-29 16:52:00,742 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:52:00,742 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:00,742 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:00,742 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:00 +08:00

2017-11-29 16:52:00,744 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:00,744 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:00,744 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:00 +08:00

2017-11-29 16:52:15,286 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:15 +08:00

2017-11-29 16:52:15,287 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:52:15,287 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:15,287 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:15,287 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:15 +08:00

2017-11-29 16:52:15,290 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:15,290 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:15,290 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:15 +08:00

2017-11-29 16:52:15,290 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:15 +08:00

2017-11-29 16:52:15,291 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:52:15,291 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:15,291 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:15,291 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:15 +08:00

2017-11-29 16:52:15,292 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:52:15,292 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:15,292 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:15 +08:00

2017-11-29 16:52:15,295 [25] ERROR Chat.AdminWeb.App_Start.SYSExceptionFilter - 出现未处理异常：System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Chat.AdminWeb.Controllers.ActivityController.PrizeWon(Int64[] isWonIds, Int64 activityId) 位置 F:\1711\NN17103052\Chat.AdminWeb\Controllers\ActivityController.cs:行号 390
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<BeginInvokeSynchronousActionMethod>b__39(IAsyncResult asyncResult, ActionInvocation innerInvokeState)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`2.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3d()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass33.<BeginInvokeActionMethodWithFilters>b__32(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<>c__DisplayClass2b.<BeginInvokeAction>b__1c()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<BeginInvokeAction>b__1e(IAsyncResult asyncResult)
2017-11-29 16:52:20,438 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:20 +08:00

2017-11-29 16:52:20,438 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:52:20,438 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:20,438 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:20,438 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:20 +08:00

2017-11-29 16:52:20,441 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:20,441 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:20,441 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:20 +08:00

2017-11-29 16:52:20,441 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:20 +08:00

2017-11-29 16:52:20,441 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:52:20,441 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:20,441 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:20,441 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:20 +08:00

2017-11-29 16:52:20,442 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:52:20,442 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:20,443 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:20 +08:00

2017-11-29 16:52:20,443 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:20 +08:00

2017-11-29 16:52:20,443 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:52:20,443 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:20,443 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:20,443 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:20 +08:00

2017-11-29 16:52:20,446 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:20,446 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:20,447 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:20 +08:00

2017-11-29 16:52:20,447 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:20 +08:00

2017-11-29 16:52:20,447 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:52:20,447 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:20,447 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:20,447 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:20 +08:00

2017-11-29 16:52:20,448 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 16:52:20,448 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:20,449 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:20 +08:00

2017-11-29 16:52:20,449 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:20 +08:00

2017-11-29 16:52:20,449 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:52:20,449 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:20,449 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:20,449 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:20 +08:00

2017-11-29 16:52:20,452 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:20,452 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:20,452 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:20 +08:00

2017-11-29 16:52:23,559 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:23 +08:00

2017-11-29 16:52:23,559 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:52:23,559 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:23,559 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:23,559 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:23 +08:00

2017-11-29 16:52:23,562 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:23,562 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:23,562 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:23 +08:00

2017-11-29 16:52:23,562 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:23 +08:00

2017-11-29 16:52:23,562 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:52:23,562 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:23,562 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:23,562 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:23 +08:00

2017-11-29 16:52:23,564 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:52:23,564 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:23,564 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:23 +08:00

2017-11-29 16:52:23,564 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:23 +08:00

2017-11-29 16:52:23,565 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:52:23,565 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:23,565 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:23,565 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:23 +08:00

2017-11-29 16:52:23,568 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:23,568 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:23,568 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:23 +08:00

2017-11-29 16:52:23,568 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:23 +08:00

2017-11-29 16:52:23,569 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:52:23,569 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:23,569 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:23,569 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:23 +08:00

2017-11-29 16:52:23,570 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:52:23,570 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:23,570 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:23 +08:00

2017-11-29 16:52:23,570 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:23 +08:00

2017-11-29 16:52:23,571 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:52:23,571 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:23,571 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:23,571 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:23 +08:00

2017-11-29 16:52:23,573 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:23,573 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:23,574 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:23 +08:00

2017-11-29 16:52:24,776 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:24 +08:00

2017-11-29 16:52:24,777 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:52:24,777 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:24,777 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:24,777 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:24 +08:00

2017-11-29 16:52:24,779 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:24,779 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:24,779 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:24 +08:00

2017-11-29 16:52:24,780 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:24 +08:00

2017-11-29 16:52:24,780 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:52:24,780 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:24,780 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:24,780 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:24 +08:00

2017-11-29 16:52:24,781 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:52:24,781 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:24,781 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:24 +08:00

2017-11-29 16:52:24,782 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:24 +08:00

2017-11-29 16:52:24,782 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:52:24,782 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:24,782 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:24,782 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:24 +08:00

2017-11-29 16:52:24,785 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:24,785 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:24,785 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:24 +08:00

2017-11-29 16:52:24,785 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:24 +08:00

2017-11-29 16:52:24,786 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:52:24,786 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:24,786 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:24,786 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:24 +08:00

2017-11-29 16:52:24,787 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 16:52:24,787 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:24,787 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:24 +08:00

2017-11-29 16:52:24,787 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:24 +08:00

2017-11-29 16:52:24,787 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:52:24,788 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:24,788 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:24,788 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:24 +08:00

2017-11-29 16:52:24,790 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:24,790 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:24,791 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:24 +08:00

2017-11-29 16:52:28,980 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:28 +08:00

2017-11-29 16:52:28,980 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:52:28,980 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:28,980 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:28,980 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:28 +08:00

2017-11-29 16:52:28,983 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:28,983 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:28,983 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:28 +08:00

2017-11-29 16:52:28,983 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:28 +08:00

2017-11-29 16:52:28,983 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:52:28,983 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:28,983 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:28,983 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:28 +08:00

2017-11-29 16:52:28,984 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:52:28,984 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:28,984 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:28 +08:00

2017-11-29 16:52:28,985 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:28 +08:00

2017-11-29 16:52:28,985 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:52:28,985 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:28,985 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:28,985 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:28 +08:00

2017-11-29 16:52:28,988 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:28,988 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:28,988 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:28 +08:00

2017-11-29 16:52:28,988 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:28 +08:00

2017-11-29 16:52:28,989 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:52:28,989 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:28,989 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:28,989 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:28 +08:00

2017-11-29 16:52:28,990 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:52:28,990 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:28,990 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:28 +08:00

2017-11-29 16:52:28,991 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:28 +08:00

2017-11-29 16:52:28,991 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:52:28,991 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:28,991 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:28,991 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:28 +08:00

2017-11-29 16:52:28,994 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:28,994 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:28,994 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:28 +08:00

2017-11-29 16:52:30,291 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:30 +08:00

2017-11-29 16:52:30,292 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:52:30,292 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:30,292 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:30,292 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:30 +08:00

2017-11-29 16:52:30,294 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:30,294 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:30,295 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:30 +08:00

2017-11-29 16:52:30,295 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:30 +08:00

2017-11-29 16:52:30,295 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:52:30,295 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:30,295 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:30,295 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:30 +08:00

2017-11-29 16:52:30,296 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:52:30,296 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:30,296 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:30 +08:00

2017-11-29 16:52:30,297 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:30 +08:00

2017-11-29 16:52:30,297 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:52:30,297 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:30,297 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:30,297 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:30 +08:00

2017-11-29 16:52:30,300 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:30,300 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:30,300 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:30 +08:00

2017-11-29 16:52:30,301 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:30 +08:00

2017-11-29 16:52:30,301 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:52:30,301 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:30,301 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:30,301 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:30 +08:00

2017-11-29 16:52:30,302 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:52:30,302 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:30,302 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:30 +08:00

2017-11-29 16:52:30,302 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:30 +08:00

2017-11-29 16:52:30,303 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:52:30,303 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:30,303 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:30,303 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:30 +08:00

2017-11-29 16:52:30,306 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:30,306 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:30,306 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:30 +08:00

2017-11-29 16:52:32,057 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,058 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:52:32,058 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:32,058 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:32,058 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,078 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 19 ms with result: SqlDataReader

2017-11-29 16:52:32,078 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:32,078 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,078 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,078 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:52:32,078 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:32,078 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:32,078 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,080 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:32,081 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:32,081 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,081 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,082 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:52:32,082 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:32,082 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '17' (Type = Int64, IsNullable = false)

2017-11-29 16:52:32,082 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,084 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:32,084 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:32,085 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,085 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,085 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Limit1].[Id] AS [Id], 
    [Limit1].[Num] AS [Num], 
    [Limit1].[Name] AS [Name], 
    [Limit1].[Description] AS [Description], 
    [Limit1].[ImgUrl] AS [ImgUrl], 
    [Limit1].[StatusId] AS [StatusId], 
    [Limit1].[WeChatUrl] AS [WeChatUrl], 
    [Limit1].[PaperId] AS [PaperId], 
    [Limit1].[PrizeName] AS [PrizeName], 
    [Limit1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Limit1].[VisitCount] AS [VisitCount], 
    [Limit1].[ForwardCount] AS [ForwardCount], 
    [Limit1].[AnswerCount] AS [AnswerCount], 
    [Limit1].[HavePrizeCount] AS [HavePrizeCount], 
    [Limit1].[PrizeCount] AS [PrizeCount], 
    [Limit1].[StartTime] AS [StartTime], 
    [Limit1].[ExamEndTime] AS [ExamEndTime], 
    [Limit1].[RewardTime] AS [RewardTime], 
    [Limit1].[IsDeleted] AS [IsDeleted], 
    [Limit1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT TOP (2) 
        [Extent1].[Id] AS [Id], 
        [Extent1].[Num] AS [Num], 
        [Extent1].[Name] AS [Name], 
        [Extent1].[Description] AS [Description], 
        [Extent1].[ImgUrl] AS [ImgUrl], 
        [Extent1].[StatusId] AS [StatusId], 
        [Extent1].[WeChatUrl] AS [WeChatUrl], 
        [Extent1].[PaperId] AS [PaperId], 
        [Extent1].[PrizeName] AS [PrizeName], 
        [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
        [Extent1].[VisitCount] AS [VisitCount], 
        [Extent1].[ForwardCount] AS [ForwardCount], 
        [Extent1].[AnswerCount] AS [AnswerCount], 
        [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
        [Extent1].[PrizeCount] AS [PrizeCount], 
        [Extent1].[StartTime] AS [StartTime], 
        [Extent1].[ExamEndTime] AS [ExamEndTime], 
        [Extent1].[RewardTime] AS [RewardTime], 
        [Extent1].[IsDeleted] AS [IsDeleted], 
        [Extent1].[CreateDateTime] AS [CreateDateTime]
        FROM  [dbo].[T_Activities] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[ActivityId]
        WHERE ([Extent2].[UserId] = @p__linq__0) AND ([Extent1].[Id] = @p__linq__1)
    )  AS [Limit1]
2017-11-29 16:52:32,085 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:32,085 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '17' (Type = Int64, IsNullable = false)

2017-11-29 16:52:32,085 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:32,085 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,088 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:32,088 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:32,088 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,089 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,090 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,090 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Activities]
SET [PrizeCount] = @0
WHERE ([Id] = @1)

2017-11-29 16:52:32,090 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '7' (Type = Int64)

2017-11-29 16:52:32,090 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '16' (Type = Int64)

2017-11-29 16:52:32,091 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,091 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:52:32,091 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:32,091 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [WinCount] = @0, [IsWon] = @1
WHERE ([Id] = @2)

2017-11-29 16:52:32,091 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2017-11-29 16:52:32,091 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: 'True' (Type = Boolean)

2017-11-29 16:52:32,091 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @2: '17' (Type = Int64)

2017-11-29 16:52:32,091 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,093 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2017-11-29 16:52:32,093 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:32,094 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,094 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,095 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,095 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:52:32,095 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:32,095 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '17' (Type = Int64, IsNullable = false)

2017-11-29 16:52:32,095 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,099 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:32,099 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:32,099 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,099 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,100 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,100 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [LoginErrorTimes] = @0
WHERE ([Id] = @1)

2017-11-29 16:52:32,101 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '0' (Type = Int32)

2017-11-29 16:52:32,101 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '17' (Type = Int64)

2017-11-29 16:52:32,101 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,101 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:52:32,102 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:32,103 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:32,103 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:32 +08:00

2017-11-29 16:52:34,614 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:34 +08:00

2017-11-29 16:52:34,614 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:52:34,614 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:34,614 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:34,614 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:34 +08:00

2017-11-29 16:52:34,617 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:34,617 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:34,617 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:34 +08:00

2017-11-29 16:52:34,617 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:34 +08:00

2017-11-29 16:52:34,617 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:52:34,617 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:34,617 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:34,617 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:34 +08:00

2017-11-29 16:52:34,619 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:52:34,619 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:34,619 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:34 +08:00

2017-11-29 16:52:34,620 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:34 +08:00

2017-11-29 16:52:34,620 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:52:34,620 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:34,620 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:34,620 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:34 +08:00

2017-11-29 16:52:34,623 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:34,623 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:34,623 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:34 +08:00

2017-11-29 16:52:34,624 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:34 +08:00

2017-11-29 16:52:34,624 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:52:34,624 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:34,624 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:34,624 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:34 +08:00

2017-11-29 16:52:34,625 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:52:34,625 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:34,626 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:34 +08:00

2017-11-29 16:52:34,626 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:34 +08:00

2017-11-29 16:52:34,626 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:52:34,626 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:34,626 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:34,627 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:34 +08:00

2017-11-29 16:52:34,629 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:34,629 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:34,630 [49] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:34 +08:00

2017-11-29 16:52:38,149 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,150 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:52:38,150 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:38,150 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:38,150 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,152 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:38,152 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:38,152 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,153 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,153 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:52:38,153 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:38,153 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:38,153 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,154 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:52:38,154 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:38,154 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,155 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,155 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:52:38,155 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:38,155 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '18' (Type = Int64, IsNullable = false)

2017-11-29 16:52:38,155 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,157 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:52:38,157 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:38,157 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,157 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,158 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Limit1].[Id] AS [Id], 
    [Limit1].[Num] AS [Num], 
    [Limit1].[Name] AS [Name], 
    [Limit1].[Description] AS [Description], 
    [Limit1].[ImgUrl] AS [ImgUrl], 
    [Limit1].[StatusId] AS [StatusId], 
    [Limit1].[WeChatUrl] AS [WeChatUrl], 
    [Limit1].[PaperId] AS [PaperId], 
    [Limit1].[PrizeName] AS [PrizeName], 
    [Limit1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Limit1].[VisitCount] AS [VisitCount], 
    [Limit1].[ForwardCount] AS [ForwardCount], 
    [Limit1].[AnswerCount] AS [AnswerCount], 
    [Limit1].[HavePrizeCount] AS [HavePrizeCount], 
    [Limit1].[PrizeCount] AS [PrizeCount], 
    [Limit1].[StartTime] AS [StartTime], 
    [Limit1].[ExamEndTime] AS [ExamEndTime], 
    [Limit1].[RewardTime] AS [RewardTime], 
    [Limit1].[IsDeleted] AS [IsDeleted], 
    [Limit1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT TOP (2) 
        [Extent1].[Id] AS [Id], 
        [Extent1].[Num] AS [Num], 
        [Extent1].[Name] AS [Name], 
        [Extent1].[Description] AS [Description], 
        [Extent1].[ImgUrl] AS [ImgUrl], 
        [Extent1].[StatusId] AS [StatusId], 
        [Extent1].[WeChatUrl] AS [WeChatUrl], 
        [Extent1].[PaperId] AS [PaperId], 
        [Extent1].[PrizeName] AS [PrizeName], 
        [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
        [Extent1].[VisitCount] AS [VisitCount], 
        [Extent1].[ForwardCount] AS [ForwardCount], 
        [Extent1].[AnswerCount] AS [AnswerCount], 
        [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
        [Extent1].[PrizeCount] AS [PrizeCount], 
        [Extent1].[StartTime] AS [StartTime], 
        [Extent1].[ExamEndTime] AS [ExamEndTime], 
        [Extent1].[RewardTime] AS [RewardTime], 
        [Extent1].[IsDeleted] AS [IsDeleted], 
        [Extent1].[CreateDateTime] AS [CreateDateTime]
        FROM  [dbo].[T_Activities] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[ActivityId]
        WHERE ([Extent2].[UserId] = @p__linq__0) AND ([Extent1].[Id] = @p__linq__1)
    )  AS [Limit1]
2017-11-29 16:52:38,158 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:38,158 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '18' (Type = Int64, IsNullable = false)

2017-11-29 16:52:38,158 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:38,158 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,160 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:38,161 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:38,161 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,161 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,162 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,163 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Activities]
SET [PrizeCount] = @0
WHERE ([Id] = @1)

2017-11-29 16:52:38,163 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '8' (Type = Int64)

2017-11-29 16:52:38,163 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '16' (Type = Int64)

2017-11-29 16:52:38,163 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,164 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:52:38,164 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:38,164 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [WinCount] = @0, [IsWon] = @1
WHERE ([Id] = @2)

2017-11-29 16:52:38,164 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2017-11-29 16:52:38,164 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: 'True' (Type = Boolean)

2017-11-29 16:52:38,164 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @2: '18' (Type = Int64)

2017-11-29 16:52:38,164 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,165 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2017-11-29 16:52:38,165 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:38,166 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,166 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,167 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,167 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:52:38,167 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:38,167 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '18' (Type = Int64, IsNullable = false)

2017-11-29 16:52:38,167 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,170 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:38,170 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:38,170 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,170 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,171 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,171 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [LoginErrorTimes] = @0
WHERE ([Id] = @1)

2017-11-29 16:52:38,171 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '0' (Type = Int32)

2017-11-29 16:52:38,171 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '18' (Type = Int64)

2017-11-29 16:52:38,171 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,172 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:52:38,172 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:38,173 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:38,174 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:38 +08:00

2017-11-29 16:52:39,230 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:39 +08:00

2017-11-29 16:52:39,231 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:52:39,231 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:39,231 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:39,231 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:39 +08:00

2017-11-29 16:52:39,234 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:39,234 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:39,234 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:39 +08:00

2017-11-29 16:52:39,234 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:39 +08:00

2017-11-29 16:52:39,234 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:52:39,234 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:39,234 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:39,235 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:39 +08:00

2017-11-29 16:52:39,236 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:52:39,236 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:39,236 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:39 +08:00

2017-11-29 16:52:39,237 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:39 +08:00

2017-11-29 16:52:39,237 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:52:39,237 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:39,237 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:39,237 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:39 +08:00

2017-11-29 16:52:39,239 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:39,240 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:39,240 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:39 +08:00

2017-11-29 16:52:39,240 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:39 +08:00

2017-11-29 16:52:39,241 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:52:39,241 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:39,241 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:39,241 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:39 +08:00

2017-11-29 16:52:39,242 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:52:39,242 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:39,242 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:39 +08:00

2017-11-29 16:52:39,242 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:39 +08:00

2017-11-29 16:52:39,243 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:52:39,243 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:39,243 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:39,243 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:39 +08:00

2017-11-29 16:52:39,246 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:39,246 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:39,246 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:39 +08:00

2017-11-29 16:52:44,056 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:44 +08:00

2017-11-29 16:52:44,057 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:52:44,057 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:44,057 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:44,057 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:44 +08:00

2017-11-29 16:52:44,059 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:44,059 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:44,060 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:44 +08:00

2017-11-29 16:52:44,060 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:44 +08:00

2017-11-29 16:52:44,060 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:52:44,060 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:44,060 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:44,060 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:44 +08:00

2017-11-29 16:52:44,061 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 16:52:44,061 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:44,061 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:44 +08:00

2017-11-29 16:52:44,062 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:44 +08:00

2017-11-29 16:52:44,062 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:52:44,062 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:44,062 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:44,062 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:44 +08:00

2017-11-29 16:52:44,064 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:44,065 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:44,065 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:44 +08:00

2017-11-29 16:52:44,065 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:44 +08:00

2017-11-29 16:52:44,065 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:52:44,066 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:44,066 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:44,066 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:44 +08:00

2017-11-29 16:52:44,067 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:52:44,067 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:44,067 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:44 +08:00

2017-11-29 16:52:44,067 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:44 +08:00

2017-11-29 16:52:44,067 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:52:44,069 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:44,069 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:44,069 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:44 +08:00

2017-11-29 16:52:44,071 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:44,071 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:44,071 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:44 +08:00

2017-11-29 16:52:46,632 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:46 +08:00

2017-11-29 16:52:46,632 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:52:46,632 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:46,632 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:46,633 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:46 +08:00

2017-11-29 16:52:46,635 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:46,635 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:46,635 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:46 +08:00

2017-11-29 16:52:46,636 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:46 +08:00

2017-11-29 16:52:46,636 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:52:46,636 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:46,636 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:46,636 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:46 +08:00

2017-11-29 16:52:46,637 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:52:46,637 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:46,637 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:46 +08:00

2017-11-29 16:52:46,638 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:46 +08:00

2017-11-29 16:52:46,638 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:52:46,638 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:46,638 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:46,638 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:46 +08:00

2017-11-29 16:52:46,641 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:46,641 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:46,641 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:46 +08:00

2017-11-29 16:52:46,641 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:46 +08:00

2017-11-29 16:52:46,642 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:52:46,642 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:46,642 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:46,642 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:46 +08:00

2017-11-29 16:52:46,643 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 16:52:46,643 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:46,643 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:46 +08:00

2017-11-29 16:52:46,643 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:46 +08:00

2017-11-29 16:52:46,644 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:52:46,644 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:46,644 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:46,644 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:46 +08:00

2017-11-29 16:52:46,647 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:46,647 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:46,647 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:46 +08:00

2017-11-29 16:52:49,376 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:49 +08:00

2017-11-29 16:52:49,377 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:52:49,377 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:49,377 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:49,377 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:49 +08:00

2017-11-29 16:52:49,382 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2017-11-29 16:52:49,382 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:49,382 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:49 +08:00

2017-11-29 16:52:49,382 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:49 +08:00

2017-11-29 16:52:49,382 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:52:49,382 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:49,382 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:49,382 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:49 +08:00

2017-11-29 16:52:49,384 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:52:49,384 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:49,384 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:49 +08:00

2017-11-29 16:52:49,384 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:49 +08:00

2017-11-29 16:52:49,385 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:52:49,385 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:49,385 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:49,385 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:49 +08:00

2017-11-29 16:52:49,387 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:49,387 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:49,388 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:49 +08:00

2017-11-29 16:52:49,388 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:49 +08:00

2017-11-29 16:52:49,389 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:52:49,389 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:49,389 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:49,389 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:49 +08:00

2017-11-29 16:52:49,390 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:52:49,390 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:49,390 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:49 +08:00

2017-11-29 16:52:49,391 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:49 +08:00

2017-11-29 16:52:49,391 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:52:49,391 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:49,391 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:49,391 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:49 +08:00

2017-11-29 16:52:49,394 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:49,394 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:49,394 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:49 +08:00

2017-11-29 16:52:51,184 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,185 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:52:51,185 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:51,185 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:51,185 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,187 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:51,187 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:51,188 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,188 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,188 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:52:51,188 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:51,188 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:51,188 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,189 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:52:51,189 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:51,189 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,190 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,190 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:52:51,190 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:51,190 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '21' (Type = Int64, IsNullable = false)

2017-11-29 16:52:51,190 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,192 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:51,193 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:51,193 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,193 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,193 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Limit1].[Id] AS [Id], 
    [Limit1].[Num] AS [Num], 
    [Limit1].[Name] AS [Name], 
    [Limit1].[Description] AS [Description], 
    [Limit1].[ImgUrl] AS [ImgUrl], 
    [Limit1].[StatusId] AS [StatusId], 
    [Limit1].[WeChatUrl] AS [WeChatUrl], 
    [Limit1].[PaperId] AS [PaperId], 
    [Limit1].[PrizeName] AS [PrizeName], 
    [Limit1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Limit1].[VisitCount] AS [VisitCount], 
    [Limit1].[ForwardCount] AS [ForwardCount], 
    [Limit1].[AnswerCount] AS [AnswerCount], 
    [Limit1].[HavePrizeCount] AS [HavePrizeCount], 
    [Limit1].[PrizeCount] AS [PrizeCount], 
    [Limit1].[StartTime] AS [StartTime], 
    [Limit1].[ExamEndTime] AS [ExamEndTime], 
    [Limit1].[RewardTime] AS [RewardTime], 
    [Limit1].[IsDeleted] AS [IsDeleted], 
    [Limit1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT TOP (2) 
        [Extent1].[Id] AS [Id], 
        [Extent1].[Num] AS [Num], 
        [Extent1].[Name] AS [Name], 
        [Extent1].[Description] AS [Description], 
        [Extent1].[ImgUrl] AS [ImgUrl], 
        [Extent1].[StatusId] AS [StatusId], 
        [Extent1].[WeChatUrl] AS [WeChatUrl], 
        [Extent1].[PaperId] AS [PaperId], 
        [Extent1].[PrizeName] AS [PrizeName], 
        [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
        [Extent1].[VisitCount] AS [VisitCount], 
        [Extent1].[ForwardCount] AS [ForwardCount], 
        [Extent1].[AnswerCount] AS [AnswerCount], 
        [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
        [Extent1].[PrizeCount] AS [PrizeCount], 
        [Extent1].[StartTime] AS [StartTime], 
        [Extent1].[ExamEndTime] AS [ExamEndTime], 
        [Extent1].[RewardTime] AS [RewardTime], 
        [Extent1].[IsDeleted] AS [IsDeleted], 
        [Extent1].[CreateDateTime] AS [CreateDateTime]
        FROM  [dbo].[T_Activities] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[ActivityId]
        WHERE ([Extent2].[UserId] = @p__linq__0) AND ([Extent1].[Id] = @p__linq__1)
    )  AS [Limit1]
2017-11-29 16:52:51,194 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:51,194 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '21' (Type = Int64, IsNullable = false)

2017-11-29 16:52:51,194 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:51,194 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,196 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:51,196 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:51,196 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,197 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,198 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,198 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Activities]
SET [PrizeCount] = @0
WHERE ([Id] = @1)

2017-11-29 16:52:51,198 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '9' (Type = Int64)

2017-11-29 16:52:51,198 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '16' (Type = Int64)

2017-11-29 16:52:51,198 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,199 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:52:51,199 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:51,199 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [WinCount] = @0, [IsWon] = @1
WHERE ([Id] = @2)

2017-11-29 16:52:51,199 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '1' (Type = Int64)

2017-11-29 16:52:51,199 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: 'True' (Type = Boolean)

2017-11-29 16:52:51,199 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @2: '21' (Type = Int64)

2017-11-29 16:52:51,199 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,200 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2017-11-29 16:52:51,200 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:51,202 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,202 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,202 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,202 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:52:51,202 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:51,202 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '21' (Type = Int64, IsNullable = false)

2017-11-29 16:52:51,203 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,205 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:51,205 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:51,205 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,205 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,206 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,207 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [LoginErrorTimes] = @0
WHERE ([Id] = @1)

2017-11-29 16:52:51,207 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '0' (Type = Int32)

2017-11-29 16:52:51,207 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '21' (Type = Int64)

2017-11-29 16:52:51,207 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,208 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:52:51,208 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:51,211 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:51,212 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:51 +08:00

2017-11-29 16:52:52,345 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:52 +08:00

2017-11-29 16:52:52,346 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:52:52,346 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:52,346 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:52,346 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:52 +08:00

2017-11-29 16:52:52,349 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:52,349 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:52,349 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:52 +08:00

2017-11-29 16:52:52,349 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:52 +08:00

2017-11-29 16:52:52,350 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:52:52,350 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:52,350 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:52:52,350 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:52 +08:00

2017-11-29 16:52:52,351 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:52:52,351 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:52,351 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:52 +08:00

2017-11-29 16:52:52,352 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:52 +08:00

2017-11-29 16:52:52,352 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:52:52,352 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:52,352 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:52,352 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:52 +08:00

2017-11-29 16:52:52,355 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:52,355 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:52,355 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:52 +08:00

2017-11-29 16:52:52,356 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:52 +08:00

2017-11-29 16:52:52,356 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:52:52,356 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:52,356 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:52,356 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:52 +08:00

2017-11-29 16:52:52,357 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:52:52,358 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:52,358 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:52 +08:00

2017-11-29 16:52:52,358 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:52:52 +08:00

2017-11-29 16:52:52,358 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:52:52,358 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:52,358 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:52:52,358 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:52:52 +08:00

2017-11-29 16:52:52,361 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:52:52,361 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:52:52,361 [39] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:52:52 +08:00

2017-11-29 16:55:41,249 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:55:41 +08:00

2017-11-29 16:55:41,250 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:55:41,250 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:55:41,250 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:55:41,250 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:55:41 +08:00

2017-11-29 16:55:41,252 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:55:41,252 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:55:41,253 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:55:41 +08:00

2017-11-29 16:55:41,253 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:55:41 +08:00

2017-11-29 16:55:41,253 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:55:41,253 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:55:41,253 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:55:41,253 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:55:41 +08:00

2017-11-29 16:55:41,255 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:55:41,255 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:55:41,255 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:55:41 +08:00

2017-11-29 16:55:41,256 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:55:41 +08:00

2017-11-29 16:55:41,256 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:55:41,256 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:55:41,256 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:55:41,256 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:55:41 +08:00

2017-11-29 16:55:41,259 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:55:41,259 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:55:41,259 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:55:41 +08:00

2017-11-29 16:55:41,259 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:55:41 +08:00

2017-11-29 16:55:41,260 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:55:41,260 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:55:41,260 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:55:41,260 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:55:41 +08:00

2017-11-29 16:55:41,262 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:55:41,262 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:55:41,262 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:55:41 +08:00

2017-11-29 16:55:41,263 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:55:41 +08:00

2017-11-29 16:55:41,263 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:55:41,263 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:55:41,263 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:55:41,263 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:55:41 +08:00

2017-11-29 16:55:41,266 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:55:41,266 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:55:41,266 [40] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:55:41 +08:00

2017-11-29 16:56:25,079 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:25 +08:00

2017-11-29 16:56:25,080 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:56:25,080 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:25,080 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:56:25,080 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:25 +08:00

2017-11-29 16:56:25,083 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:25,083 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:25,083 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:25 +08:00

2017-11-29 16:56:25,083 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:25 +08:00

2017-11-29 16:56:25,083 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:56:25,083 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:25,083 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:56:25,083 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:25 +08:00

2017-11-29 16:56:25,084 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:56:25,084 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:25,085 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:25 +08:00

2017-11-29 16:56:25,085 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:25 +08:00

2017-11-29 16:56:25,085 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:56:25,086 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:25,086 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:56:25,086 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:25 +08:00

2017-11-29 16:56:25,088 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:25,088 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:25,088 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:25 +08:00

2017-11-29 16:56:25,089 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:25 +08:00

2017-11-29 16:56:25,089 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:56:25,089 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:25,089 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:56:25,089 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:25 +08:00

2017-11-29 16:56:25,090 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 16:56:25,090 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:25,090 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:25 +08:00

2017-11-29 16:56:25,090 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:25 +08:00

2017-11-29 16:56:25,091 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:56:25,091 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:25,091 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:56:25,091 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:25 +08:00

2017-11-29 16:56:25,093 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:25,093 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:25,094 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:25 +08:00

2017-11-29 16:56:29,061 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:29 +08:00

2017-11-29 16:56:29,061 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:56:29,062 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:29,062 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:56:29,062 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:29 +08:00

2017-11-29 16:56:29,064 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:29,064 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:29,064 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:29 +08:00

2017-11-29 16:56:29,064 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:29 +08:00

2017-11-29 16:56:29,064 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:56:29,064 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:29,065 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:56:29,065 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:29 +08:00

2017-11-29 16:56:29,066 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 16:56:29,066 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:29,066 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:29 +08:00

2017-11-29 16:56:29,066 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:29 +08:00

2017-11-29 16:56:29,067 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:56:29,067 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:29,067 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:56:29,067 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:29 +08:00

2017-11-29 16:56:29,069 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:29,069 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:29,069 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:29 +08:00

2017-11-29 16:56:29,070 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:29 +08:00

2017-11-29 16:56:29,070 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:56:29,070 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:29,070 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:56:29,070 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:29 +08:00

2017-11-29 16:56:29,071 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 16:56:29,071 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:29,071 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:29 +08:00

2017-11-29 16:56:29,071 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:29 +08:00

2017-11-29 16:56:29,072 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:56:29,072 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:29,072 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:56:29,072 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:29 +08:00

2017-11-29 16:56:29,074 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:29,074 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:29,074 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:29 +08:00

2017-11-29 16:56:34,415 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,416 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:56:34,416 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,416 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:56:34,416 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,419 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:34,419 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,419 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,419 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,419 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:56:34,419 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,419 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:56:34,419 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,421 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:56:34,421 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,421 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,421 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,422 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:56:34,422 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,422 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '21' (Type = Int64, IsNullable = false)

2017-11-29 16:56:34,422 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,424 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:34,424 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,425 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,425 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,425 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Limit1].[Id] AS [Id], 
    [Limit1].[Num] AS [Num], 
    [Limit1].[Name] AS [Name], 
    [Limit1].[Description] AS [Description], 
    [Limit1].[ImgUrl] AS [ImgUrl], 
    [Limit1].[StatusId] AS [StatusId], 
    [Limit1].[WeChatUrl] AS [WeChatUrl], 
    [Limit1].[PaperId] AS [PaperId], 
    [Limit1].[PrizeName] AS [PrizeName], 
    [Limit1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Limit1].[VisitCount] AS [VisitCount], 
    [Limit1].[ForwardCount] AS [ForwardCount], 
    [Limit1].[AnswerCount] AS [AnswerCount], 
    [Limit1].[HavePrizeCount] AS [HavePrizeCount], 
    [Limit1].[PrizeCount] AS [PrizeCount], 
    [Limit1].[StartTime] AS [StartTime], 
    [Limit1].[ExamEndTime] AS [ExamEndTime], 
    [Limit1].[RewardTime] AS [RewardTime], 
    [Limit1].[IsDeleted] AS [IsDeleted], 
    [Limit1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT TOP (2) 
        [Extent1].[Id] AS [Id], 
        [Extent1].[Num] AS [Num], 
        [Extent1].[Name] AS [Name], 
        [Extent1].[Description] AS [Description], 
        [Extent1].[ImgUrl] AS [ImgUrl], 
        [Extent1].[StatusId] AS [StatusId], 
        [Extent1].[WeChatUrl] AS [WeChatUrl], 
        [Extent1].[PaperId] AS [PaperId], 
        [Extent1].[PrizeName] AS [PrizeName], 
        [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
        [Extent1].[VisitCount] AS [VisitCount], 
        [Extent1].[ForwardCount] AS [ForwardCount], 
        [Extent1].[AnswerCount] AS [AnswerCount], 
        [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
        [Extent1].[PrizeCount] AS [PrizeCount], 
        [Extent1].[StartTime] AS [StartTime], 
        [Extent1].[ExamEndTime] AS [ExamEndTime], 
        [Extent1].[RewardTime] AS [RewardTime], 
        [Extent1].[IsDeleted] AS [IsDeleted], 
        [Extent1].[CreateDateTime] AS [CreateDateTime]
        FROM  [dbo].[T_Activities] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[ActivityId]
        WHERE ([Extent2].[UserId] = @p__linq__0) AND ([Extent1].[Id] = @p__linq__1)
    )  AS [Limit1]
2017-11-29 16:56:34,425 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,425 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '21' (Type = Int64, IsNullable = false)

2017-11-29 16:56:34,425 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:56:34,425 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,428 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:34,428 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,428 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,429 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,430 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,430 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Activities]
SET [PrizeCount] = @0
WHERE ([Id] = @1)

2017-11-29 16:56:34,430 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '10' (Type = Int64)

2017-11-29 16:56:34,430 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '16' (Type = Int64)

2017-11-29 16:56:34,430 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,431 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:56:34,431 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,432 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [WinCount] = @0, [IsWon] = @1
WHERE ([Id] = @2)

2017-11-29 16:56:34,432 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2017-11-29 16:56:34,432 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: 'True' (Type = Boolean)

2017-11-29 16:56:34,432 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @2: '21' (Type = Int64)

2017-11-29 16:56:34,432 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,433 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2017-11-29 16:56:34,433 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,434 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,434 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,435 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,435 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:56:34,435 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,435 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '21' (Type = Int64, IsNullable = false)

2017-11-29 16:56:34,435 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,437 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:56:34,437 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,437 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,438 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,438 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,439 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [LoginErrorTimes] = @0
WHERE ([Id] = @1)

2017-11-29 16:56:34,439 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '0' (Type = Int32)

2017-11-29 16:56:34,439 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '21' (Type = Int64)

2017-11-29 16:56:34,439 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,440 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:56:34,440 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,441 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,441 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,442 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,442 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:56:34,442 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,442 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '20' (Type = Int64, IsNullable = false)

2017-11-29 16:56:34,442 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,444 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:34,444 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,445 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,445 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,445 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Limit1].[Id] AS [Id], 
    [Limit1].[Num] AS [Num], 
    [Limit1].[Name] AS [Name], 
    [Limit1].[Description] AS [Description], 
    [Limit1].[ImgUrl] AS [ImgUrl], 
    [Limit1].[StatusId] AS [StatusId], 
    [Limit1].[WeChatUrl] AS [WeChatUrl], 
    [Limit1].[PaperId] AS [PaperId], 
    [Limit1].[PrizeName] AS [PrizeName], 
    [Limit1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Limit1].[VisitCount] AS [VisitCount], 
    [Limit1].[ForwardCount] AS [ForwardCount], 
    [Limit1].[AnswerCount] AS [AnswerCount], 
    [Limit1].[HavePrizeCount] AS [HavePrizeCount], 
    [Limit1].[PrizeCount] AS [PrizeCount], 
    [Limit1].[StartTime] AS [StartTime], 
    [Limit1].[ExamEndTime] AS [ExamEndTime], 
    [Limit1].[RewardTime] AS [RewardTime], 
    [Limit1].[IsDeleted] AS [IsDeleted], 
    [Limit1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT TOP (2) 
        [Extent1].[Id] AS [Id], 
        [Extent1].[Num] AS [Num], 
        [Extent1].[Name] AS [Name], 
        [Extent1].[Description] AS [Description], 
        [Extent1].[ImgUrl] AS [ImgUrl], 
        [Extent1].[StatusId] AS [StatusId], 
        [Extent1].[WeChatUrl] AS [WeChatUrl], 
        [Extent1].[PaperId] AS [PaperId], 
        [Extent1].[PrizeName] AS [PrizeName], 
        [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
        [Extent1].[VisitCount] AS [VisitCount], 
        [Extent1].[ForwardCount] AS [ForwardCount], 
        [Extent1].[AnswerCount] AS [AnswerCount], 
        [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
        [Extent1].[PrizeCount] AS [PrizeCount], 
        [Extent1].[StartTime] AS [StartTime], 
        [Extent1].[ExamEndTime] AS [ExamEndTime], 
        [Extent1].[RewardTime] AS [RewardTime], 
        [Extent1].[IsDeleted] AS [IsDeleted], 
        [Extent1].[CreateDateTime] AS [CreateDateTime]
        FROM  [dbo].[T_Activities] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[ActivityId]
        WHERE ([Extent2].[UserId] = @p__linq__0) AND ([Extent1].[Id] = @p__linq__1)
    )  AS [Limit1]
2017-11-29 16:56:34,445 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,445 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '20' (Type = Int64, IsNullable = false)

2017-11-29 16:56:34,445 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:56:34,445 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,448 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:34,448 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,448 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,449 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,450 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,450 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Activities]
SET [PrizeCount] = @0
WHERE ([Id] = @1)

2017-11-29 16:56:34,450 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '11' (Type = Int64)

2017-11-29 16:56:34,450 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '16' (Type = Int64)

2017-11-29 16:56:34,450 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,451 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:56:34,451 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,451 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [WinCount] = @0, [IsWon] = @1
WHERE ([Id] = @2)

2017-11-29 16:56:34,451 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2017-11-29 16:56:34,451 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: 'True' (Type = Boolean)

2017-11-29 16:56:34,451 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @2: '20' (Type = Int64)

2017-11-29 16:56:34,451 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,453 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2017-11-29 16:56:34,453 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,454 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,454 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,454 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,455 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:56:34,455 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,455 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '20' (Type = Int64, IsNullable = false)

2017-11-29 16:56:34,455 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,457 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:34,457 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,457 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,458 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,459 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,459 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [LoginErrorTimes] = @0
WHERE ([Id] = @1)

2017-11-29 16:56:34,459 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '0' (Type = Int32)

2017-11-29 16:56:34,459 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '20' (Type = Int64)

2017-11-29 16:56:34,459 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,460 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:56:34,460 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,461 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,461 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,462 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,462 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:56:34,462 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,462 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '19' (Type = Int64, IsNullable = false)

2017-11-29 16:56:34,462 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,465 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2017-11-29 16:56:34,466 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,466 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,466 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,466 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Limit1].[Id] AS [Id], 
    [Limit1].[Num] AS [Num], 
    [Limit1].[Name] AS [Name], 
    [Limit1].[Description] AS [Description], 
    [Limit1].[ImgUrl] AS [ImgUrl], 
    [Limit1].[StatusId] AS [StatusId], 
    [Limit1].[WeChatUrl] AS [WeChatUrl], 
    [Limit1].[PaperId] AS [PaperId], 
    [Limit1].[PrizeName] AS [PrizeName], 
    [Limit1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Limit1].[VisitCount] AS [VisitCount], 
    [Limit1].[ForwardCount] AS [ForwardCount], 
    [Limit1].[AnswerCount] AS [AnswerCount], 
    [Limit1].[HavePrizeCount] AS [HavePrizeCount], 
    [Limit1].[PrizeCount] AS [PrizeCount], 
    [Limit1].[StartTime] AS [StartTime], 
    [Limit1].[ExamEndTime] AS [ExamEndTime], 
    [Limit1].[RewardTime] AS [RewardTime], 
    [Limit1].[IsDeleted] AS [IsDeleted], 
    [Limit1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT TOP (2) 
        [Extent1].[Id] AS [Id], 
        [Extent1].[Num] AS [Num], 
        [Extent1].[Name] AS [Name], 
        [Extent1].[Description] AS [Description], 
        [Extent1].[ImgUrl] AS [ImgUrl], 
        [Extent1].[StatusId] AS [StatusId], 
        [Extent1].[WeChatUrl] AS [WeChatUrl], 
        [Extent1].[PaperId] AS [PaperId], 
        [Extent1].[PrizeName] AS [PrizeName], 
        [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
        [Extent1].[VisitCount] AS [VisitCount], 
        [Extent1].[ForwardCount] AS [ForwardCount], 
        [Extent1].[AnswerCount] AS [AnswerCount], 
        [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
        [Extent1].[PrizeCount] AS [PrizeCount], 
        [Extent1].[StartTime] AS [StartTime], 
        [Extent1].[ExamEndTime] AS [ExamEndTime], 
        [Extent1].[RewardTime] AS [RewardTime], 
        [Extent1].[IsDeleted] AS [IsDeleted], 
        [Extent1].[CreateDateTime] AS [CreateDateTime]
        FROM  [dbo].[T_Activities] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[ActivityId]
        WHERE ([Extent2].[UserId] = @p__linq__0) AND ([Extent1].[Id] = @p__linq__1)
    )  AS [Limit1]
2017-11-29 16:56:34,466 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,466 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '19' (Type = Int64, IsNullable = false)

2017-11-29 16:56:34,467 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:56:34,467 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,469 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:34,469 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,470 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,470 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,471 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,472 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Activities]
SET [PrizeCount] = @0
WHERE ([Id] = @1)

2017-11-29 16:56:34,472 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '12' (Type = Int64)

2017-11-29 16:56:34,472 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '16' (Type = Int64)

2017-11-29 16:56:34,472 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,473 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:56:34,473 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,473 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [WinCount] = @0, [IsWon] = @1
WHERE ([Id] = @2)

2017-11-29 16:56:34,473 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '3' (Type = Int64)

2017-11-29 16:56:34,473 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: 'True' (Type = Boolean)

2017-11-29 16:56:34,473 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @2: '19' (Type = Int64)

2017-11-29 16:56:34,473 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,474 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2017-11-29 16:56:34,474 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,475 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,475 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,477 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,477 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:56:34,477 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,477 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '19' (Type = Int64, IsNullable = false)

2017-11-29 16:56:34,478 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,480 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:34,480 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,481 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,481 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,482 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,482 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [LoginErrorTimes] = @0
WHERE ([Id] = @1)

2017-11-29 16:56:34,482 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '0' (Type = Int32)

2017-11-29 16:56:34,482 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '19' (Type = Int64)

2017-11-29 16:56:34,482 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,483 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2017-11-29 16:56:34,483 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:34,485 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:34,485 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:34 +08:00

2017-11-29 16:56:35,696 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:35 +08:00

2017-11-29 16:56:35,696 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:56:35,696 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:35,697 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:56:35,697 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:35 +08:00

2017-11-29 16:56:35,699 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:35,699 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:35,700 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:35 +08:00

2017-11-29 16:56:35,700 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:35 +08:00

2017-11-29 16:56:35,700 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:56:35,700 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:35,700 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:56:35,700 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:35 +08:00

2017-11-29 16:56:35,701 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:56:35,701 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:35,701 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:35 +08:00

2017-11-29 16:56:35,702 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:35 +08:00

2017-11-29 16:56:35,703 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:56:35,703 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:35,703 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:56:35,703 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:35 +08:00

2017-11-29 16:56:35,706 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:35,706 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:35,706 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:35 +08:00

2017-11-29 16:56:35,707 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:35 +08:00

2017-11-29 16:56:35,707 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:56:35,707 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:35,707 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:56:35,707 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:35 +08:00

2017-11-29 16:56:35,708 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:56:35,708 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:35,708 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:35 +08:00

2017-11-29 16:56:35,709 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:35 +08:00

2017-11-29 16:56:35,709 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:56:35,709 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:35,709 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:56:35,709 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:35 +08:00

2017-11-29 16:56:35,712 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:35,712 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:35,712 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:35 +08:00

2017-11-29 16:56:40,432 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,433 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:56:40,433 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:40,433 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:56:40,433 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,436 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:40,436 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:40,436 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,436 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,436 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:56:40,436 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:40,436 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:56:40,436 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,437 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:56:40,437 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:40,437 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,438 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,438 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:56:40,438 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:40,439 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '17' (Type = Int64, IsNullable = false)

2017-11-29 16:56:40,439 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,441 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:40,441 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:40,441 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,442 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,442 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Limit1].[Id] AS [Id], 
    [Limit1].[Num] AS [Num], 
    [Limit1].[Name] AS [Name], 
    [Limit1].[Description] AS [Description], 
    [Limit1].[ImgUrl] AS [ImgUrl], 
    [Limit1].[StatusId] AS [StatusId], 
    [Limit1].[WeChatUrl] AS [WeChatUrl], 
    [Limit1].[PaperId] AS [PaperId], 
    [Limit1].[PrizeName] AS [PrizeName], 
    [Limit1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Limit1].[VisitCount] AS [VisitCount], 
    [Limit1].[ForwardCount] AS [ForwardCount], 
    [Limit1].[AnswerCount] AS [AnswerCount], 
    [Limit1].[HavePrizeCount] AS [HavePrizeCount], 
    [Limit1].[PrizeCount] AS [PrizeCount], 
    [Limit1].[StartTime] AS [StartTime], 
    [Limit1].[ExamEndTime] AS [ExamEndTime], 
    [Limit1].[RewardTime] AS [RewardTime], 
    [Limit1].[IsDeleted] AS [IsDeleted], 
    [Limit1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT TOP (2) 
        [Extent1].[Id] AS [Id], 
        [Extent1].[Num] AS [Num], 
        [Extent1].[Name] AS [Name], 
        [Extent1].[Description] AS [Description], 
        [Extent1].[ImgUrl] AS [ImgUrl], 
        [Extent1].[StatusId] AS [StatusId], 
        [Extent1].[WeChatUrl] AS [WeChatUrl], 
        [Extent1].[PaperId] AS [PaperId], 
        [Extent1].[PrizeName] AS [PrizeName], 
        [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
        [Extent1].[VisitCount] AS [VisitCount], 
        [Extent1].[ForwardCount] AS [ForwardCount], 
        [Extent1].[AnswerCount] AS [AnswerCount], 
        [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
        [Extent1].[PrizeCount] AS [PrizeCount], 
        [Extent1].[StartTime] AS [StartTime], 
        [Extent1].[ExamEndTime] AS [ExamEndTime], 
        [Extent1].[RewardTime] AS [RewardTime], 
        [Extent1].[IsDeleted] AS [IsDeleted], 
        [Extent1].[CreateDateTime] AS [CreateDateTime]
        FROM  [dbo].[T_Activities] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[ActivityId]
        WHERE ([Extent2].[UserId] = @p__linq__0) AND ([Extent1].[Id] = @p__linq__1)
    )  AS [Limit1]
2017-11-29 16:56:40,442 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:40,442 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '17' (Type = Int64, IsNullable = false)

2017-11-29 16:56:40,442 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:56:40,442 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,445 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:40,445 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:40,445 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,446 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,447 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,447 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Activities]
SET [PrizeCount] = @0
WHERE ([Id] = @1)

2017-11-29 16:56:40,447 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '13' (Type = Int64)

2017-11-29 16:56:40,447 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '16' (Type = Int64)

2017-11-29 16:56:40,447 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,448 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:56:40,448 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:40,448 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [WinCount] = @0, [IsWon] = @1
WHERE ([Id] = @2)

2017-11-29 16:56:40,448 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '3' (Type = Int64)

2017-11-29 16:56:40,448 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: 'True' (Type = Boolean)

2017-11-29 16:56:40,448 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @2: '17' (Type = Int64)

2017-11-29 16:56:40,448 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,450 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2017-11-29 16:56:40,450 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:40,451 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,451 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,451 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,452 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:56:40,452 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:40,452 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '17' (Type = Int64, IsNullable = false)

2017-11-29 16:56:40,452 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,454 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:40,454 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:40,455 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,455 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,456 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,456 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [LoginErrorTimes] = @0
WHERE ([Id] = @1)

2017-11-29 16:56:40,456 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '0' (Type = Int32)

2017-11-29 16:56:40,456 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '17' (Type = Int64)

2017-11-29 16:56:40,456 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,457 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:56:40,457 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:40,459 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:40,459 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:40 +08:00

2017-11-29 16:56:41,618 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:41 +08:00

2017-11-29 16:56:41,618 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:56:41,618 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:41,618 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:56:41,618 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:41 +08:00

2017-11-29 16:56:41,621 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:41,621 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:41,621 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:41 +08:00

2017-11-29 16:56:41,621 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:41 +08:00

2017-11-29 16:56:41,621 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:56:41,621 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:41,621 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:56:41,622 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:41 +08:00

2017-11-29 16:56:41,623 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:56:41,623 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:41,623 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:41 +08:00

2017-11-29 16:56:41,624 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:41 +08:00

2017-11-29 16:56:41,624 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:56:41,624 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:41,624 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:56:41,624 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:41 +08:00

2017-11-29 16:56:41,627 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:41,627 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:41,627 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:41 +08:00

2017-11-29 16:56:41,627 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:41 +08:00

2017-11-29 16:56:41,628 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:56:41,628 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:41,628 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:56:41,628 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:41 +08:00

2017-11-29 16:56:41,629 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:56:41,629 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:41,629 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:41 +08:00

2017-11-29 16:56:41,629 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:41 +08:00

2017-11-29 16:56:41,630 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:56:41,630 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:41,630 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:56:41,630 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:41 +08:00

2017-11-29 16:56:41,633 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:41,633 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:41,633 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:41 +08:00

2017-11-29 16:56:46,533 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:46 +08:00

2017-11-29 16:56:46,534 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:56:46,534 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:46,534 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:56:46,534 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:46 +08:00

2017-11-29 16:56:46,537 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:46,537 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:46,537 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:46 +08:00

2017-11-29 16:56:46,537 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:46 +08:00

2017-11-29 16:56:46,537 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:56:46,537 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:46,537 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:56:46,537 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:46 +08:00

2017-11-29 16:56:46,538 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:56:46,538 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:46,539 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:46 +08:00

2017-11-29 16:56:46,539 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:46 +08:00

2017-11-29 16:56:46,540 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:56:46,540 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:46,540 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:56:46,540 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:46 +08:00

2017-11-29 16:56:46,542 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:46,542 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:46,543 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:46 +08:00

2017-11-29 16:56:46,543 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:46 +08:00

2017-11-29 16:56:46,543 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:56:46,543 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:46,543 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:56:46,543 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:46 +08:00

2017-11-29 16:56:46,544 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 16:56:46,544 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:46,544 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:46 +08:00

2017-11-29 16:56:46,545 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:46 +08:00

2017-11-29 16:56:46,545 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:56:46,545 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:46,545 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:56:46,545 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:46 +08:00

2017-11-29 16:56:46,548 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:46,548 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:46,548 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:46 +08:00

2017-11-29 16:56:47,876 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:47 +08:00

2017-11-29 16:56:47,877 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:56:47,877 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:47,877 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:56:47,877 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:47 +08:00

2017-11-29 16:56:47,880 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2017-11-29 16:56:47,880 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:47,881 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:47 +08:00

2017-11-29 16:56:47,881 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:47 +08:00

2017-11-29 16:56:47,881 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:56:47,881 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:47,881 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:56:47,881 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:47 +08:00

2017-11-29 16:56:47,882 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:56:47,882 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:47,882 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:47 +08:00

2017-11-29 16:56:47,883 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:47 +08:00

2017-11-29 16:56:47,883 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:56:47,883 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:47,883 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:56:47,883 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:47 +08:00

2017-11-29 16:56:47,886 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:47,886 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:47,886 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:47 +08:00

2017-11-29 16:56:47,886 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:47 +08:00

2017-11-29 16:56:47,887 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:56:47,887 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:47,887 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:56:47,887 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:47 +08:00

2017-11-29 16:56:47,888 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:56:47,888 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:47,888 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:47 +08:00

2017-11-29 16:56:47,888 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:56:47 +08:00

2017-11-29 16:56:47,889 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:56:47,889 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:47,889 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:56:47,889 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:56:47 +08:00

2017-11-29 16:56:47,892 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:56:47,892 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:56:47,892 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:56:47 +08:00

2017-11-29 16:57:15,301 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,301 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:57:15,301 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,301 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:57:15,301 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,304 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:57:15,304 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,304 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,305 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,305 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:57:15,305 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,305 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:57:15,305 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,307 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:57:15,307 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,307 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,308 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,308 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:57:15,308 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,308 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '18' (Type = Int64, IsNullable = false)

2017-11-29 16:57:15,308 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,323 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 14 ms with result: SqlDataReader

2017-11-29 16:57:15,323 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,324 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,324 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,324 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Limit1].[Id] AS [Id], 
    [Limit1].[Num] AS [Num], 
    [Limit1].[Name] AS [Name], 
    [Limit1].[Description] AS [Description], 
    [Limit1].[ImgUrl] AS [ImgUrl], 
    [Limit1].[StatusId] AS [StatusId], 
    [Limit1].[WeChatUrl] AS [WeChatUrl], 
    [Limit1].[PaperId] AS [PaperId], 
    [Limit1].[PrizeName] AS [PrizeName], 
    [Limit1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Limit1].[VisitCount] AS [VisitCount], 
    [Limit1].[ForwardCount] AS [ForwardCount], 
    [Limit1].[AnswerCount] AS [AnswerCount], 
    [Limit1].[HavePrizeCount] AS [HavePrizeCount], 
    [Limit1].[PrizeCount] AS [PrizeCount], 
    [Limit1].[StartTime] AS [StartTime], 
    [Limit1].[ExamEndTime] AS [ExamEndTime], 
    [Limit1].[RewardTime] AS [RewardTime], 
    [Limit1].[IsDeleted] AS [IsDeleted], 
    [Limit1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT TOP (2) 
        [Extent1].[Id] AS [Id], 
        [Extent1].[Num] AS [Num], 
        [Extent1].[Name] AS [Name], 
        [Extent1].[Description] AS [Description], 
        [Extent1].[ImgUrl] AS [ImgUrl], 
        [Extent1].[StatusId] AS [StatusId], 
        [Extent1].[WeChatUrl] AS [WeChatUrl], 
        [Extent1].[PaperId] AS [PaperId], 
        [Extent1].[PrizeName] AS [PrizeName], 
        [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
        [Extent1].[VisitCount] AS [VisitCount], 
        [Extent1].[ForwardCount] AS [ForwardCount], 
        [Extent1].[AnswerCount] AS [AnswerCount], 
        [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
        [Extent1].[PrizeCount] AS [PrizeCount], 
        [Extent1].[StartTime] AS [StartTime], 
        [Extent1].[ExamEndTime] AS [ExamEndTime], 
        [Extent1].[RewardTime] AS [RewardTime], 
        [Extent1].[IsDeleted] AS [IsDeleted], 
        [Extent1].[CreateDateTime] AS [CreateDateTime]
        FROM  [dbo].[T_Activities] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[ActivityId]
        WHERE ([Extent2].[UserId] = @p__linq__0) AND ([Extent1].[Id] = @p__linq__1)
    )  AS [Limit1]
2017-11-29 16:57:15,324 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,325 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '18' (Type = Int64, IsNullable = false)

2017-11-29 16:57:15,325 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:57:15,325 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,336 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2017-11-29 16:57:15,336 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,336 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,337 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,340 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,341 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Activities]
SET [PrizeCount] = @0
WHERE ([Id] = @1)

2017-11-29 16:57:15,341 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '14' (Type = Int64)

2017-11-29 16:57:15,341 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '16' (Type = Int64)

2017-11-29 16:57:15,341 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,342 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:57:15,342 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,342 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [WinCount] = @0, [IsWon] = @1
WHERE ([Id] = @2)

2017-11-29 16:57:15,342 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '3' (Type = Int64)

2017-11-29 16:57:15,342 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: 'True' (Type = Boolean)

2017-11-29 16:57:15,342 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @2: '18' (Type = Int64)

2017-11-29 16:57:15,342 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,343 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2017-11-29 16:57:15,343 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,345 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,345 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,345 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,345 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:57:15,345 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,345 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '18' (Type = Int64, IsNullable = false)

2017-11-29 16:57:15,345 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,348 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:57:15,348 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,348 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,349 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,349 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,350 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [LoginErrorTimes] = @0
WHERE ([Id] = @1)

2017-11-29 16:57:15,350 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '0' (Type = Int32)

2017-11-29 16:57:15,350 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '18' (Type = Int64)

2017-11-29 16:57:15,350 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,351 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:57:15,351 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,352 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,352 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,353 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,353 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:57:15,353 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,353 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:57:15,353 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,355 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:57:15,356 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,356 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,356 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,356 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Limit1].[Id] AS [Id], 
    [Limit1].[Num] AS [Num], 
    [Limit1].[Name] AS [Name], 
    [Limit1].[Description] AS [Description], 
    [Limit1].[ImgUrl] AS [ImgUrl], 
    [Limit1].[StatusId] AS [StatusId], 
    [Limit1].[WeChatUrl] AS [WeChatUrl], 
    [Limit1].[PaperId] AS [PaperId], 
    [Limit1].[PrizeName] AS [PrizeName], 
    [Limit1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Limit1].[VisitCount] AS [VisitCount], 
    [Limit1].[ForwardCount] AS [ForwardCount], 
    [Limit1].[AnswerCount] AS [AnswerCount], 
    [Limit1].[HavePrizeCount] AS [HavePrizeCount], 
    [Limit1].[PrizeCount] AS [PrizeCount], 
    [Limit1].[StartTime] AS [StartTime], 
    [Limit1].[ExamEndTime] AS [ExamEndTime], 
    [Limit1].[RewardTime] AS [RewardTime], 
    [Limit1].[IsDeleted] AS [IsDeleted], 
    [Limit1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT TOP (2) 
        [Extent1].[Id] AS [Id], 
        [Extent1].[Num] AS [Num], 
        [Extent1].[Name] AS [Name], 
        [Extent1].[Description] AS [Description], 
        [Extent1].[ImgUrl] AS [ImgUrl], 
        [Extent1].[StatusId] AS [StatusId], 
        [Extent1].[WeChatUrl] AS [WeChatUrl], 
        [Extent1].[PaperId] AS [PaperId], 
        [Extent1].[PrizeName] AS [PrizeName], 
        [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
        [Extent1].[VisitCount] AS [VisitCount], 
        [Extent1].[ForwardCount] AS [ForwardCount], 
        [Extent1].[AnswerCount] AS [AnswerCount], 
        [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
        [Extent1].[PrizeCount] AS [PrizeCount], 
        [Extent1].[StartTime] AS [StartTime], 
        [Extent1].[ExamEndTime] AS [ExamEndTime], 
        [Extent1].[RewardTime] AS [RewardTime], 
        [Extent1].[IsDeleted] AS [IsDeleted], 
        [Extent1].[CreateDateTime] AS [CreateDateTime]
        FROM  [dbo].[T_Activities] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[ActivityId]
        WHERE ([Extent2].[UserId] = @p__linq__0) AND ([Extent1].[Id] = @p__linq__1)
    )  AS [Limit1]
2017-11-29 16:57:15,357 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,357 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:57:15,357 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:57:15,357 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,359 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:57:15,359 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,359 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,360 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,361 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,361 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Activities]
SET [PrizeCount] = @0
WHERE ([Id] = @1)

2017-11-29 16:57:15,361 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '15' (Type = Int64)

2017-11-29 16:57:15,361 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '16' (Type = Int64)

2017-11-29 16:57:15,361 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,362 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:57:15,362 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,362 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [WinCount] = @0, [IsWon] = @1
WHERE ([Id] = @2)

2017-11-29 16:57:15,362 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '3' (Type = Int64)

2017-11-29 16:57:15,362 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: 'True' (Type = Boolean)

2017-11-29 16:57:15,362 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @2: '16' (Type = Int64)

2017-11-29 16:57:15,362 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,364 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2017-11-29 16:57:15,364 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,365 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,365 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,366 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,366 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:57:15,366 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,366 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:57:15,366 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,368 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:57:15,368 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,369 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,369 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,370 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,370 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [LoginErrorTimes] = @0
WHERE ([Id] = @1)

2017-11-29 16:57:15,370 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '0' (Type = Int32)

2017-11-29 16:57:15,370 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '16' (Type = Int64)

2017-11-29 16:57:15,370 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,371 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2017-11-29 16:57:15,371 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,372 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,373 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,373 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,373 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:57:15,373 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,373 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15' (Type = Int64, IsNullable = false)

2017-11-29 16:57:15,373 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,376 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:57:15,376 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,376 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,377 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,377 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Limit1].[Id] AS [Id], 
    [Limit1].[Num] AS [Num], 
    [Limit1].[Name] AS [Name], 
    [Limit1].[Description] AS [Description], 
    [Limit1].[ImgUrl] AS [ImgUrl], 
    [Limit1].[StatusId] AS [StatusId], 
    [Limit1].[WeChatUrl] AS [WeChatUrl], 
    [Limit1].[PaperId] AS [PaperId], 
    [Limit1].[PrizeName] AS [PrizeName], 
    [Limit1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Limit1].[VisitCount] AS [VisitCount], 
    [Limit1].[ForwardCount] AS [ForwardCount], 
    [Limit1].[AnswerCount] AS [AnswerCount], 
    [Limit1].[HavePrizeCount] AS [HavePrizeCount], 
    [Limit1].[PrizeCount] AS [PrizeCount], 
    [Limit1].[StartTime] AS [StartTime], 
    [Limit1].[ExamEndTime] AS [ExamEndTime], 
    [Limit1].[RewardTime] AS [RewardTime], 
    [Limit1].[IsDeleted] AS [IsDeleted], 
    [Limit1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT TOP (2) 
        [Extent1].[Id] AS [Id], 
        [Extent1].[Num] AS [Num], 
        [Extent1].[Name] AS [Name], 
        [Extent1].[Description] AS [Description], 
        [Extent1].[ImgUrl] AS [ImgUrl], 
        [Extent1].[StatusId] AS [StatusId], 
        [Extent1].[WeChatUrl] AS [WeChatUrl], 
        [Extent1].[PaperId] AS [PaperId], 
        [Extent1].[PrizeName] AS [PrizeName], 
        [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
        [Extent1].[VisitCount] AS [VisitCount], 
        [Extent1].[ForwardCount] AS [ForwardCount], 
        [Extent1].[AnswerCount] AS [AnswerCount], 
        [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
        [Extent1].[PrizeCount] AS [PrizeCount], 
        [Extent1].[StartTime] AS [StartTime], 
        [Extent1].[ExamEndTime] AS [ExamEndTime], 
        [Extent1].[RewardTime] AS [RewardTime], 
        [Extent1].[IsDeleted] AS [IsDeleted], 
        [Extent1].[CreateDateTime] AS [CreateDateTime]
        FROM  [dbo].[T_Activities] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[ActivityId]
        WHERE ([Extent2].[UserId] = @p__linq__0) AND ([Extent1].[Id] = @p__linq__1)
    )  AS [Limit1]
2017-11-29 16:57:15,377 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,377 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15' (Type = Int64, IsNullable = false)

2017-11-29 16:57:15,377 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:57:15,377 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,380 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:57:15,380 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,380 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,380 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,381 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,381 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Activities]
SET [PrizeCount] = @0
WHERE ([Id] = @1)

2017-11-29 16:57:15,382 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '16' (Type = Int64)

2017-11-29 16:57:15,382 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '16' (Type = Int64)

2017-11-29 16:57:15,382 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,382 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:57:15,382 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,383 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [WinCount] = @0, [IsWon] = @1
WHERE ([Id] = @2)

2017-11-29 16:57:15,383 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '3' (Type = Int64)

2017-11-29 16:57:15,383 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: 'True' (Type = Boolean)

2017-11-29 16:57:15,383 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @2: '15' (Type = Int64)

2017-11-29 16:57:15,383 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,384 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2017-11-29 16:57:15,384 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,385 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,385 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,386 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,386 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:57:15,386 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,386 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15' (Type = Int64, IsNullable = false)

2017-11-29 16:57:15,386 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,388 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:57:15,389 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,389 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,389 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,390 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,390 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [LoginErrorTimes] = @0
WHERE ([Id] = @1)

2017-11-29 16:57:15,390 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '0' (Type = Int32)

2017-11-29 16:57:15,390 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '15' (Type = Int64)

2017-11-29 16:57:15,390 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,391 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 16:57:15,391 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:15,392 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:15,392 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:15 +08:00

2017-11-29 16:57:16,266 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:16 +08:00

2017-11-29 16:57:16,266 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:57:16,266 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:16,266 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:57:16,266 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:16 +08:00

2017-11-29 16:57:16,269 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:57:16,269 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:16,271 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:16 +08:00

2017-11-29 16:57:16,271 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:16 +08:00

2017-11-29 16:57:16,271 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:57:16,271 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:16,271 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:57:16,271 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:16 +08:00

2017-11-29 16:57:16,272 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:57:16,272 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:16,272 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:16 +08:00

2017-11-29 16:57:16,273 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:16 +08:00

2017-11-29 16:57:16,274 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:57:16,274 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:16,274 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:57:16,274 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:16 +08:00

2017-11-29 16:57:16,276 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:57:16,276 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:16,277 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:16 +08:00

2017-11-29 16:57:16,277 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:16 +08:00

2017-11-29 16:57:16,277 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:57:16,277 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:16,277 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:57:16,277 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:16 +08:00

2017-11-29 16:57:16,278 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 16:57:16,278 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:16,279 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:16 +08:00

2017-11-29 16:57:16,279 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:16 +08:00

2017-11-29 16:57:16,279 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:57:16,279 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:16,279 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:57:16,279 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:16 +08:00

2017-11-29 16:57:16,282 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:57:16,282 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:16,282 [36] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:16 +08:00

2017-11-29 16:57:19,817 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:19 +08:00

2017-11-29 16:57:19,817 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 16:57:19,817 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:19,817 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:57:19,817 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:19 +08:00

2017-11-29 16:57:19,820 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:57:19,820 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:19,820 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:19 +08:00

2017-11-29 16:57:19,821 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:19 +08:00

2017-11-29 16:57:19,821 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 16:57:19,821 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:19,821 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 16:57:19,821 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:19 +08:00

2017-11-29 16:57:19,822 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:57:19,822 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:19,822 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:19 +08:00

2017-11-29 16:57:19,823 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:19 +08:00

2017-11-29 16:57:19,823 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 16:57:19,823 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:19,823 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:57:19,823 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:19 +08:00

2017-11-29 16:57:19,826 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:57:19,826 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:19,826 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:19 +08:00

2017-11-29 16:57:19,826 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:19 +08:00

2017-11-29 16:57:19,827 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 16:57:19,827 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:19,827 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:57:19,827 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:19 +08:00

2017-11-29 16:57:19,828 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 16:57:19,828 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:19,828 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:19 +08:00

2017-11-29 16:57:19,828 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 16:57:19 +08:00

2017-11-29 16:57:19,829 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 16:57:19,829 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:19,829 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 16:57:19,829 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 16:57:19 +08:00

2017-11-29 16:57:19,831 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 16:57:19,831 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 16:57:19,831 [25] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 16:57:19 +08:00

2017-11-29 17:01:40,947 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,947 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 17:01:40,947 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:01:40,947 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 17:01:40,947 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,950 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:01:40,950 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:01:40,950 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,950 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,950 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 17:01:40,950 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:01:40,950 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 17:01:40,950 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,952 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 17:01:40,952 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:01:40,952 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,953 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,953 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 17:01:40,953 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:01:40,953 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '23' (Type = Int64, IsNullable = false)

2017-11-29 17:01:40,953 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,956 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:01:40,956 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:01:40,956 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,956 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,957 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Limit1].[Id] AS [Id], 
    [Limit1].[Num] AS [Num], 
    [Limit1].[Name] AS [Name], 
    [Limit1].[Description] AS [Description], 
    [Limit1].[ImgUrl] AS [ImgUrl], 
    [Limit1].[StatusId] AS [StatusId], 
    [Limit1].[WeChatUrl] AS [WeChatUrl], 
    [Limit1].[PaperId] AS [PaperId], 
    [Limit1].[PrizeName] AS [PrizeName], 
    [Limit1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Limit1].[VisitCount] AS [VisitCount], 
    [Limit1].[ForwardCount] AS [ForwardCount], 
    [Limit1].[AnswerCount] AS [AnswerCount], 
    [Limit1].[HavePrizeCount] AS [HavePrizeCount], 
    [Limit1].[PrizeCount] AS [PrizeCount], 
    [Limit1].[StartTime] AS [StartTime], 
    [Limit1].[ExamEndTime] AS [ExamEndTime], 
    [Limit1].[RewardTime] AS [RewardTime], 
    [Limit1].[IsDeleted] AS [IsDeleted], 
    [Limit1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT TOP (2) 
        [Extent1].[Id] AS [Id], 
        [Extent1].[Num] AS [Num], 
        [Extent1].[Name] AS [Name], 
        [Extent1].[Description] AS [Description], 
        [Extent1].[ImgUrl] AS [ImgUrl], 
        [Extent1].[StatusId] AS [StatusId], 
        [Extent1].[WeChatUrl] AS [WeChatUrl], 
        [Extent1].[PaperId] AS [PaperId], 
        [Extent1].[PrizeName] AS [PrizeName], 
        [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
        [Extent1].[VisitCount] AS [VisitCount], 
        [Extent1].[ForwardCount] AS [ForwardCount], 
        [Extent1].[AnswerCount] AS [AnswerCount], 
        [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
        [Extent1].[PrizeCount] AS [PrizeCount], 
        [Extent1].[StartTime] AS [StartTime], 
        [Extent1].[ExamEndTime] AS [ExamEndTime], 
        [Extent1].[RewardTime] AS [RewardTime], 
        [Extent1].[IsDeleted] AS [IsDeleted], 
        [Extent1].[CreateDateTime] AS [CreateDateTime]
        FROM  [dbo].[T_Activities] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[ActivityId]
        WHERE ([Extent2].[UserId] = @p__linq__0) AND ([Extent1].[Id] = @p__linq__1)
    )  AS [Limit1]
2017-11-29 17:01:40,957 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:01:40,957 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '23' (Type = Int64, IsNullable = false)

2017-11-29 17:01:40,957 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '16' (Type = Int64, IsNullable = false)

2017-11-29 17:01:40,957 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,959 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:01:40,960 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:01:40,960 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,961 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,962 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,962 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Activities]
SET [PrizeCount] = @0
WHERE ([Id] = @1)

2017-11-29 17:01:40,962 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '17' (Type = Int64)

2017-11-29 17:01:40,962 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '16' (Type = Int64)

2017-11-29 17:01:40,962 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,963 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 17:01:40,963 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:01:40,963 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [WinCount] = @0, [IsWon] = @1
WHERE ([Id] = @2)

2017-11-29 17:01:40,963 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2017-11-29 17:01:40,963 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: 'True' (Type = Boolean)

2017-11-29 17:01:40,963 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @2: '23' (Type = Int64)

2017-11-29 17:01:40,963 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,965 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2017-11-29 17:01:40,965 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:01:40,966 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,966 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,967 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,967 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 17:01:40,967 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:01:40,967 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '23' (Type = Int64, IsNullable = false)

2017-11-29 17:01:40,967 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,969 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:01:40,969 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:01:40,970 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,970 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,971 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,971 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [LoginErrorTimes] = @0
WHERE ([Id] = @1)

2017-11-29 17:01:40,971 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '0' (Type = Int32)

2017-11-29 17:01:40,971 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '23' (Type = Int64)

2017-11-29 17:01:40,971 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,972 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 17:01:40,972 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:01:40,973 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:40,973 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:01:40 +08:00

2017-11-29 17:01:42,237 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:01:42 +08:00

2017-11-29 17:01:42,237 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 17:01:42,237 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:01:42,237 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 17:01:42,237 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:01:42 +08:00

2017-11-29 17:01:42,240 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:01:42,240 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:01:42,240 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:01:42 +08:00

2017-11-29 17:01:42,240 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:01:42 +08:00

2017-11-29 17:01:42,240 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 17:01:42,240 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:01:42,240 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 17:01:42,240 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:01:42 +08:00

2017-11-29 17:01:42,242 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 17:01:42,242 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:01:42,242 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:01:42 +08:00

2017-11-29 17:01:42,243 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:01:42 +08:00

2017-11-29 17:01:42,244 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 17:01:42,244 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:01:42,244 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 17:01:42,244 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:01:42 +08:00

2017-11-29 17:01:42,246 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:01:42,246 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:01:42,247 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:01:42 +08:00

2017-11-29 17:01:42,247 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:01:42 +08:00

2017-11-29 17:01:42,247 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 17:01:42,247 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:01:42,248 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 17:01:42,248 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:01:42 +08:00

2017-11-29 17:01:42,249 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 17:01:42,249 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:01:42,249 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:01:42 +08:00

2017-11-29 17:01:42,249 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:01:42 +08:00

2017-11-29 17:01:42,250 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 17:01:42,250 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:01:42,250 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 17:01:42,250 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:01:42 +08:00

2017-11-29 17:01:42,252 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:01:42,252 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:01:42,253 [38] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:01:42 +08:00

2017-11-29 17:02:11,412 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:11 +08:00

2017-11-29 17:02:11,412 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 17:02:11,413 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:11,413 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 17:02:11,413 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:11 +08:00

2017-11-29 17:02:11,415 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:11,415 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:11,415 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:11 +08:00

2017-11-29 17:02:11,416 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:11 +08:00

2017-11-29 17:02:11,416 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 17:02:11,416 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:11,416 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 17:02:11,416 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:11 +08:00

2017-11-29 17:02:11,417 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 17:02:11,417 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:11,417 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:11 +08:00

2017-11-29 17:02:11,418 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:11 +08:00

2017-11-29 17:02:11,418 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 17:02:11,418 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:11,418 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 17:02:11,418 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:11 +08:00

2017-11-29 17:02:11,420 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:11,421 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:11,421 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:11 +08:00

2017-11-29 17:02:11,421 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:11 +08:00

2017-11-29 17:02:11,422 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 17:02:11,422 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:11,422 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 17:02:11,422 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:11 +08:00

2017-11-29 17:02:11,423 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2017-11-29 17:02:11,423 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:11,423 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:11 +08:00

2017-11-29 17:02:11,423 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:11 +08:00

2017-11-29 17:02:11,424 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 17:02:11,424 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:11,424 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 17:02:11,424 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:11 +08:00

2017-11-29 17:02:11,426 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:11,426 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:11,426 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:11 +08:00

2017-11-29 17:02:21,997 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:21 +08:00

2017-11-29 17:02:21,998 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 17:02:21,998 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:21,998 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 17:02:21,998 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:21 +08:00

2017-11-29 17:02:22,000 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:22,000 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,001 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,001 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,001 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 17:02:22,001 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,001 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 17:02:22,001 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,002 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 17:02:22,002 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,002 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,003 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,003 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 17:02:22,003 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,003 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '24' (Type = Int64, IsNullable = false)

2017-11-29 17:02:22,003 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,005 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 17:02:22,005 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,006 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,006 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,007 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Limit1].[Id] AS [Id], 
    [Limit1].[Num] AS [Num], 
    [Limit1].[Name] AS [Name], 
    [Limit1].[Description] AS [Description], 
    [Limit1].[ImgUrl] AS [ImgUrl], 
    [Limit1].[StatusId] AS [StatusId], 
    [Limit1].[WeChatUrl] AS [WeChatUrl], 
    [Limit1].[PaperId] AS [PaperId], 
    [Limit1].[PrizeName] AS [PrizeName], 
    [Limit1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Limit1].[VisitCount] AS [VisitCount], 
    [Limit1].[ForwardCount] AS [ForwardCount], 
    [Limit1].[AnswerCount] AS [AnswerCount], 
    [Limit1].[HavePrizeCount] AS [HavePrizeCount], 
    [Limit1].[PrizeCount] AS [PrizeCount], 
    [Limit1].[StartTime] AS [StartTime], 
    [Limit1].[ExamEndTime] AS [ExamEndTime], 
    [Limit1].[RewardTime] AS [RewardTime], 
    [Limit1].[IsDeleted] AS [IsDeleted], 
    [Limit1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT TOP (2) 
        [Extent1].[Id] AS [Id], 
        [Extent1].[Num] AS [Num], 
        [Extent1].[Name] AS [Name], 
        [Extent1].[Description] AS [Description], 
        [Extent1].[ImgUrl] AS [ImgUrl], 
        [Extent1].[StatusId] AS [StatusId], 
        [Extent1].[WeChatUrl] AS [WeChatUrl], 
        [Extent1].[PaperId] AS [PaperId], 
        [Extent1].[PrizeName] AS [PrizeName], 
        [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
        [Extent1].[VisitCount] AS [VisitCount], 
        [Extent1].[ForwardCount] AS [ForwardCount], 
        [Extent1].[AnswerCount] AS [AnswerCount], 
        [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
        [Extent1].[PrizeCount] AS [PrizeCount], 
        [Extent1].[StartTime] AS [StartTime], 
        [Extent1].[ExamEndTime] AS [ExamEndTime], 
        [Extent1].[RewardTime] AS [RewardTime], 
        [Extent1].[IsDeleted] AS [IsDeleted], 
        [Extent1].[CreateDateTime] AS [CreateDateTime]
        FROM  [dbo].[T_Activities] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[ActivityId]
        WHERE ([Extent2].[UserId] = @p__linq__0) AND ([Extent1].[Id] = @p__linq__1)
    )  AS [Limit1]
2017-11-29 17:02:22,007 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,007 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '24' (Type = Int64, IsNullable = false)

2017-11-29 17:02:22,007 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '16' (Type = Int64, IsNullable = false)

2017-11-29 17:02:22,007 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,009 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:22,009 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,010 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,010 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,011 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,012 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Activities]
SET [PrizeCount] = @0
WHERE ([Id] = @1)

2017-11-29 17:02:22,012 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '18' (Type = Int64)

2017-11-29 17:02:22,012 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '16' (Type = Int64)

2017-11-29 17:02:22,012 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,012 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 17:02:22,013 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,013 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [WinCount] = @0, [IsWon] = @1
WHERE ([Id] = @2)

2017-11-29 17:02:22,013 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '1' (Type = Int64)

2017-11-29 17:02:22,013 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: 'True' (Type = Boolean)

2017-11-29 17:02:22,013 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @2: '24' (Type = Int64)

2017-11-29 17:02:22,013 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,014 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2017-11-29 17:02:22,014 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,015 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,015 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,016 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,016 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 17:02:22,016 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,016 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '24' (Type = Int64, IsNullable = false)

2017-11-29 17:02:22,016 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,018 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:22,018 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,019 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,019 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,020 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,020 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [LoginErrorTimes] = @0
WHERE ([Id] = @1)

2017-11-29 17:02:22,020 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '0' (Type = Int32)

2017-11-29 17:02:22,020 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '24' (Type = Int64)

2017-11-29 17:02:22,020 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,021 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 17:02:22,021 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,022 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,022 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,023 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,023 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 17:02:22,023 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,023 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '23' (Type = Int64, IsNullable = false)

2017-11-29 17:02:22,023 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,026 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:22,026 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,026 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,026 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,027 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Limit1].[Id] AS [Id], 
    [Limit1].[Num] AS [Num], 
    [Limit1].[Name] AS [Name], 
    [Limit1].[Description] AS [Description], 
    [Limit1].[ImgUrl] AS [ImgUrl], 
    [Limit1].[StatusId] AS [StatusId], 
    [Limit1].[WeChatUrl] AS [WeChatUrl], 
    [Limit1].[PaperId] AS [PaperId], 
    [Limit1].[PrizeName] AS [PrizeName], 
    [Limit1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Limit1].[VisitCount] AS [VisitCount], 
    [Limit1].[ForwardCount] AS [ForwardCount], 
    [Limit1].[AnswerCount] AS [AnswerCount], 
    [Limit1].[HavePrizeCount] AS [HavePrizeCount], 
    [Limit1].[PrizeCount] AS [PrizeCount], 
    [Limit1].[StartTime] AS [StartTime], 
    [Limit1].[ExamEndTime] AS [ExamEndTime], 
    [Limit1].[RewardTime] AS [RewardTime], 
    [Limit1].[IsDeleted] AS [IsDeleted], 
    [Limit1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT TOP (2) 
        [Extent1].[Id] AS [Id], 
        [Extent1].[Num] AS [Num], 
        [Extent1].[Name] AS [Name], 
        [Extent1].[Description] AS [Description], 
        [Extent1].[ImgUrl] AS [ImgUrl], 
        [Extent1].[StatusId] AS [StatusId], 
        [Extent1].[WeChatUrl] AS [WeChatUrl], 
        [Extent1].[PaperId] AS [PaperId], 
        [Extent1].[PrizeName] AS [PrizeName], 
        [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
        [Extent1].[VisitCount] AS [VisitCount], 
        [Extent1].[ForwardCount] AS [ForwardCount], 
        [Extent1].[AnswerCount] AS [AnswerCount], 
        [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
        [Extent1].[PrizeCount] AS [PrizeCount], 
        [Extent1].[StartTime] AS [StartTime], 
        [Extent1].[ExamEndTime] AS [ExamEndTime], 
        [Extent1].[RewardTime] AS [RewardTime], 
        [Extent1].[IsDeleted] AS [IsDeleted], 
        [Extent1].[CreateDateTime] AS [CreateDateTime]
        FROM  [dbo].[T_Activities] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[ActivityId]
        WHERE ([Extent2].[UserId] = @p__linq__0) AND ([Extent1].[Id] = @p__linq__1)
    )  AS [Limit1]
2017-11-29 17:02:22,027 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,027 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '23' (Type = Int64, IsNullable = false)

2017-11-29 17:02:22,027 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '16' (Type = Int64, IsNullable = false)

2017-11-29 17:02:22,027 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,029 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:22,029 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,030 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,030 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,031 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,031 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Activities]
SET [PrizeCount] = @0
WHERE ([Id] = @1)

2017-11-29 17:02:22,031 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '19' (Type = Int64)

2017-11-29 17:02:22,031 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '16' (Type = Int64)

2017-11-29 17:02:22,031 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,032 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 17:02:22,032 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,032 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [WinCount] = @0, [IsWon] = @1
WHERE ([Id] = @2)

2017-11-29 17:02:22,032 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '3' (Type = Int64)

2017-11-29 17:02:22,032 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: 'True' (Type = Boolean)

2017-11-29 17:02:22,032 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @2: '23' (Type = Int64)

2017-11-29 17:02:22,032 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,034 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2017-11-29 17:02:22,034 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,035 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,035 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,035 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,036 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 17:02:22,036 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,036 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '23' (Type = Int64, IsNullable = false)

2017-11-29 17:02:22,036 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,038 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:22,038 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,039 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,039 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,040 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,040 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [LoginErrorTimes] = @0
WHERE ([Id] = @1)

2017-11-29 17:02:22,040 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '0' (Type = Int32)

2017-11-29 17:02:22,040 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '23' (Type = Int64)

2017-11-29 17:02:22,040 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,041 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 17:02:22,041 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,043 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,043 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,043 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,043 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 17:02:22,043 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,043 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '22' (Type = Int64, IsNullable = false)

2017-11-29 17:02:22,043 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,046 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:22,046 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,046 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,046 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,047 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Limit1].[Id] AS [Id], 
    [Limit1].[Num] AS [Num], 
    [Limit1].[Name] AS [Name], 
    [Limit1].[Description] AS [Description], 
    [Limit1].[ImgUrl] AS [ImgUrl], 
    [Limit1].[StatusId] AS [StatusId], 
    [Limit1].[WeChatUrl] AS [WeChatUrl], 
    [Limit1].[PaperId] AS [PaperId], 
    [Limit1].[PrizeName] AS [PrizeName], 
    [Limit1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Limit1].[VisitCount] AS [VisitCount], 
    [Limit1].[ForwardCount] AS [ForwardCount], 
    [Limit1].[AnswerCount] AS [AnswerCount], 
    [Limit1].[HavePrizeCount] AS [HavePrizeCount], 
    [Limit1].[PrizeCount] AS [PrizeCount], 
    [Limit1].[StartTime] AS [StartTime], 
    [Limit1].[ExamEndTime] AS [ExamEndTime], 
    [Limit1].[RewardTime] AS [RewardTime], 
    [Limit1].[IsDeleted] AS [IsDeleted], 
    [Limit1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT TOP (2) 
        [Extent1].[Id] AS [Id], 
        [Extent1].[Num] AS [Num], 
        [Extent1].[Name] AS [Name], 
        [Extent1].[Description] AS [Description], 
        [Extent1].[ImgUrl] AS [ImgUrl], 
        [Extent1].[StatusId] AS [StatusId], 
        [Extent1].[WeChatUrl] AS [WeChatUrl], 
        [Extent1].[PaperId] AS [PaperId], 
        [Extent1].[PrizeName] AS [PrizeName], 
        [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
        [Extent1].[VisitCount] AS [VisitCount], 
        [Extent1].[ForwardCount] AS [ForwardCount], 
        [Extent1].[AnswerCount] AS [AnswerCount], 
        [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
        [Extent1].[PrizeCount] AS [PrizeCount], 
        [Extent1].[StartTime] AS [StartTime], 
        [Extent1].[ExamEndTime] AS [ExamEndTime], 
        [Extent1].[RewardTime] AS [RewardTime], 
        [Extent1].[IsDeleted] AS [IsDeleted], 
        [Extent1].[CreateDateTime] AS [CreateDateTime]
        FROM  [dbo].[T_Activities] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[ActivityId]
        WHERE ([Extent2].[UserId] = @p__linq__0) AND ([Extent1].[Id] = @p__linq__1)
    )  AS [Limit1]
2017-11-29 17:02:22,047 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,047 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '22' (Type = Int64, IsNullable = false)

2017-11-29 17:02:22,047 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '16' (Type = Int64, IsNullable = false)

2017-11-29 17:02:22,047 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,049 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:22,050 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,050 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,050 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,051 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,051 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Activities]
SET [PrizeCount] = @0
WHERE ([Id] = @1)

2017-11-29 17:02:22,051 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '20' (Type = Int64)

2017-11-29 17:02:22,052 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '16' (Type = Int64)

2017-11-29 17:02:22,052 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,053 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 17:02:22,053 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,053 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [WinCount] = @0, [IsWon] = @1
WHERE ([Id] = @2)

2017-11-29 17:02:22,053 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2017-11-29 17:02:22,053 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: 'True' (Type = Boolean)

2017-11-29 17:02:22,053 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @2: '22' (Type = Int64)

2017-11-29 17:02:22,053 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,054 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 17:02:22,054 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,055 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,055 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,056 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,056 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 17:02:22,056 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,056 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '22' (Type = Int64, IsNullable = false)

2017-11-29 17:02:22,056 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,059 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:22,059 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,059 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,059 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,060 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,060 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [LoginErrorTimes] = @0
WHERE ([Id] = @1)

2017-11-29 17:02:22,060 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '0' (Type = Int32)

2017-11-29 17:02:22,060 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '22' (Type = Int64)

2017-11-29 17:02:22,060 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,061 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 17:02:22,061 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:22,063 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:22,063 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:22 +08:00

2017-11-29 17:02:23,874 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:23 +08:00

2017-11-29 17:02:23,875 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 17:02:23,875 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:23,875 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 17:02:23,875 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:23 +08:00

2017-11-29 17:02:23,877 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:23,877 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:23,878 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:23 +08:00

2017-11-29 17:02:23,878 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:23 +08:00

2017-11-29 17:02:23,878 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 17:02:23,878 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:23,878 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 17:02:23,878 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:23 +08:00

2017-11-29 17:02:23,879 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 17:02:23,879 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:23,879 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:23 +08:00

2017-11-29 17:02:23,880 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:23 +08:00

2017-11-29 17:02:23,881 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 17:02:23,881 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:23,881 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 17:02:23,881 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:23 +08:00

2017-11-29 17:02:23,883 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:23,883 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:23,884 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:23 +08:00

2017-11-29 17:02:23,884 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:23 +08:00

2017-11-29 17:02:23,885 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 17:02:23,885 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:23,885 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 17:02:23,885 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:23 +08:00

2017-11-29 17:02:23,886 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 17:02:23,886 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:23,886 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:23 +08:00

2017-11-29 17:02:23,887 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:23 +08:00

2017-11-29 17:02:23,887 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 17:02:23,887 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:23,887 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 17:02:23,887 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:23 +08:00

2017-11-29 17:02:23,890 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:23,890 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:23,890 [50] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:23 +08:00

2017-11-29 17:02:29,416 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:29 +08:00

2017-11-29 17:02:29,416 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 17:02:29,416 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:29,416 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 17:02:29,416 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:29 +08:00

2017-11-29 17:02:29,419 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:29,419 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:29,419 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:29 +08:00

2017-11-29 17:02:29,419 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:29 +08:00

2017-11-29 17:02:29,419 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 17:02:29,419 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:29,419 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 17:02:29,419 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:29 +08:00

2017-11-29 17:02:29,421 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 17:02:29,421 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:29,421 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:29 +08:00

2017-11-29 17:02:29,421 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:29 +08:00

2017-11-29 17:02:29,422 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Num] AS [Num], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[ImgUrl] AS [ImgUrl], 
    [Extent1].[StatusId] AS [StatusId], 
    [Extent1].[WeChatUrl] AS [WeChatUrl], 
    [Extent1].[PaperId] AS [PaperId], 
    [Extent1].[PrizeName] AS [PrizeName], 
    [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Extent1].[VisitCount] AS [VisitCount], 
    [Extent1].[ForwardCount] AS [ForwardCount], 
    [Extent1].[AnswerCount] AS [AnswerCount], 
    [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
    [Extent1].[PrizeCount] AS [PrizeCount], 
    [Extent1].[StartTime] AS [StartTime], 
    [Extent1].[ExamEndTime] AS [ExamEndTime], 
    [Extent1].[RewardTime] AS [RewardTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Activities] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 17:02:29,422 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:29,422 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 17:02:29,422 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:29 +08:00

2017-11-29 17:02:29,424 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:29,424 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:29,425 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:29 +08:00

2017-11-29 17:02:29,425 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:29 +08:00

2017-11-29 17:02:29,425 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM  [dbo].[T_Users] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
        WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
    )  AS [GroupBy1]
2017-11-29 17:02:29,425 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:29,425 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 17:02:29,425 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:29 +08:00

2017-11-29 17:02:29,426 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 17:02:29,427 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:29,427 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:29 +08:00

2017-11-29 17:02:29,427 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:29 +08:00

2017-11-29 17:02:29,427 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[Name] AS [Name], 
    [Project1].[NickName] AS [NickName], 
    [Project1].[PhotoUrl] AS [PhotoUrl], 
    [Project1].[Mobile] AS [Mobile], 
    [Project1].[Gender] AS [Gender], 
    [Project1].[Address] AS [Address], 
    [Project1].[PasswordSalt] AS [PasswordSalt], 
    [Project1].[PasswordHash] AS [PasswordHash], 
    [Project1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Project1].[PassCount] AS [PassCount], 
    [Project1].[WinCount] AS [WinCount], 
    [Project1].[IsWon] AS [IsWon], 
    [Project1].[ChangeTime] AS [ChangeTime], 
    [Project1].[IsDeleted] AS [IsDeleted], 
    [Project1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[Name] AS [Name], [Project1].[NickName] AS [NickName], [Project1].[PhotoUrl] AS [PhotoUrl], [Project1].[Mobile] AS [Mobile], [Project1].[Gender] AS [Gender], [Project1].[Address] AS [Address], [Project1].[PasswordSalt] AS [PasswordSalt], [Project1].[PasswordHash] AS [PasswordHash], [Project1].[LoginErrorTimes] AS [LoginErrorTimes], [Project1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], [Project1].[PassCount] AS [PassCount], [Project1].[WinCount] AS [WinCount], [Project1].[IsWon] AS [IsWon], [Project1].[ChangeTime] AS [ChangeTime], [Project1].[IsDeleted] AS [IsDeleted], [Project1].[CreateDateTime] AS [CreateDateTime], row_number() OVER (ORDER BY [Project1].[CreateDateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[NickName] AS [NickName], 
            [Extent1].[PhotoUrl] AS [PhotoUrl], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[Address] AS [Address], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
            [Extent1].[PassCount] AS [PassCount], 
            [Extent1].[WinCount] AS [WinCount], 
            [Extent1].[IsWon] AS [IsWon], 
            [Extent1].[ChangeTime] AS [ChangeTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_Users] AS [Extent1]
            INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[UserId]
            WHERE ([Extent2].[ActivityId] = @p__linq__0) AND (0 = [Extent1].[IsDeleted]) AND (1 = [Extent1].[LoginErrorTimes])
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateDateTime] DESC
2017-11-29 17:02:29,427 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:29,427 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '16' (Type = Int64, IsNullable = false)

2017-11-29 17:02:29,427 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:29 +08:00

2017-11-29 17:02:29,430 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:29,430 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:29,430 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:29 +08:00

2017-11-29 17:02:32,114 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,114 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
2017-11-29 17:02:32,114 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:32,114 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64, IsNullable = false)

2017-11-29 17:02:32,114 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,117 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:32,117 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:32,117 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,117 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,117 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent2].[Id] AS [Id], 
    [Extent2].[Description] AS [Description], 
    [Extent2].[Name] AS [Name], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[CreateDateTime] AS [CreateDateTime]
    FROM  [dbo].[T_RolePermissions] AS [Extent1]
    INNER JOIN [dbo].[T_Permissions] AS [Extent2] ON [Extent1].[PermissionId] = [Extent2].[Id]
    WHERE [Extent1].[RoleId] = @EntityKeyValue1
2017-11-29 17:02:32,117 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:32,117 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2017-11-29 17:02:32,117 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,119 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2017-11-29 17:02:32,119 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:32,119 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,120 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,120 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 17:02:32,120 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:32,120 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '18' (Type = Int64, IsNullable = false)

2017-11-29 17:02:32,120 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,123 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:32,123 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:32,123 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,123 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,124 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Limit1].[Id] AS [Id], 
    [Limit1].[Num] AS [Num], 
    [Limit1].[Name] AS [Name], 
    [Limit1].[Description] AS [Description], 
    [Limit1].[ImgUrl] AS [ImgUrl], 
    [Limit1].[StatusId] AS [StatusId], 
    [Limit1].[WeChatUrl] AS [WeChatUrl], 
    [Limit1].[PaperId] AS [PaperId], 
    [Limit1].[PrizeName] AS [PrizeName], 
    [Limit1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Limit1].[VisitCount] AS [VisitCount], 
    [Limit1].[ForwardCount] AS [ForwardCount], 
    [Limit1].[AnswerCount] AS [AnswerCount], 
    [Limit1].[HavePrizeCount] AS [HavePrizeCount], 
    [Limit1].[PrizeCount] AS [PrizeCount], 
    [Limit1].[StartTime] AS [StartTime], 
    [Limit1].[ExamEndTime] AS [ExamEndTime], 
    [Limit1].[RewardTime] AS [RewardTime], 
    [Limit1].[IsDeleted] AS [IsDeleted], 
    [Limit1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT TOP (2) 
        [Extent1].[Id] AS [Id], 
        [Extent1].[Num] AS [Num], 
        [Extent1].[Name] AS [Name], 
        [Extent1].[Description] AS [Description], 
        [Extent1].[ImgUrl] AS [ImgUrl], 
        [Extent1].[StatusId] AS [StatusId], 
        [Extent1].[WeChatUrl] AS [WeChatUrl], 
        [Extent1].[PaperId] AS [PaperId], 
        [Extent1].[PrizeName] AS [PrizeName], 
        [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
        [Extent1].[VisitCount] AS [VisitCount], 
        [Extent1].[ForwardCount] AS [ForwardCount], 
        [Extent1].[AnswerCount] AS [AnswerCount], 
        [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
        [Extent1].[PrizeCount] AS [PrizeCount], 
        [Extent1].[StartTime] AS [StartTime], 
        [Extent1].[ExamEndTime] AS [ExamEndTime], 
        [Extent1].[RewardTime] AS [RewardTime], 
        [Extent1].[IsDeleted] AS [IsDeleted], 
        [Extent1].[CreateDateTime] AS [CreateDateTime]
        FROM  [dbo].[T_Activities] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[ActivityId]
        WHERE ([Extent2].[UserId] = @p__linq__0) AND ([Extent1].[Id] = @p__linq__1)
    )  AS [Limit1]
2017-11-29 17:02:32,124 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:32,124 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '18' (Type = Int64, IsNullable = false)

2017-11-29 17:02:32,124 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '16' (Type = Int64, IsNullable = false)

2017-11-29 17:02:32,124 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,127 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:32,127 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:32,127 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,128 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,128 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,129 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Activities]
SET [PrizeCount] = @0
WHERE ([Id] = @1)

2017-11-29 17:02:32,129 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '21' (Type = Int64)

2017-11-29 17:02:32,129 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '16' (Type = Int64)

2017-11-29 17:02:32,129 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,130 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 17:02:32,130 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:32,130 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [WinCount] = @0, [IsWon] = @1
WHERE ([Id] = @2)

2017-11-29 17:02:32,130 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '4' (Type = Int64)

2017-11-29 17:02:32,130 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: 'True' (Type = Boolean)

2017-11-29 17:02:32,130 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @2: '18' (Type = Int64)

2017-11-29 17:02:32,130 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,131 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2017-11-29 17:02:32,131 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:32,133 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,133 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,133 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,134 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 17:02:32,134 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:32,134 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '18' (Type = Int64, IsNullable = false)

2017-11-29 17:02:32,134 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,136 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:32,136 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:32,136 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,137 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,137 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,138 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [LoginErrorTimes] = @0
WHERE ([Id] = @1)

2017-11-29 17:02:32,138 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '0' (Type = Int32)

2017-11-29 17:02:32,138 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '18' (Type = Int64)

2017-11-29 17:02:32,138 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,139 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2017-11-29 17:02:32,139 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:32,140 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,140 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,141 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,141 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 17:02:32,141 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:32,141 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '17' (Type = Int64, IsNullable = false)

2017-11-29 17:02:32,141 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,144 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:32,144 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:32,144 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,144 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,145 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Limit1].[Id] AS [Id], 
    [Limit1].[Num] AS [Num], 
    [Limit1].[Name] AS [Name], 
    [Limit1].[Description] AS [Description], 
    [Limit1].[ImgUrl] AS [ImgUrl], 
    [Limit1].[StatusId] AS [StatusId], 
    [Limit1].[WeChatUrl] AS [WeChatUrl], 
    [Limit1].[PaperId] AS [PaperId], 
    [Limit1].[PrizeName] AS [PrizeName], 
    [Limit1].[PrizeImgUrl] AS [PrizeImgUrl], 
    [Limit1].[VisitCount] AS [VisitCount], 
    [Limit1].[ForwardCount] AS [ForwardCount], 
    [Limit1].[AnswerCount] AS [AnswerCount], 
    [Limit1].[HavePrizeCount] AS [HavePrizeCount], 
    [Limit1].[PrizeCount] AS [PrizeCount], 
    [Limit1].[StartTime] AS [StartTime], 
    [Limit1].[ExamEndTime] AS [ExamEndTime], 
    [Limit1].[RewardTime] AS [RewardTime], 
    [Limit1].[IsDeleted] AS [IsDeleted], 
    [Limit1].[CreateDateTime] AS [CreateDateTime]
    FROM ( SELECT TOP (2) 
        [Extent1].[Id] AS [Id], 
        [Extent1].[Num] AS [Num], 
        [Extent1].[Name] AS [Name], 
        [Extent1].[Description] AS [Description], 
        [Extent1].[ImgUrl] AS [ImgUrl], 
        [Extent1].[StatusId] AS [StatusId], 
        [Extent1].[WeChatUrl] AS [WeChatUrl], 
        [Extent1].[PaperId] AS [PaperId], 
        [Extent1].[PrizeName] AS [PrizeName], 
        [Extent1].[PrizeImgUrl] AS [PrizeImgUrl], 
        [Extent1].[VisitCount] AS [VisitCount], 
        [Extent1].[ForwardCount] AS [ForwardCount], 
        [Extent1].[AnswerCount] AS [AnswerCount], 
        [Extent1].[HavePrizeCount] AS [HavePrizeCount], 
        [Extent1].[PrizeCount] AS [PrizeCount], 
        [Extent1].[StartTime] AS [StartTime], 
        [Extent1].[ExamEndTime] AS [ExamEndTime], 
        [Extent1].[RewardTime] AS [RewardTime], 
        [Extent1].[IsDeleted] AS [IsDeleted], 
        [Extent1].[CreateDateTime] AS [CreateDateTime]
        FROM  [dbo].[T_Activities] AS [Extent1]
        INNER JOIN [dbo].[T_UserActivities] AS [Extent2] ON [Extent1].[Id] = [Extent2].[ActivityId]
        WHERE ([Extent2].[UserId] = @p__linq__0) AND ([Extent1].[Id] = @p__linq__1)
    )  AS [Limit1]
2017-11-29 17:02:32,145 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:32,145 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '17' (Type = Int64, IsNullable = false)

2017-11-29 17:02:32,145 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__1: '16' (Type = Int64, IsNullable = false)

2017-11-29 17:02:32,145 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,147 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:32,148 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:32,148 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,148 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,149 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,149 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Activities]
SET [PrizeCount] = @0
WHERE ([Id] = @1)

2017-11-29 17:02:32,149 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '22' (Type = Int64)

2017-11-29 17:02:32,150 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '16' (Type = Int64)

2017-11-29 17:02:32,150 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,150 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 17:02:32,150 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:32,150 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [WinCount] = @0, [IsWon] = @1
WHERE ([Id] = @2)

2017-11-29 17:02:32,150 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '4' (Type = Int64)

2017-11-29 17:02:32,150 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: 'True' (Type = Boolean)

2017-11-29 17:02:32,150 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @2: '17' (Type = Int64)

2017-11-29 17:02:32,151 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,152 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2017-11-29 17:02:32,152 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:32,153 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,153 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,154 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,154 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[NickName] AS [NickName], 
    [Extent1].[PhotoUrl] AS [PhotoUrl], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Gender] AS [Gender], 
    [Extent1].[Address] AS [Address], 
    [Extent1].[PasswordSalt] AS [PasswordSalt], 
    [Extent1].[PasswordHash] AS [PasswordHash], 
    [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Extent1].[LastLoginErrorDateTime] AS [LastLoginErrorDateTime], 
    [Extent1].[PassCount] AS [PassCount], 
    [Extent1].[WinCount] AS [WinCount], 
    [Extent1].[IsWon] AS [IsWon], 
    [Extent1].[ChangeTime] AS [ChangeTime], 
    [Extent1].[IsDeleted] AS [IsDeleted], 
    [Extent1].[CreateDateTime] AS [CreateDateTime]
    FROM [dbo].[T_Users] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2017-11-29 17:02:32,154 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:32,154 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- p__linq__0: '17' (Type = Int64, IsNullable = false)

2017-11-29 17:02:32,154 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,157 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2017-11-29 17:02:32,157 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:32,157 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,157 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,158 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Started transaction at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,158 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_Users]
SET [LoginErrorTimes] = @0
WHERE ([Id] = @1)

2017-11-29 17:02:32,158 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @0: '0' (Type = Int32)

2017-11-29 17:02:32,158 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- @1: '17' (Type = Int64)

2017-11-29 17:02:32,158 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Executing at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,159 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2017-11-29 17:02:32,159 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：

2017-11-29 17:02:32,160 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Committed transaction at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:32,161 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Closed connection at 2017/11/29 17:02:32 +08:00

2017-11-29 17:02:33,070 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：Opened connection at 2017/11/29 17:02:33 +08:00

2017-11-29 17:02:33,070 [35] DEBUG Chat.Service.MyDbContext - EF执行SQL：SELECT 
    [Project2].[LoginErrorTimes] AS [LoginErrorTimes], 
    [Project2].[Id] AS [Id], 
    [Project2].[Name] AS [Name], 
    [Project2].[Mobile] AS [Mobile], 
    [Project2].[Gender] AS [Gender], 
    [Project2].[PasswordSalt] AS [PasswordSalt], 
    [Project2].[PasswordHash] AS [PasswordHash], 
    [Project2].[Email] AS [Email], 
    [Project2].[LastLoginErrorTime] AS [LastLoginErrorTime], 
    [Project2].[IsDeleted] AS [IsDeleted], 
    [Project2].[CreateDateTime] AS [CreateDateTime], 
    [Project2].[C1] AS [C1], 
    [Project2].[Id1] AS [Id1], 
    [Project2].[Name1] AS [Name1], 
    [Project2].[Description] AS [Description], 
    [Project2].[IsDeleted1] AS [IsDeleted1], 
    [Project2].[CreateDateTime1] AS [CreateDateTime1]
    FROM ( SELECT 
        [Limit1].[Id] AS [Id], 
        [Limit1].[Name] AS [Name], 
        [Limit1].[Mobile] AS [Mobile], 
        [Limit1].[Gender] AS [Gender], 
        [Limit1].[PasswordSalt] AS [PasswordSalt], 
        [Limit1].[PasswordHash] AS [PasswordHash], 
        [Limit1].[Email] AS [Email], 
        [Limit1].[LoginErrorTimes] AS [LoginErrorTimes], 
        [Limit1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
        [Limit1].[IsDeleted] AS [IsDeleted], 
        [Limit1].[CreateDateTime] AS [CreateDateTime], 
        [Join1].[Id] AS [Id1], 
        [Join1].[Name] AS [Name1], 
        [Join1].[Description] AS [Description], 
        [Join1].[IsDeleted] AS [IsDeleted1], 
        [Join1].[CreateDateTime] AS [CreateDateTime1], 
        CASE WHEN ([Join1].[AdminUserId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
        FROM   (SELECT TOP (2) 
            [Extent1].[Id] AS [Id], 
            [Extent1].[Name] AS [Name], 
            [Extent1].[Mobile] AS [Mobile], 
            [Extent1].[Gender] AS [Gender], 
            [Extent1].[PasswordSalt] AS [PasswordSalt], 
            [Extent1].[PasswordHash] AS [PasswordHash], 
            [Extent1].[Email] AS [Email], 
            [Extent1].[LoginErrorTimes] AS [LoginErrorTimes], 
            [Extent1].[LastLoginErrorTime] AS [LastLoginErrorTime], 
            [Extent1].[IsDeleted] AS [IsDeleted], 
            [Extent1].[CreateDateTime] AS [CreateDateTime]
            FROM [dbo].[T_AdminUsers] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0) ) AS [Limit1]
        LEFT OUTER JOIN  (SELECT [Extent2].[AdminUserId] AS [AdminUserId], [Extent3].[Id] AS [Id], [Extent3].[Name] AS [Name], [Extent3].[Description] AS [Description], [Extent3].[IsDeleted] AS [IsDeleted], [Extent3].[CreateDateTime] AS [CreateDateTime]
            FROM  [dbo].[T_AdminUserRoles] AS [Extent2]
            INNER JOIN [dbo].[T_Roles] AS [Extent3] ON [Extent3].[Id] = [Extent2].[RoleId] ) AS [Join1] ON [Limit1].[Id] = [Join1].[AdminUserId]
    )  AS [Project2]
    ORDER BY [Project2].[Id] ASC, [Project2].[C1] ASC
